<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 10 Prediction | Data Analysis with R for Social Scientists</title>
  <meta name="description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content=" 10 Prediction | Data Analysis with R for Social Scientists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="github-repo" content="jaspertjaden/DataAnalysisR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 10 Prediction | Data Analysis with R for Social Scientists" />
  
  <meta name="twitter:description" content="In this course, you will learn how to analyse data using regression in R." />
  

<meta name="author" content="Jakob Tures &amp; Jasper Tjaden" />


<meta name="date" content="2023-10-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lin-e.html"/>
<link rel="next" href="ml.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About the Authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#github-repo"><i class="fa fa-check"></i>GitHub Repo</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-sem.html"><a href="intro-sem.html"><i class="fa fa-check"></i><b>1</b> Introduction to Seminar</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-sem.html"><a href="intro-sem.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="eda-1.html"><a href="eda-1.html"><i class="fa fa-check"></i><b>2</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="2.1" data-path="eda-1.html"><a href="eda-1.html#objectives"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="eda-1.html"><a href="eda-1.html#r-functions-covered-this-week"><i class="fa fa-check"></i><b>2.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="2.3" data-path="eda-1.html"><a href="eda-1.html#what-is-eda-and-why-is-it-so-important"><i class="fa fa-check"></i><b>2.3</b> What is <em>EDA</em> and why is it so important?</a></li>
<li class="chapter" data-level="2.4" data-path="eda-1.html"><a href="eda-1.html#importing-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Importing data into R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="eda-1.html"><a href="eda-1.html#merge-datasets"><i class="fa fa-check"></i><b>2.4.1</b> Merge datasets</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="eda-1.html"><a href="eda-1.html#clean-dataset"><i class="fa fa-check"></i><b>2.5</b> Clean dataset</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="eda-1.html"><a href="eda-1.html#mutating-variables"><i class="fa fa-check"></i><b>2.5.1</b> Mutating variables</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="eda-1.html"><a href="eda-1.html#explore-the-complete-dataset"><i class="fa fa-check"></i><b>2.6</b> Explore the complete dataset</a></li>
<li class="chapter" data-level="2.7" data-path="eda-1.html"><a href="eda-1.html#explore-individual-variables"><i class="fa fa-check"></i><b>2.7</b> Explore individual variables</a></li>
<li class="chapter" data-level="2.8" data-path="eda-1.html"><a href="eda-1.html#moving-on"><i class="fa fa-check"></i><b>2.8</b> Moving on</a></li>
<li class="chapter" data-level="2.9" data-path="eda-1.html"><a href="eda-1.html#further-resources"><i class="fa fa-check"></i><b>2.9</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda-2.html"><a href="eda-2.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis - Exercise</a>
<ul>
<li class="chapter" data-level="3.1" data-path="eda-2.html"><a href="eda-2.html#what-is-r-markdown"><i class="fa fa-check"></i><b>3.1</b> What is R Markdown?</a></li>
<li class="chapter" data-level="3.2" data-path="eda-2.html"><a href="eda-2.html#creating-a-r-markdown-file"><i class="fa fa-check"></i><b>3.2</b> Creating a R Markdown file</a></li>
<li class="chapter" data-level="3.3" data-path="eda-2.html"><a href="eda-2.html#writing-in-r-markdown"><i class="fa fa-check"></i><b>3.3</b> Writing in R Markdown</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="eda-2.html"><a href="eda-2.html#document-components"><i class="fa fa-check"></i><b>3.3.1</b> Document components</a></li>
<li class="chapter" data-level="3.3.2" data-path="eda-2.html"><a href="eda-2.html#formatting"><i class="fa fa-check"></i><b>3.3.2</b> Formatting</a></li>
<li class="chapter" data-level="3.3.3" data-path="eda-2.html"><a href="eda-2.html#code-chunks"><i class="fa fa-check"></i><b>3.3.3</b> Code chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="eda-2.html"><a href="eda-2.html#further-resources-1"><i class="fa fa-check"></i><b>3.4</b> Further resources</a></li>
<li class="chapter" data-level="3.5" data-path="eda-2.html"><a href="eda-2.html#eda---exercise"><i class="fa fa-check"></i><b>3.5</b> EDA - Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dags-1.html"><a href="dags-1.html"><i class="fa fa-check"></i><b>4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dags-1.html"><a href="dags-1.html#objectives-1"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dags-1.html"><a href="dags-1.html#functions-covered"><i class="fa fa-check"></i><b>4.2</b> Functions Covered</a></li>
<li class="chapter" data-level="4.3" data-path="dags-1.html"><a href="dags-1.html#modelling"><i class="fa fa-check"></i><b>4.3</b> Modelling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dags-1.html"><a href="dags-1.html#what-is-modelling"><i class="fa fa-check"></i><b>4.3.1</b> What is modelling?</a></li>
<li class="chapter" data-level="4.3.2" data-path="dags-1.html"><a href="dags-1.html#estimating-effects-vs.-prediction"><i class="fa fa-check"></i><b>4.3.2</b> Estimating effects vs. prediction</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dags-1.html"><a href="dags-1.html#dags"><i class="fa fa-check"></i><b>4.4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dags-1.html"><a href="dags-1.html#directed-acyclical-graphs"><i class="fa fa-check"></i><b>4.4.1</b> Directed acyclical graphs</a></li>
<li class="chapter" data-level="4.4.2" data-path="dags-1.html"><a href="dags-1.html#patterns-of-relationships"><i class="fa fa-check"></i><b>4.4.2</b> Patterns of relationships</a></li>
<li class="chapter" data-level="4.4.3" data-path="dags-1.html"><a href="dags-1.html#adjustment-set"><i class="fa fa-check"></i><b>4.4.3</b> Adjustment set</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dags-1.html"><a href="dags-1.html#nba-dag"><i class="fa fa-check"></i><b>4.5</b> NBA DAG</a></li>
<li class="chapter" data-level="4.6" data-path="dags-1.html"><a href="dags-1.html#resources"><i class="fa fa-check"></i><b>4.6</b> Resources</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dags-1.html"><a href="dags-1.html#dagitty.net"><i class="fa fa-check"></i><b>4.6.1</b> dagitty.net</a></li>
<li class="chapter" data-level="4.6.2" data-path="dags-1.html"><a href="dags-1.html#how-to-use-dagitty"><i class="fa fa-check"></i><b>4.6.2</b> How to use dagitty()</a></li>
<li class="chapter" data-level="4.6.3" data-path="dags-1.html"><a href="dags-1.html#more-on-dags"><i class="fa fa-check"></i><b>4.6.3</b> More on DAGs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lin-t-1.html"><a href="lin-t-1.html"><i class="fa fa-check"></i><b>5</b> Linear Regression - Theory I: Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lin-t-1.html"><a href="lin-t-1.html#objectives-2"><i class="fa fa-check"></i><b>5.1</b> Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="lin-t-1.html"><a href="lin-t-1.html#what-is-linear-regression"><i class="fa fa-check"></i><b>5.2</b> What is Linear Regression</a></li>
<li class="chapter" data-level="5.3" data-path="lin-t-1.html"><a href="lin-t-1.html#examplary-research-question-data"><i class="fa fa-check"></i><b>5.3</b> Examplary research question &amp; data</a></li>
<li class="chapter" data-level="5.4" data-path="lin-t-1.html"><a href="lin-t-1.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.4</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lin-t-1.html"><a href="lin-t-1.html#regression-formula"><i class="fa fa-check"></i><b>5.4.1</b> Regression Formula</a></li>
<li class="chapter" data-level="5.4.2" data-path="lin-t-1.html"><a href="lin-t-1.html#regressing-grade-on-hours"><i class="fa fa-check"></i><b>5.4.2</b> Regressing <code>grade</code> on <code>hours</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lin-t-1.html"><a href="lin-t-1.html#moving-on-1"><i class="fa fa-check"></i><b>5.5</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-t-2.html"><a href="lin-t-2.html"><i class="fa fa-check"></i><b>6</b> Linear Regression - Theory II: Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lin-t-2.html"><a href="lin-t-2.html#objectives-3"><i class="fa fa-check"></i><b>6.1</b> Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="lin-t-2.html"><a href="lin-t-2.html#multiple-linear-regression"><i class="fa fa-check"></i><b>6.2</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-additional-metric-variables"><i class="fa fa-check"></i><b>6.2.1</b> Adding additional metric variables</a></li>
<li class="chapter" data-level="6.2.2" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-dummy-variables"><i class="fa fa-check"></i><b>6.2.2</b> Adding dummy variables</a></li>
<li class="chapter" data-level="6.2.3" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-categorical-variables"><i class="fa fa-check"></i><b>6.2.3</b> Adding categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lin-t-2.html"><a href="lin-t-2.html#returning-to-our-research-question"><i class="fa fa-check"></i><b>6.3</b> Returning to our research question</a></li>
<li class="chapter" data-level="6.4" data-path="lin-t-2.html"><a href="lin-t-2.html#adressing-the-uncertainty"><i class="fa fa-check"></i><b>6.4</b> Adressing the uncertainty</a></li>
<li class="chapter" data-level="6.5" data-path="lin-t-2.html"><a href="lin-t-2.html#moving-on-2"><i class="fa fa-check"></i><b>6.5</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lin-t-3.html"><a href="lin-t-3.html"><i class="fa fa-check"></i><b>7</b> Linear Regression - Theory III: Diagnostics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lin-t-3.html"><a href="lin-t-3.html#objectives-4"><i class="fa fa-check"></i><b>7.1</b> Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="lin-t-3.html"><a href="lin-t-3.html#model-fit"><i class="fa fa-check"></i><b>7.2</b> Model fit</a></li>
<li class="chapter" data-level="7.3" data-path="lin-t-3.html"><a href="lin-t-3.html#regression-diagnostics"><i class="fa fa-check"></i><b>7.3</b> Regression diagnostics</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="lin-t-3.html"><a href="lin-t-3.html#linearity"><i class="fa fa-check"></i><b>7.3.1</b> Linearity</a></li>
<li class="chapter" data-level="7.3.2" data-path="lin-t-3.html"><a href="lin-t-3.html#normally-distributed-residuals"><i class="fa fa-check"></i><b>7.3.2</b> Normally distributed residuals</a></li>
<li class="chapter" data-level="7.3.3" data-path="lin-t-3.html"><a href="lin-t-3.html#homoscedasticity"><i class="fa fa-check"></i><b>7.3.3</b> Homoscedasticity</a></li>
<li class="chapter" data-level="7.3.4" data-path="lin-t-3.html"><a href="lin-t-3.html#no-overly-influential-data-points"><i class="fa fa-check"></i><b>7.3.4</b> No overly influential data points</a></li>
<li class="chapter" data-level="7.3.5" data-path="lin-t-3.html"><a href="lin-t-3.html#no-multicollinearity"><i class="fa fa-check"></i><b>7.3.5</b> No (multi)collinearity</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="lin-t-3.html"><a href="lin-t-3.html#returning-to-our-research-question-1"><i class="fa fa-check"></i><b>7.4</b> Returning to our research question</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="lin-t-3.html"><a href="lin-t-3.html#interactions"><i class="fa fa-check"></i><b>7.4.1</b> Interactions</a></li>
<li class="chapter" data-level="7.4.2" data-path="lin-t-3.html"><a href="lin-t-3.html#regression-diagnostics-revisited"><i class="fa fa-check"></i><b>7.4.2</b> Regression diagnostics (revisited)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="lin-t-3.html"><a href="lin-t-3.html#conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
<li class="chapter" data-level="7.6" data-path="lin-t-3.html"><a href="lin-t-3.html#resources-1"><i class="fa fa-check"></i><b>7.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lin-a.html"><a href="lin-a.html"><i class="fa fa-check"></i><b>8</b> Linear Regression - Application</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lin-a.html"><a href="lin-a.html#objectives-5"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="lin-a.html"><a href="lin-a.html#r-functions-covered-this-week-1"><i class="fa fa-check"></i><b>8.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="8.3" data-path="lin-a.html"><a href="lin-a.html#research-question"><i class="fa fa-check"></i><b>8.3</b> Research question</a></li>
<li class="chapter" data-level="8.4" data-path="lin-a.html"><a href="lin-a.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.4</b> Simple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="lin-a.html"><a href="lin-a.html#interpretation"><i class="fa fa-check"></i><b>8.4.1</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lin-a.html"><a href="lin-a.html#multiple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.5</b> Multiple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="lin-a.html"><a href="lin-a.html#interpretation-1"><i class="fa fa-check"></i><b>8.5.1</b> Interpretation</a></li>
<li class="chapter" data-level="8.5.2" data-path="lin-a.html"><a href="lin-a.html#sidenote-adding-interactions"><i class="fa fa-check"></i><b>8.5.2</b> Sidenote: Adding interactions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lin-a.html"><a href="lin-a.html#regression-diagnostics-1"><i class="fa fa-check"></i><b>8.6</b> Regression Diagnostics</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="lin-a.html"><a href="lin-a.html#skewed-outcome-variable"><i class="fa fa-check"></i><b>8.6.1</b> Skewed outcome variable</a></li>
<li class="chapter" data-level="8.6.2" data-path="lin-a.html"><a href="lin-a.html#non-linearity"><i class="fa fa-check"></i><b>8.6.2</b> Non-linearity</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="lin-a.html"><a href="lin-a.html#returning-to-our-research-question-2"><i class="fa fa-check"></i><b>8.7</b> Returning to our research question</a></li>
<li class="chapter" data-level="8.8" data-path="lin-a.html"><a href="lin-a.html#moving-on-3"><i class="fa fa-check"></i><b>8.8</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lin-e.html"><a href="lin-e.html"><i class="fa fa-check"></i><b>9</b> Linear Regression - Exercise</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lin-e.html"><a href="lin-e.html#linear-regression---exercise"><i class="fa fa-check"></i><b>9.1</b> Linear Regression - Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pm-t.html"><a href="pm-t.html"><i class="fa fa-check"></i><b>10</b> Prediction</a>
<ul>
<li class="chapter" data-level="10.1" data-path="pm-t.html"><a href="pm-t.html#objectives-6"><i class="fa fa-check"></i><b>10.1</b> Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="pm-t.html"><a href="pm-t.html#r-functions-covered-this-week-2"><i class="fa fa-check"></i><b>10.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="10.3" data-path="pm-t.html"><a href="pm-t.html#how-prediction-works"><i class="fa fa-check"></i><b>10.3</b> How prediction works</a></li>
<li class="chapter" data-level="10.4" data-path="pm-t.html"><a href="pm-t.html#further-resources-2"><i class="fa fa-check"></i><b>10.4</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ml.html"><a href="ml.html"><i class="fa fa-check"></i><b>11</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ml.html"><a href="ml.html#objectives-7"><i class="fa fa-check"></i><b>11.1</b> Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="ml.html"><a href="ml.html#r-functions-covered-this-week-3"><i class="fa fa-check"></i><b>11.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="11.3" data-path="ml.html"><a href="ml.html#intro-to-machine-learning"><i class="fa fa-check"></i><b>11.3</b> Intro to Machine learning</a></li>
<li class="chapter" data-level="11.4" data-path="ml.html"><a href="ml.html#further-resources-3"><i class="fa fa-check"></i><b>11.4</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="pm-a.html"><a href="pm-a.html"><i class="fa fa-check"></i><b>12</b> Prediction - Exercise</a>
<ul>
<li class="chapter" data-level="12.1" data-path="pm-a.html"><a href="pm-a.html#exercises"><i class="fa fa-check"></i><b>12.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="log-est.html"><a href="log-est.html"><i class="fa fa-check"></i><b>13</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="log-est.html"><a href="log-est.html#objectives-8"><i class="fa fa-check"></i><b>13.1</b> Objectives</a></li>
<li class="chapter" data-level="13.2" data-path="log-est.html"><a href="log-est.html#functions-covered-in-this-week"><i class="fa fa-check"></i><b>13.2</b> Functions covered in this week</a></li>
<li class="chapter" data-level="13.3" data-path="log-est.html"><a href="log-est.html#basic-concepts"><i class="fa fa-check"></i><b>13.3</b> Basic concepts</a></li>
<li class="chapter" data-level="13.4" data-path="log-est.html"><a href="log-est.html#application"><i class="fa fa-check"></i><b>13.4</b> Application</a></li>
<li class="chapter" data-level="13.5" data-path="log-est.html"><a href="log-est.html#interpretation-2"><i class="fa fa-check"></i><b>13.5</b> Interpretation</a></li>
<li class="chapter" data-level="13.6" data-path="log-est.html"><a href="log-est.html#model-fit-1"><i class="fa fa-check"></i><b>13.6</b> Model fit</a></li>
<li class="chapter" data-level="13.7" data-path="log-est.html"><a href="log-est.html#diagnostics"><i class="fa fa-check"></i><b>13.7</b> Diagnostics</a></li>
<li class="chapter" data-level="13.8" data-path="log-est.html"><a href="log-est.html#prediction"><i class="fa fa-check"></i><b>13.8</b> Prediction</a></li>
<li class="chapter" data-level="13.9" data-path="log-est.html"><a href="log-est.html#mediation-1"><i class="fa fa-check"></i><b>13.9</b> Mediation</a></li>
<li class="chapter" data-level="13.10" data-path="log-est.html"><a href="log-est.html#comparing-linear-and-logistic-regression"><i class="fa fa-check"></i><b>13.10</b> Comparing linear and logistic regression</a></li>
<li class="chapter" data-level="13.11" data-path="log-est.html"><a href="log-est.html#logistic-regression-in-machine-learning-context"><i class="fa fa-check"></i><b>13.11</b> Logistic regression in Machine Learning context</a></li>
<li class="chapter" data-level="13.12" data-path="log-est.html"><a href="log-est.html#further-resources-4"><i class="fa fa-check"></i><b>13.12</b> Further resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis with R for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pm-t" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number"> 10</span> Prediction<a href="pm-t.html#pm-t" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>Still WIP!</strong></p>
<p>In prior weeks, you learned how to build a linear regression model. The main interest
we pursued so far was to arrive at a good estimate of one independent variable (points scored in NBA basketball league) on an outcome (salary of NBA players).</p>
<div id="objectives-6" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Objectives<a href="pm-t.html#objectives-6" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="objectives">
<ul>
<li>here to be filled</li>
</ul>
</div>
</div>
<div id="r-functions-covered-this-week-2" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> R functions covered this week<a href="pm-t.html#r-functions-covered-this-week-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="functions">
<ul>
<li><code>lm()</code> : This function is used to fit a linear model to the data. It takes a formula that specifies the dependent and independent variables, and a data frame that contains the variables. It returns a model object that can be used for further analysis.</li>
<li><code>predict()</code> : This function is used to make predictions from a fitted model object. It takes a model object and a new data frame that contains the values of the independent variables for which predictions are desired. It returns a vector of predicted values for the dependent variable.</li>
<li><code>sqrt()</code> : This function is used to compute the square root of a numeric vector. It can be used to calculate the root mean squared error (RMSE) as a measure of prediction accuracy.</li>
<li><code>mean()</code> : This function is used to compute the arithmetic mean of a numeric vector. It can be used to calculate the mean squared error (MSE) as a measure of prediction error.</li>
<li><code>createDataPartition()</code> : This function is from the <strong>caret</strong> package. It is used to create a random split of the data into training and testing sets. It takes a vector of outcomes, a proportion of data to be assigned to the training set, and an option to return a list or not. It returns a vector or list of indices for the training set.</li>
<li><code>train()</code> : This function is from the <strong>caret</strong> package. It is used to train a predictive model using different methods and tuning parameters. It takes a formula that specifies the dependent and independent variables, a data frame that contains the training data, a method that specifies the type of model, and a train control object that specifies how to train the model. It returns a model object that can be used for prediction and evaluation.</li>
<li><code>trainControl()</code> : This function is from the <strong>caret</strong> package. It is used to create a train control object that controls how the model is trained. It takes various arguments that specify the resampling method, the number of resamples, the selection metric, etc. It returns a train control object that can be passed to <code>train()</code>.</li>
<li><code>glance()</code> : This function is from the <strong>broom</strong> package. It is used to get a summary of a model object, such as the R-squared, adjusted R-squared, RMSE, p-value, etc. It takes a model object and returns a tibble with one row per model and one column per statistic.</li>
<li><code>augment()</code> : This function is from the <strong>broom</strong> package. It is used to add columns with predictions, residuals, and other information to the original data frame. It takes a model object and an optional new data frame for prediction. It returns a tibble with one row per observation and one column per variable or statistic.</li>
<li><code>ggplot()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create a wide variety of static, dynamic, and interactive graphics in R. The function allows you to specify a mapping from data to aesthetics (color, shape, size) and geometric objects (points, lines, bars). It also allows you to add statistical transformations, coordinate systems, faceting, and themes.</li>
<li><code>geom_point()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create scatter plots in R. It takes a mapping from data to aesthetics and other arguments that control the appearance of the points, such as shape, size, color, alpha, etc. It returns a layer that can be added to a ggplot object.</li>
<li><code>geom_smooth()</code> : This function is from the <strong>ggplot2</strong> package. It is used to add a smoothed conditional mean or regression line to a plot. It takes a mapping from data to aesthetics and other arguments that control the appearance of the line or curve, such as method, formula, color, linetype, etc. It returns a layer that can be added to a ggplot object.</li>
<li><code>geom_line()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create line charts in R. It takes a mapping from data to aesthetics and other arguments that control the appearance of the lines, such as color, line-type, size, alpha, etc. It returns a layer that can be added to a ggplot object.</li>
<li><code>geom_ribbon()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create shaded regions between two y-values in R. It takes a mapping from data to aesthetics and other arguments that control the appearance of the ribbon, such as fill color, alpha value, line-type etc. It returns a layer that can be added to a ggplot object.</li>
<li><code>library()</code> : This function is used to load an installed package into R session so that its functions can be used. It takes one or more package names as arguments and loads them into memory.</li>
</ul>
</div>
<p>With the help of DAGs, we identified relevant “confounders” we should adjust for to “isolate’ the effect of points as much as possible and reduce bias. COnfounders enter as covariates in in the model.</p>
<p>With the help of mediation analysis, we were then interested what “explains” or “mediates” the effect of x on y. We use additional variables which we assume operate as mechanisms of the causal effect of x on y and we test how much of the effect of x and y can be attributed to this mediator. In our example, we found that points scored do not really explain why guards earn less money in the NBA compared to centers.</p>
<p>All what we have done so far can be considered part of causal inference, i.e.
understanding why an outcome varies. A different perspective is the perspective of PREDICTION.Prediction is at the heart of approaches in “data science” and “machine learning”.</p>
<p>In this scenario, we build regression models (or other models) simply to predict and outcome. The main interest is not to learn more about how the outcome can be explained but to predict something with it which we want to know. Machine learning then takes it a step further and simply iteratively select the best models among hundreds of options to arrive at the best possible prediction (more on that at the end of the class). First, we will learn how to predict values based on a linear regression model.</p>
</div>
<div id="how-prediction-works" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> How prediction works<a href="pm-t.html#how-prediction-works" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For a linear regression model, prediction is very straight forward. Linear regression is all about finding a straight line through a cloud of points that lie on as many dimensions as there are variables in model. The model provides you with an intercept (i.e. where the line touches the Y-Axis, and a slope; the increase in y given one unit increase in x. The unit is whatever the scale of the x variable is). The formula is <span class="math inline">\(y= b + ßx + €\)</span>. Any prediction is the on the line. You know the intercept, you plug in a value for x and you get your predicted y.</p>
<p>-&gt; visual here.</p>
<p>Let’s apply this logic to our NBA data. Remember in prior weeks, we built a linear model to estimate the effect of points scored on average per game and salaries of players. Let’s assume we now want to predict salaries of players and don’t care too much about the scores. We can consider a range of variables which we think explain variation in salaries. The better we can capture variation in salaries between players, the more precise our prediction will be.</p>
<p>Now, you may rightfully ask: “Why do we want to predict salaries if we already know the actual salaries!?” Fair point. Prediction is commonly used to predict values which we don’t have. Imagine there are some players that don’t report their salaries. We could predict their salaries based on what we know from players who are similar to them in many other observable characteristics. Or imagine we want to predict the salary of a hypothetical player that does not exist. Imagine an average players would like to know how much he could earn more if player more like other players. We can predict that. Last example, imagine we want to forecast how much a player makes next year, depending on his past performance.</p>
<p>Machine learning is basically predicting outcomes that are no known based on very large datasets. You provide R with a million photos of animals, you build a model to explain which animal is a cat. The you apply the model to new data and the model predicts whether there is a cat in the photo. Of course, machine learning gets much more complicated quickly, however, the basic logic is the logic of prediction.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="pm-t.html#cb123-1" tabindex="-1"></a><span class="co"># recode &quot;position&quot; variables&quot;</span></span>
<span id="cb123-2"><a href="pm-t.html#cb123-2" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb123-3"><a href="pm-t.html#cb123-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">position_num =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;position_center&quot;</span>, <span class="st">&quot;position_pf&quot;</span>, <span class="st">&quot;position_sf&quot;</span>,</span>
<span id="cb123-4"><a href="pm-t.html#cb123-4" tabindex="-1"></a>                                         <span class="st">&quot;position_pg&quot;</span>, <span class="st">&quot;position_sg&quot;</span>))),</span>
<span id="cb123-5"><a href="pm-t.html#cb123-5" tabindex="-1"></a>         <span class="at">position_rec =</span> </span>
<span id="cb123-6"><a href="pm-t.html#cb123-6" tabindex="-1"></a>           <span class="fu">case_when</span>(</span>
<span id="cb123-7"><a href="pm-t.html#cb123-7" tabindex="-1"></a>             position_center<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb123-8"><a href="pm-t.html#cb123-8" tabindex="-1"></a>             position_pf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb123-9"><a href="pm-t.html#cb123-9" tabindex="-1"></a>             position_sf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb123-10"><a href="pm-t.html#cb123-10" tabindex="-1"></a>             position_pg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb123-11"><a href="pm-t.html#cb123-11" tabindex="-1"></a>             position_sg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb123-12"><a href="pm-t.html#cb123-12" tabindex="-1"></a>             position_sg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_pg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb123-13"><a href="pm-t.html#cb123-13" tabindex="-1"></a>             position_pf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_sf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb123-14"><a href="pm-t.html#cb123-14" tabindex="-1"></a>             <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Mixed&quot;</span>))</span>
<span id="cb123-15"><a href="pm-t.html#cb123-15" tabindex="-1"></a></span>
<span id="cb123-16"><a href="pm-t.html#cb123-16" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS <span class="sc">+</span> position_rec <span class="sc">+</span> season_start <span class="sc">+</span></span>
<span id="cb123-17"><a href="pm-t.html#cb123-17" tabindex="-1"></a>             age, <span class="at">data =</span> data_nba)</span>
<span id="cb123-18"><a href="pm-t.html#cb123-18" tabindex="-1"></a></span>
<span id="cb123-19"><a href="pm-t.html#cb123-19" tabindex="-1"></a><span class="co"># base R way to get predicted values</span></span>
<span id="cb123-20"><a href="pm-t.html#cb123-20" tabindex="-1"></a>data_nba<span class="sc">$</span>predicted_values <span class="ot">&lt;-</span> model1<span class="sc">$</span>fitted.values</span>
<span id="cb123-21"><a href="pm-t.html#cb123-21" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">&#39;id&#39;</span>, name, salary, predicted_values, <span class="fu">everything</span>())</span>
<span id="cb123-22"><a href="pm-t.html#cb123-22" tabindex="-1"></a></span>
<span id="cb123-23"><a href="pm-t.html#cb123-23" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb123-24"><a href="pm-t.html#cb123-24" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>salary, <span class="at">y=</span>predicted_values)) <span class="sc">+</span></span>
<span id="cb123-25"><a href="pm-t.html#cb123-25" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb123-26"><a href="pm-t.html#cb123-26" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;loess&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_0-1.png" width="672" /></p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="pm-t.html#cb124-1" tabindex="-1"></a><span class="co"># new tidyverse way to get predicted values</span></span>
<span id="cb124-2"><a href="pm-t.html#cb124-2" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb124-3"><a href="pm-t.html#cb124-3" tabindex="-1"></a></span>
<span id="cb124-4"><a href="pm-t.html#cb124-4" tabindex="-1"></a><span class="co"># broom package has nice features to work with models</span></span>
<span id="cb124-5"><a href="pm-t.html#cb124-5" tabindex="-1"></a></span>
<span id="cb124-6"><a href="pm-t.html#cb124-6" tabindex="-1"></a><span class="co"># tidy() converts the model output into a dataframe, makes it easy to process further, e.g. make graphs etc.</span></span>
<span id="cb124-7"><a href="pm-t.html#cb124-7" tabindex="-1"></a><span class="fu">tidy</span>(model1)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 5
##   term                   estimate std.error statistic  p.value
##   &lt;chr&gt;                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)         -249332849. 12481898.    -20.0  4.94e-87
## 2 career_PTS              535519.     7339.     73.0  0       
## 3 position_recForward   -1427352.   128521.    -11.1  1.74e-28
## 4 position_recGuard     -2087971.   122372.    -17.1  2.43e-64
## 5 position_recMixed     -1018362.   121431.     -8.39 5.71e-17
## 6 season_start            122253.     6210.     19.7  1.23e-84
## 7 age                     167093.     8251.     20.3  2.33e-89</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="pm-t.html#cb126-1" tabindex="-1"></a><span class="co"># glance provides meta-level info like r-squared etc.</span></span>
<span id="cb126-2"><a href="pm-t.html#cb126-2" tabindex="-1"></a><span class="fu">glance</span>(model1)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squared    sigma statistic p.value    df  logLik    AIC    BIC
##       &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.424         0.424 3545558.     1192.       0     6 -1.61e5 3.21e5 3.21e5
## # ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="pm-t.html#cb128-1" tabindex="-1"></a><span class="co"># augment creates a dataframe with the predicted values for everyobservation in the dataframe. </span></span>
<span id="cb128-2"><a href="pm-t.html#cb128-2" tabindex="-1"></a></span>
<span id="cb128-3"><a href="pm-t.html#cb128-3" tabindex="-1"></a>nba_salalary_predicted <span class="ot">&lt;-</span> <span class="fu">augment</span>(model1)</span></code></pre></div>
<p>The output above, get you the predicted values for the observations in the dataset. This is mostly used to evaluate the model itself. The bigger the difference between the predicted values and the actual values (so-called residuals), the worse the model.</p>
<p>Now, let’s predict the salary of hypothetical players:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="pm-t.html#cb129-1" tabindex="-1"></a><span class="fu">table</span>(data_nba<span class="sc">$</span>position_rec)</span></code></pre></div>
<pre><code>## 
##  center Forward   Guard   Mixed 
##    1204    2130    3051    3343</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="pm-t.html#cb131-1" tabindex="-1"></a><span class="co"># create all combination of the control variables which you want to predict</span></span>
<span id="cb131-2"><a href="pm-t.html#cb131-2" tabindex="-1"></a>prediction.data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb131-3"><a href="pm-t.html#cb131-3" tabindex="-1"></a>  <span class="at">position_rec =</span> <span class="fu">c</span>(<span class="st">&quot;center&quot;</span>, <span class="st">&quot;center&quot;</span>, <span class="st">&quot;Guard&quot;</span>, <span class="st">&quot;Guard&quot;</span>),</span>
<span id="cb131-4"><a href="pm-t.html#cb131-4" tabindex="-1"></a>  <span class="at">career_PTS =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">14</span>, <span class="dv">10</span>, <span class="dv">14</span>),</span>
<span id="cb131-5"><a href="pm-t.html#cb131-5" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb131-6"><a href="pm-t.html#cb131-6" tabindex="-1"></a>  <span class="at">season_start =</span> <span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2017&quot;</span>))</span>
<span id="cb131-7"><a href="pm-t.html#cb131-7" tabindex="-1"></a>)</span>
<span id="cb131-8"><a href="pm-t.html#cb131-8" tabindex="-1"></a></span>
<span id="cb131-9"><a href="pm-t.html#cb131-9" tabindex="-1"></a><span class="co"># apply the model to the &quot;new&quot; dataset</span></span>
<span id="cb131-10"><a href="pm-t.html#cb131-10" tabindex="-1"></a><span class="fu">predict</span>(model1, </span>
<span id="cb131-11"><a href="pm-t.html#cb131-11" tabindex="-1"></a>        prediction.data)</span></code></pre></div>
<pre><code>##       1       2       3       4 
## 5948066 8090141 3860094 6002170</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="pm-t.html#cb133-1" tabindex="-1"></a>prediction.data<span class="sc">$</span>predicted_values <span class="ot">&lt;-</span> <span class="fu">predict</span>(model1, </span>
<span id="cb133-2"><a href="pm-t.html#cb133-2" tabindex="-1"></a>        prediction.data)</span>
<span id="cb133-3"><a href="pm-t.html#cb133-3" tabindex="-1"></a></span>
<span id="cb133-4"><a href="pm-t.html#cb133-4" tabindex="-1"></a>prediction.data <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb133-5"><a href="pm-t.html#cb133-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(position_rec, predicted_values,</span>
<span id="cb133-6"><a href="pm-t.html#cb133-6" tabindex="-1"></a>                 <span class="at">color=</span>career_PTS,</span>
<span id="cb133-7"><a href="pm-t.html#cb133-7" tabindex="-1"></a>                 <span class="at">size=</span><span class="dv">12</span>)) <span class="sc">+</span></span>
<span id="cb133-8"><a href="pm-t.html#cb133-8" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb133-9"><a href="pm-t.html#cb133-9" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_1-1.png" width="672" /></p>
<p>We can see that there is a huge salary increase predicted for just making two more baskets (i.e. 4 points) on average each game, for both guards and centers. We also see that centers make more money generally.</p>
<p>There is another way to get predicted values using the <code>margins()</code> function.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="pm-t.html#cb134-1" tabindex="-1"></a><span class="fu">library</span>(margins)</span>
<span id="cb134-2"><a href="pm-t.html#cb134-2" tabindex="-1"></a><span class="co"># This gets you the average change in predicted value for a unit-increase in the all model variables.</span></span>
<span id="cb134-3"><a href="pm-t.html#cb134-3" tabindex="-1"></a><span class="fu">margins</span>(model1)</span></code></pre></div>
<pre><code>##  career_PTS season_start    age position_recForward position_recGuard
##      535519       122253 167093            -1427352          -2087971
##  position_recMixed
##           -1018362</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="pm-t.html#cb136-1" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">margins</span>(model1, <span class="at">at=</span> <span class="fu">list</span>(<span class="at">position_rec=</span> <span class="fu">c</span>(<span class="st">&quot;Guard&quot;</span>, <span class="st">&quot;center&quot;</span>),</span>
<span id="cb136-2"><a href="pm-t.html#cb136-2" tabindex="-1"></a>                         <span class="at">career_PTS=</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">14</span>))))</span></code></pre></div>
<pre><code>##              factor position_rec career_PTS          AME          SE       z
##                 age       1.0000    10.0000  167093.1892   7741.6172 21.5838
##                 age       1.0000    14.0000  167093.1892   7840.0683 21.3127
##                 age       2.0000    10.0000  167093.1892   7842.4696 21.3062
##                 age       2.0000    14.0000  167093.1892   8000.9518 20.8842
##          career_PTS       1.0000    10.0000  535518.9282      0.0000     Inf
##          career_PTS       1.0000    14.0000  535518.9282      0.0000     Inf
##          career_PTS       2.0000    10.0000  535518.9282      0.0000     Inf
##          career_PTS       2.0000    14.0000  535518.9282      0.0000     Inf
##  position_reccenter       1.0000    10.0000 2087971.3723 109409.2415 19.0840
##  position_reccenter       1.0000    14.0000 2087971.3723 109409.2415 19.0840
##  position_reccenter       2.0000    10.0000 2087971.3723 109409.2415 19.0840
##  position_reccenter       2.0000    14.0000 2087971.3723 109409.2415 19.0840
##        season_start       1.0000    10.0000  122252.7820   6263.2564 19.5190
##        season_start       1.0000    14.0000  122252.7820   6263.2564 19.5190
##        season_start       2.0000    10.0000  122252.7820   6263.2564 19.5190
##        season_start       2.0000    14.0000  122252.7820   6263.2564 19.5190
##       p        lower        upper
##  0.0000  151919.8982  182266.4801
##  0.0000  151726.9376  182459.4407
##  0.0000  151722.2313  182464.1471
##  0.0000  151411.6118  182774.7666
##  0.0000  535518.9282  535518.9282
##  0.0000  535518.9282  535518.9282
##  0.0000  535518.9282  535518.9282
##  0.0000  535518.9282  535518.9282
##  0.0000 1873533.1994 2302409.5452
##  0.0000 1873533.1994 2302409.5452
##  0.0000 1873533.1994 2302409.5452
##  0.0000 1873533.1994 2302409.5452
##  0.0000  109977.0250  134528.5390
##  0.0000  109977.0250  134528.5390
##  0.0000  109977.0250  134528.5390
##  0.0000  109977.0250  134528.5390</code></pre>
<p>The margins function is handy to calculate predictions for different groups.
It automatically can hold other control variables at their mean or at their observed value.</p>
<p>Now, let’s also calculate confidence and prediction intervals. For background, watch these short videos to understand what they are [hyperlink] [hyperlink]. Confidence intervals basically tell how the following: “If we repeated our study on a different sample of people with the same sample size, then the estimate which we have (for example, a mean) would we within the confidence interval 95% of the time. This means in 5% of cases, our study would arrive at a lower or higher mean. The formula for confidence is not very intuitive:</p>
<p>-&gt; formulate here: Margin of error = z * (standard deviation/ square-root of sample size)</p>
<p>Let’s not worry about why this formula works, but let’s focus on its ingredients: Sample size (N) is the number of people in our data; Standard Deviation is a measure for how much individual people deviate from the mean on average, in other words, how much the data spreads around the mean. and z is 1.96 and is derived from probability theory (i.e. in a normal distribution, there is a certain known likelihood that means fall within a range when re-sampling populations). In other words, the confidence intervals tells us how “confident” we can be that our estimate is within the range 95% of times.</p>
<p>Prediction intervals are very similar but only apply to predictions for specfific values. It gives us a measure for “confident” we can be that our prediction would be within the prediction interval (95% of times).</p>
<p>The 95% is an arbitrarily set value which is a standard in research. However, we can also set it at 99% or 90%.</p>
<p>Let’s apply this to our data.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="pm-t.html#cb138-1" tabindex="-1"></a><span class="co"># Just for illustration, let&#39;s take a simple model</span></span>
<span id="cb138-2"><a href="pm-t.html#cb138-2" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS, <span class="at">data =</span> data_nba)</span>
<span id="cb138-3"><a href="pm-t.html#cb138-3" tabindex="-1"></a>preds <span class="ot">&lt;-</span> <span class="fu">predict</span>(model2)</span>
<span id="cb138-4"><a href="pm-t.html#cb138-4" tabindex="-1"></a>preds[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code></pre></div>
<pre><code>##       1       2       3       4       5       6       7       8       9      10 
## 7219593 3460261 3460261 3460261 3460261 3460261 3460261 3460261 3460261 3460261</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="pm-t.html#cb140-1" tabindex="-1"></a><span class="co"># using geom_smooth, method=lm will automatically plot the confidence intervals</span></span>
<span id="cb140-2"><a href="pm-t.html#cb140-2" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb140-3"><a href="pm-t.html#cb140-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>salary, <span class="at">y=</span>career_PTS)) <span class="sc">+</span></span>
<span id="cb140-4"><a href="pm-t.html#cb140-4" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb140-5"><a href="pm-t.html#cb140-5" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_3-1.png" width="672" /></p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="pm-t.html#cb141-1" tabindex="-1"></a><span class="co"># let&#39;s get prediction intervals and add them to our dataset</span></span>
<span id="cb141-2"><a href="pm-t.html#cb141-2" tabindex="-1"></a>data_nba_predict <span class="ot">&lt;-</span> <span class="fu">cbind</span>(data_nba, <span class="fu">predict</span>(model2, <span class="at">interval =</span> <span class="fu">c</span>(<span class="st">&quot;prediction&quot;</span>)))</span>
<span id="cb141-3"><a href="pm-t.html#cb141-3" tabindex="-1"></a></span>
<span id="cb141-4"><a href="pm-t.html#cb141-4" tabindex="-1"></a>data_nba_predict <span class="sc">%&gt;%</span></span>
<span id="cb141-5"><a href="pm-t.html#cb141-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span> career_PTS, <span class="at">y=</span>salary)) <span class="sc">+</span></span>
<span id="cb141-6"><a href="pm-t.html#cb141-6" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb141-7"><a href="pm-t.html#cb141-7" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS, <span class="at">y=</span>fit),</span>
<span id="cb141-8"><a href="pm-t.html#cb141-8" tabindex="-1"></a>            <span class="at">col=</span><span class="st">&quot;blue&quot;</span>) <span class="sc">+</span></span>
<span id="cb141-9"><a href="pm-t.html#cb141-9" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>lwr),</span>
<span id="cb141-10"><a href="pm-t.html#cb141-10" tabindex="-1"></a>                <span class="at">col=</span><span class="st">&quot;blue&quot;</span>,</span>
<span id="cb141-11"><a href="pm-t.html#cb141-11" tabindex="-1"></a>                <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb141-12"><a href="pm-t.html#cb141-12" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>upr),</span>
<span id="cb141-13"><a href="pm-t.html#cb141-13" tabindex="-1"></a>                <span class="at">col=</span><span class="st">&quot;blue&quot;</span>,</span>
<span id="cb141-14"><a href="pm-t.html#cb141-14" tabindex="-1"></a>                <span class="at">linetype=</span><span class="st">&quot;dashed&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_3-2.png" width="672" /></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="pm-t.html#cb142-1" tabindex="-1"></a><span class="co"># same using geom_ribbon</span></span>
<span id="cb142-2"><a href="pm-t.html#cb142-2" tabindex="-1"></a>data_nba_predict <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="pm-t.html#cb142-3" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS,<span class="at">y=</span>salary))<span class="sc">+</span></span>
<span id="cb142-4"><a href="pm-t.html#cb142-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb142-5"><a href="pm-t.html#cb142-5" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS,<span class="at">y=</span>fit))<span class="sc">+</span></span>
<span id="cb142-6"><a href="pm-t.html#cb142-6" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymax=</span>upr,<span class="at">ymin=</span>lwr),<span class="at">color=</span><span class="st">&quot;red&quot;</span>,<span class="at">alpha=</span><span class="fl">0.7</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_3-3.png" width="672" /></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="pm-t.html#cb143-1" tabindex="-1"></a><span class="do">## do this with tidy approach</span></span>
<span id="cb143-2"><a href="pm-t.html#cb143-2" tabindex="-1"></a></span>
<span id="cb143-3"><a href="pm-t.html#cb143-3" tabindex="-1"></a><span class="co"># get confidnce interval for estimate</span></span>
<span id="cb143-4"><a href="pm-t.html#cb143-4" tabindex="-1"></a><span class="fu">tidy</span>(model2, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 7
##   term        estimate std.error statistic  p.value  conf.low conf.high
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 (Intercept) -851914.    76417.     -11.1 1.09e-28 -1001708.  -702121.
## 2 career_PTS   552843.     7453.      74.2 0          538233.   567453.</code></pre>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="pm-t.html#cb145-1" tabindex="-1"></a><span class="co"># get predictive intervals</span></span>
<span id="cb145-2"><a href="pm-t.html#cb145-2" tabindex="-1"></a><span class="fu">augment</span>(model2, <span class="at">interval=</span> <span class="st">&quot;prediction&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="pm-t.html#cb145-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS,<span class="at">y=</span>salary))<span class="sc">+</span></span>
<span id="cb145-4"><a href="pm-t.html#cb145-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb145-5"><a href="pm-t.html#cb145-5" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS,<span class="at">y=</span>.fitted))<span class="sc">+</span></span>
<span id="cb145-6"><a href="pm-t.html#cb145-6" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymax=</span>.upper,<span class="at">ymin=</span>.lower),<span class="at">color=</span><span class="st">&quot;red&quot;</span>,<span class="at">alpha=</span><span class="fl">0.7</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_3-4.png" width="672" /></p>
<p>Now, let’s compare the prediction interval for 2 different models.To compare the performance of models, you can use the r-squared (which measures how much of the variation in the outcome can be explained by your set of independent variables) and the mean squared error. For more background on both measures see <a href="https://vitalflux.com/mean-square-error-r-squared-which-one-to-use/">here</a></p>
<p>The Mean squared error (MSE) represents the error of the estimator or predictive model created based on the given set of observations in the sample. It measures the average squared difference between the predicted values and the actual values, quantifying the discrepancy between the model’s predictions and the true observations. The lower the <code>MSE</code>, the better the model predictive accuracy, and, the better the regression model is.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="pm-t.html#cb146-1" tabindex="-1"></a>model1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS <span class="sc">+</span> position_rec <span class="sc">+</span> season_start <span class="sc">+</span></span>
<span id="cb146-2"><a href="pm-t.html#cb146-2" tabindex="-1"></a>             age, <span class="at">data =</span> data_nba)</span>
<span id="cb146-3"><a href="pm-t.html#cb146-3" tabindex="-1"></a>model2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS, <span class="at">data =</span> data_nba)</span>
<span id="cb146-4"><a href="pm-t.html#cb146-4" tabindex="-1"></a></span>
<span id="cb146-5"><a href="pm-t.html#cb146-5" tabindex="-1"></a><span class="co"># compared R-squared/ adjusted R-squared</span></span>
<span id="cb146-6"><a href="pm-t.html#cb146-6" tabindex="-1"></a><span class="fu">glance</span>(model1)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squared    sigma statistic p.value    df  logLik    AIC    BIC
##       &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.424         0.424 3545558.     1192.       0     6 -1.61e5 3.21e5 3.21e5
## # ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="pm-t.html#cb148-1" tabindex="-1"></a><span class="fu">glance</span>(model2)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squared    sigma statistic p.value    df  logLik    AIC    BIC
##       &lt;dbl&gt;         &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     0.361         0.361 3732168.     5502.       0     1 -1.61e5 3.22e5 3.22e5
## # ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="pm-t.html#cb150-1" tabindex="-1"></a><span class="co"># compare prediction intervals</span></span>
<span id="cb150-2"><a href="pm-t.html#cb150-2" tabindex="-1"></a>model1_predicted <span class="ot">&lt;-</span> <span class="fu">augment</span>(model1, <span class="at">interval =</span> <span class="st">&quot;prediction&quot;</span>)</span>
<span id="cb150-3"><a href="pm-t.html#cb150-3" tabindex="-1"></a>model2_predicted <span class="ot">&lt;-</span> <span class="fu">augment</span>(model2, <span class="at">interval =</span> <span class="st">&quot;prediction&quot;</span>)</span>
<span id="cb150-4"><a href="pm-t.html#cb150-4" tabindex="-1"></a></span>
<span id="cb150-5"><a href="pm-t.html#cb150-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>career_PTS,<span class="at">y=</span>salary), <span class="at">data =</span> model1_predicted)<span class="sc">+</span></span>
<span id="cb150-6"><a href="pm-t.html#cb150-6" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb150-7"><a href="pm-t.html#cb150-7" tabindex="-1"></a>  <span class="co"># geom_line(aes(x=career_pts,y=.fitted),</span></span>
<span id="cb150-8"><a href="pm-t.html#cb150-8" tabindex="-1"></a>  <span class="co">#           color =&quot;red&quot;, data = model1_predicted) +</span></span>
<span id="cb150-9"><a href="pm-t.html#cb150-9" tabindex="-1"></a>  <span class="co"># geom_line(aes(x=career_pts,y=.fitted),</span></span>
<span id="cb150-10"><a href="pm-t.html#cb150-10" tabindex="-1"></a>  <span class="co">#          color =&quot;blue&quot;, data = model2_predicted) +</span></span>
<span id="cb150-11"><a href="pm-t.html#cb150-11" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymax=</span>.upper,<span class="at">ymin=</span>.lower),</span>
<span id="cb150-12"><a href="pm-t.html#cb150-12" tabindex="-1"></a>              <span class="at">color=</span><span class="st">&quot;red&quot;</span>,</span>
<span id="cb150-13"><a href="pm-t.html#cb150-13" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.7</span>,</span>
<span id="cb150-14"><a href="pm-t.html#cb150-14" tabindex="-1"></a>              <span class="at">data =</span> model1_predicted) <span class="sc">+</span></span>
<span id="cb150-15"><a href="pm-t.html#cb150-15" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymax=</span>.upper,<span class="at">ymin=</span>.lower),</span>
<span id="cb150-16"><a href="pm-t.html#cb150-16" tabindex="-1"></a>              <span class="at">color=</span><span class="st">&quot;blue&quot;</span>,</span>
<span id="cb150-17"><a href="pm-t.html#cb150-17" tabindex="-1"></a>              <span class="at">alpha=</span><span class="fl">0.7</span>,</span>
<span id="cb150-18"><a href="pm-t.html#cb150-18" tabindex="-1"></a>              <span class="at">data =</span> model2_predicted)</span></code></pre></div>
<p><img src="_main_files/figure-html/pred_th_4-1.png" width="672" /></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="pm-t.html#cb151-1" tabindex="-1"></a><span class="co"># see if there is a better way to do this</span></span>
<span id="cb151-2"><a href="pm-t.html#cb151-2" tabindex="-1"></a></span>
<span id="cb151-3"><a href="pm-t.html#cb151-3" tabindex="-1"></a><span class="fu">library</span>(Metrics) <span class="co"># using rmse from Metrics library</span></span>
<span id="cb151-4"><a href="pm-t.html#cb151-4" tabindex="-1"></a><span class="co"># compare mean squared error</span></span>
<span id="cb151-5"><a href="pm-t.html#cb151-5" tabindex="-1"></a>  <span class="fu">rmse</span>(model1_predicted<span class="sc">$</span>.fitted, data_nba<span class="sc">$</span>salary)</span></code></pre></div>
<pre><code>## [1] 3544282</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="pm-t.html#cb153-1" tabindex="-1"></a>  <span class="fu">rmse</span>(model2_predicted<span class="sc">$</span>.fitted, data_nba<span class="sc">$</span>salary)</span></code></pre></div>
<pre><code>## [1] 3731784</code></pre>
<p>Looking at <code>r2</code>, the <code>prediction intervals</code> and <code>rmse</code>, model 1 clearly performs better than model 2.</p>
</div>
<div id="further-resources-2" class="section level2 hasAnchor" number="10.4">
<h2><span class="header-section-number">10.4</span> Further resources<a href="pm-t.html#further-resources-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="resources">
<ul>
<li><a href="https://www.dataquest.io/blog/statistical-learning-for-predictive-modeling-r/">Linear Regression for Predictive Modeling in R - Dataquest</a>: This is a blog post that explains how to use linear regression for predictive modeling in R, using the trees data set as an example. It covers how to fit, visualize, and evaluate linear regression models, as well as how to calculate confidence and prediction intervals.</li>
<li><a href="https://www.tidyverse.org/">Tidyverse</a>: This is a collection of R packages designed for data science. It includes packages for data manipulation, visualization, modeling, and more. It also provides a consistent and coherent syntax and data structures for working with data in R.</li>
<li><a href="http://www.sthda.com/english/articles/40-regression-analysis/166-predict-in-r-model-predictions-and-confidence-intervals/">Predict in R: Model Predictions and Confidence Intervals - STHDA</a>: This is a web page that shows how to use the predict() function in R to make predictions from a fitted model object. It also explains the difference between confidence intervals and prediction intervals, and how to calculate them using base R or the broom package.</li>
</ul>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lin-e.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ml.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/10-prediction-theory.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
