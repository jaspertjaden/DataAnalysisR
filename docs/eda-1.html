<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 2 Exploratory Data Analysis | Data Analysis with R for Social Scientists</title>
  <meta name="description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content=" 2 Exploratory Data Analysis | Data Analysis with R for Social Scientists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="github-repo" content="jaspertjaden/DataAnalysisR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 2 Exploratory Data Analysis | Data Analysis with R for Social Scientists" />
  
  <meta name="twitter:description" content="In this course, you will learn how to analyse data using regression in R." />
  

<meta name="author" content="Jakob Tures &amp; Jasper Tjaden" />


<meta name="date" content="2023-10-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="intro-sem.html"/>
<link rel="next" href="eda-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About the Authors</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#github-repo"><i class="fa fa-check"></i>GitHub Repo</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-sem.html"><a href="intro-sem.html"><i class="fa fa-check"></i><b>1</b> Introduction to Seminar</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-sem.html"><a href="intro-sem.html#prerequisites"><i class="fa fa-check"></i><b>1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="eda-1.html"><a href="eda-1.html"><i class="fa fa-check"></i><b>2</b> Exploratory Data Analysis</a>
<ul>
<li class="chapter" data-level="2.1" data-path="eda-1.html"><a href="eda-1.html#objectives"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="eda-1.html"><a href="eda-1.html#r-functions-covered-this-week"><i class="fa fa-check"></i><b>2.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="2.3" data-path="eda-1.html"><a href="eda-1.html#what-is-eda-and-why-is-it-so-important"><i class="fa fa-check"></i><b>2.3</b> What is <em>EDA</em> and why is it so important?</a></li>
<li class="chapter" data-level="2.4" data-path="eda-1.html"><a href="eda-1.html#importing-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Importing data into R</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="eda-1.html"><a href="eda-1.html#merge-datasets"><i class="fa fa-check"></i><b>2.4.1</b> Merge datasets</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="eda-1.html"><a href="eda-1.html#clean-dataset"><i class="fa fa-check"></i><b>2.5</b> Clean dataset</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="eda-1.html"><a href="eda-1.html#mutating-variables"><i class="fa fa-check"></i><b>2.5.1</b> Mutating variables</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="eda-1.html"><a href="eda-1.html#explore-the-complete-dataset"><i class="fa fa-check"></i><b>2.6</b> Explore the complete dataset</a></li>
<li class="chapter" data-level="2.7" data-path="eda-1.html"><a href="eda-1.html#explore-individual-variables"><i class="fa fa-check"></i><b>2.7</b> Explore individual variables</a></li>
<li class="chapter" data-level="2.8" data-path="eda-1.html"><a href="eda-1.html#moving-on"><i class="fa fa-check"></i><b>2.8</b> Moving on</a></li>
<li class="chapter" data-level="2.9" data-path="eda-1.html"><a href="eda-1.html#further-resources"><i class="fa fa-check"></i><b>2.9</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda-2.html"><a href="eda-2.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis - Exercise</a>
<ul>
<li class="chapter" data-level="3.1" data-path="eda-2.html"><a href="eda-2.html#what-is-r-markdown"><i class="fa fa-check"></i><b>3.1</b> What is R Markdown?</a></li>
<li class="chapter" data-level="3.2" data-path="eda-2.html"><a href="eda-2.html#creating-a-r-markdown-file"><i class="fa fa-check"></i><b>3.2</b> Creating a R Markdown file</a></li>
<li class="chapter" data-level="3.3" data-path="eda-2.html"><a href="eda-2.html#writing-in-r-markdown"><i class="fa fa-check"></i><b>3.3</b> Writing in R Markdown</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="eda-2.html"><a href="eda-2.html#document-components"><i class="fa fa-check"></i><b>3.3.1</b> Document components</a></li>
<li class="chapter" data-level="3.3.2" data-path="eda-2.html"><a href="eda-2.html#formatting"><i class="fa fa-check"></i><b>3.3.2</b> Formatting</a></li>
<li class="chapter" data-level="3.3.3" data-path="eda-2.html"><a href="eda-2.html#code-chunks"><i class="fa fa-check"></i><b>3.3.3</b> Code chunks</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="eda-2.html"><a href="eda-2.html#further-resources-1"><i class="fa fa-check"></i><b>3.4</b> Further resources</a></li>
<li class="chapter" data-level="3.5" data-path="eda-2.html"><a href="eda-2.html#eda---exercise"><i class="fa fa-check"></i><b>3.5</b> EDA - Exercise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dags-1.html"><a href="dags-1.html"><i class="fa fa-check"></i><b>4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dags-1.html"><a href="dags-1.html#objectives-1"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dags-1.html"><a href="dags-1.html#functions-covered"><i class="fa fa-check"></i><b>4.2</b> Functions Covered</a></li>
<li class="chapter" data-level="4.3" data-path="dags-1.html"><a href="dags-1.html#modelling"><i class="fa fa-check"></i><b>4.3</b> Modelling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dags-1.html"><a href="dags-1.html#what-is-modelling"><i class="fa fa-check"></i><b>4.3.1</b> What is modelling?</a></li>
<li class="chapter" data-level="4.3.2" data-path="dags-1.html"><a href="dags-1.html#estimating-effects-vs.-prediction"><i class="fa fa-check"></i><b>4.3.2</b> Estimating effects vs. prediction</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dags-1.html"><a href="dags-1.html#dags"><i class="fa fa-check"></i><b>4.4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dags-1.html"><a href="dags-1.html#directed-acyclical-graphs"><i class="fa fa-check"></i><b>4.4.1</b> Directed acyclical graphs</a></li>
<li class="chapter" data-level="4.4.2" data-path="dags-1.html"><a href="dags-1.html#patterns-of-relationships"><i class="fa fa-check"></i><b>4.4.2</b> Patterns of relationships</a></li>
<li class="chapter" data-level="4.4.3" data-path="dags-1.html"><a href="dags-1.html#adjustment-set"><i class="fa fa-check"></i><b>4.4.3</b> Adjustment set</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dags-1.html"><a href="dags-1.html#nba-dag"><i class="fa fa-check"></i><b>4.5</b> NBA DAG</a></li>
<li class="chapter" data-level="4.6" data-path="dags-1.html"><a href="dags-1.html#resources"><i class="fa fa-check"></i><b>4.6</b> Resources</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dags-1.html"><a href="dags-1.html#dagitty.net"><i class="fa fa-check"></i><b>4.6.1</b> dagitty.net</a></li>
<li class="chapter" data-level="4.6.2" data-path="dags-1.html"><a href="dags-1.html#how-to-use-dagitty"><i class="fa fa-check"></i><b>4.6.2</b> How to use dagitty()</a></li>
<li class="chapter" data-level="4.6.3" data-path="dags-1.html"><a href="dags-1.html#more-on-dags"><i class="fa fa-check"></i><b>4.6.3</b> More on DAGs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lin-t-1.html"><a href="lin-t-1.html"><i class="fa fa-check"></i><b>5</b> Linear Regression - Theory I: Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lin-t-1.html"><a href="lin-t-1.html#objectives-2"><i class="fa fa-check"></i><b>5.1</b> Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="lin-t-1.html"><a href="lin-t-1.html#what-is-linear-regression"><i class="fa fa-check"></i><b>5.2</b> What is Linear Regression</a></li>
<li class="chapter" data-level="5.3" data-path="lin-t-1.html"><a href="lin-t-1.html#examplary-research-question-data"><i class="fa fa-check"></i><b>5.3</b> Examplary research question &amp; data</a></li>
<li class="chapter" data-level="5.4" data-path="lin-t-1.html"><a href="lin-t-1.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.4</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lin-t-1.html"><a href="lin-t-1.html#regression-formula"><i class="fa fa-check"></i><b>5.4.1</b> Regression Formula</a></li>
<li class="chapter" data-level="5.4.2" data-path="lin-t-1.html"><a href="lin-t-1.html#regressing-grade-on-hours"><i class="fa fa-check"></i><b>5.4.2</b> Regressing <code>grade</code> on <code>hours</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lin-t-1.html"><a href="lin-t-1.html#moving-on-1"><i class="fa fa-check"></i><b>5.5</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-t-2.html"><a href="lin-t-2.html"><i class="fa fa-check"></i><b>6</b> Linear Regression - Theory II: Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lin-t-2.html"><a href="lin-t-2.html#objectives-3"><i class="fa fa-check"></i><b>6.1</b> Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="lin-t-2.html"><a href="lin-t-2.html#multiple-linear-regression"><i class="fa fa-check"></i><b>6.2</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-additional-metric-variables"><i class="fa fa-check"></i><b>6.2.1</b> Adding additional metric variables</a></li>
<li class="chapter" data-level="6.2.2" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-dummy-variables"><i class="fa fa-check"></i><b>6.2.2</b> Adding dummy variables</a></li>
<li class="chapter" data-level="6.2.3" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-categorical-variables"><i class="fa fa-check"></i><b>6.2.3</b> Adding categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lin-t-2.html"><a href="lin-t-2.html#returning-to-our-research-question"><i class="fa fa-check"></i><b>6.3</b> Returning to our research question</a></li>
<li class="chapter" data-level="6.4" data-path="lin-t-2.html"><a href="lin-t-2.html#adressing-the-uncertainty"><i class="fa fa-check"></i><b>6.4</b> Adressing the uncertainty</a></li>
<li class="chapter" data-level="6.5" data-path="lin-t-2.html"><a href="lin-t-2.html#moving-on-2"><i class="fa fa-check"></i><b>6.5</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lin-t-3.html"><a href="lin-t-3.html"><i class="fa fa-check"></i><b>7</b> Linear Regression - Theory III: Diagnostics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lin-t-3.html"><a href="lin-t-3.html#objectives-4"><i class="fa fa-check"></i><b>7.1</b> Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="lin-t-3.html"><a href="lin-t-3.html#model-fit"><i class="fa fa-check"></i><b>7.2</b> Model fit</a></li>
<li class="chapter" data-level="7.3" data-path="lin-t-3.html"><a href="lin-t-3.html#regression-diagnostics"><i class="fa fa-check"></i><b>7.3</b> Regression diagnostics</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="lin-t-3.html"><a href="lin-t-3.html#linearity"><i class="fa fa-check"></i><b>7.3.1</b> Linearity</a></li>
<li class="chapter" data-level="7.3.2" data-path="lin-t-3.html"><a href="lin-t-3.html#normally-distributed-residuals"><i class="fa fa-check"></i><b>7.3.2</b> Normally distributed residuals</a></li>
<li class="chapter" data-level="7.3.3" data-path="lin-t-3.html"><a href="lin-t-3.html#homoscedasticity"><i class="fa fa-check"></i><b>7.3.3</b> Homoscedasticity</a></li>
<li class="chapter" data-level="7.3.4" data-path="lin-t-3.html"><a href="lin-t-3.html#no-overly-influential-data-points"><i class="fa fa-check"></i><b>7.3.4</b> No overly influential data points</a></li>
<li class="chapter" data-level="7.3.5" data-path="lin-t-3.html"><a href="lin-t-3.html#no-multicollinearity"><i class="fa fa-check"></i><b>7.3.5</b> No (multi)collinearity</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="lin-t-3.html"><a href="lin-t-3.html#returning-to-our-research-question-1"><i class="fa fa-check"></i><b>7.4</b> Returning to our research question</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="lin-t-3.html"><a href="lin-t-3.html#interactions"><i class="fa fa-check"></i><b>7.4.1</b> Interactions</a></li>
<li class="chapter" data-level="7.4.2" data-path="lin-t-3.html"><a href="lin-t-3.html#regression-diagnostics-revisited"><i class="fa fa-check"></i><b>7.4.2</b> Regression diagnostics (revisited)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="lin-t-3.html"><a href="lin-t-3.html#conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
<li class="chapter" data-level="7.6" data-path="lin-t-3.html"><a href="lin-t-3.html#resources-1"><i class="fa fa-check"></i><b>7.6</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lin-a.html"><a href="lin-a.html"><i class="fa fa-check"></i><b>8</b> Linear Regression - Application</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lin-a.html"><a href="lin-a.html#objectives-5"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="lin-a.html"><a href="lin-a.html#r-functions-covered-this-week-1"><i class="fa fa-check"></i><b>8.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="8.3" data-path="lin-a.html"><a href="lin-a.html#research-question"><i class="fa fa-check"></i><b>8.3</b> Research question</a></li>
<li class="chapter" data-level="8.4" data-path="lin-a.html"><a href="lin-a.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.4</b> Simple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="lin-a.html"><a href="lin-a.html#interpretation"><i class="fa fa-check"></i><b>8.4.1</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lin-a.html"><a href="lin-a.html#multiple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.5</b> Multiple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="lin-a.html"><a href="lin-a.html#interpretation-1"><i class="fa fa-check"></i><b>8.5.1</b> Interpretation</a></li>
<li class="chapter" data-level="8.5.2" data-path="lin-a.html"><a href="lin-a.html#sidenote-adding-interactions"><i class="fa fa-check"></i><b>8.5.2</b> Sidenote: Adding interactions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lin-a.html"><a href="lin-a.html#regression-diagnostics-1"><i class="fa fa-check"></i><b>8.6</b> Regression Diagnostics</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="lin-a.html"><a href="lin-a.html#skewed-outcome-variable"><i class="fa fa-check"></i><b>8.6.1</b> Skewed outcome variable</a></li>
<li class="chapter" data-level="8.6.2" data-path="lin-a.html"><a href="lin-a.html#non-linearity"><i class="fa fa-check"></i><b>8.6.2</b> Non-linearity</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="lin-a.html"><a href="lin-a.html#returning-to-our-research-question-2"><i class="fa fa-check"></i><b>8.7</b> Returning to our research question</a></li>
<li class="chapter" data-level="8.8" data-path="lin-a.html"><a href="lin-a.html#moving-on-3"><i class="fa fa-check"></i><b>8.8</b> Moving on</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lin-e.html"><a href="lin-e.html"><i class="fa fa-check"></i><b>9</b> Linear Regression - Exercise</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lin-e.html"><a href="lin-e.html#linear-regression---exercise"><i class="fa fa-check"></i><b>9.1</b> Linear Regression - Exercise</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="pm-t.html"><a href="pm-t.html"><i class="fa fa-check"></i><b>10</b> Prediction</a>
<ul>
<li class="chapter" data-level="10.1" data-path="pm-t.html"><a href="pm-t.html#objectives-6"><i class="fa fa-check"></i><b>10.1</b> Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="pm-t.html"><a href="pm-t.html#r-functions-covered-this-week-2"><i class="fa fa-check"></i><b>10.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="10.3" data-path="pm-t.html"><a href="pm-t.html#making-predictions"><i class="fa fa-check"></i><b>10.3</b> Making predictions</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="pm-t.html"><a href="pm-t.html#simple-linear-regression-1"><i class="fa fa-check"></i><b>10.3.1</b> Simple linear regression</a></li>
<li class="chapter" data-level="10.3.2" data-path="pm-t.html"><a href="pm-t.html#why-predict-at-all"><i class="fa fa-check"></i><b>10.3.2</b> Why predict at all?</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="pm-t.html"><a href="pm-t.html#making-better-predictions"><i class="fa fa-check"></i><b>10.4</b> Making better predictions</a></li>
<li class="chapter" data-level="10.5" data-path="pm-t.html"><a href="pm-t.html#making-even-better-predictions"><i class="fa fa-check"></i><b>10.5</b> Making even better predictions?</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="pm-t.html"><a href="pm-t.html#comparing-models"><i class="fa fa-check"></i><b>10.5.1</b> Comparing models</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="pm-t.html"><a href="pm-t.html#predicting-hypotheticals"><i class="fa fa-check"></i><b>10.6</b> Predicting hypotheticals</a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="pm-t.html"><a href="pm-t.html#adressing-uncertainty"><i class="fa fa-check"></i><b>10.6.1</b> Adressing uncertainty</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="pm-t.html"><a href="pm-t.html#further-resources-2"><i class="fa fa-check"></i><b>10.7</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ml.html"><a href="ml.html"><i class="fa fa-check"></i><b>11</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ml.html"><a href="ml.html#objectives-7"><i class="fa fa-check"></i><b>11.1</b> Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="ml.html"><a href="ml.html#r-functions-covered-this-week-3"><i class="fa fa-check"></i><b>11.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="11.3" data-path="ml.html"><a href="ml.html#intro-to-machine-learning"><i class="fa fa-check"></i><b>11.3</b> Intro to Machine learning</a></li>
<li class="chapter" data-level="11.4" data-path="ml.html"><a href="ml.html#further-resources-3"><i class="fa fa-check"></i><b>11.4</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="pm-a.html"><a href="pm-a.html"><i class="fa fa-check"></i><b>12</b> Prediction &amp; Machine Learning - Exercise</a>
<ul>
<li class="chapter" data-level="12.1" data-path="pm-a.html"><a href="pm-a.html#exercises"><i class="fa fa-check"></i><b>12.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="log-est.html"><a href="log-est.html"><i class="fa fa-check"></i><b>13</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="log-est.html"><a href="log-est.html#objectives-8"><i class="fa fa-check"></i><b>13.1</b> Objectives</a></li>
<li class="chapter" data-level="13.2" data-path="log-est.html"><a href="log-est.html#functions-covered-in-this-week"><i class="fa fa-check"></i><b>13.2</b> Functions covered in this week</a></li>
<li class="chapter" data-level="13.3" data-path="log-est.html"><a href="log-est.html#basic-concepts"><i class="fa fa-check"></i><b>13.3</b> Basic concepts</a></li>
<li class="chapter" data-level="13.4" data-path="log-est.html"><a href="log-est.html#application"><i class="fa fa-check"></i><b>13.4</b> Application</a></li>
<li class="chapter" data-level="13.5" data-path="log-est.html"><a href="log-est.html#interpretation-2"><i class="fa fa-check"></i><b>13.5</b> Interpretation</a></li>
<li class="chapter" data-level="13.6" data-path="log-est.html"><a href="log-est.html#model-fit-1"><i class="fa fa-check"></i><b>13.6</b> Model fit</a></li>
<li class="chapter" data-level="13.7" data-path="log-est.html"><a href="log-est.html#diagnostics"><i class="fa fa-check"></i><b>13.7</b> Diagnostics</a></li>
<li class="chapter" data-level="13.8" data-path="log-est.html"><a href="log-est.html#prediction"><i class="fa fa-check"></i><b>13.8</b> Prediction</a></li>
<li class="chapter" data-level="13.9" data-path="log-est.html"><a href="log-est.html#mediation-1"><i class="fa fa-check"></i><b>13.9</b> Mediation</a></li>
<li class="chapter" data-level="13.10" data-path="log-est.html"><a href="log-est.html#comparing-linear-and-logistic-regression"><i class="fa fa-check"></i><b>13.10</b> Comparing linear and logistic regression</a></li>
<li class="chapter" data-level="13.11" data-path="log-est.html"><a href="log-est.html#logistic-regression-in-machine-learning-context"><i class="fa fa-check"></i><b>13.11</b> Logistic regression in Machine Learning context</a></li>
<li class="chapter" data-level="13.12" data-path="log-est.html"><a href="log-est.html#further-resources-4"><i class="fa fa-check"></i><b>13.12</b> Further resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis with R for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="eda-1" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number"> 2</span> Exploratory Data Analysis<a href="eda-1.html#eda-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="objectives" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Objectives<a href="eda-1.html#objectives" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="objectives">
<ul>
<li>Load, merge and clean data sets</li>
<li>Explore data sets</li>
<li>Conduct basic descriptive data analysis</li>
<li>Understand and visualize the distribution of variables</li>
<li>Understand and visualize the relationship between variables</li>
</ul>
</div>
</div>
<div id="r-functions-covered-this-week" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> R functions covered this week<a href="eda-1.html#r-functions-covered-this-week" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="functions">
<ul>
<li>Importing and saving data
<ul>
<li><code>read_csv()</code>: reads a <code>csv</code> file into a data frame</li>
<li><code>read_excel()</code>: reads an Excel file into a data frame.</li>
<li><code>load()</code>: loads an <code>RData</code> file into the current session.</li>
<li><code>save()</code>: saves objects from the current session as a <code>RData</code> file</li>
</ul></li>
<li>Handling data
<ul>
<li><code>str()</code>: displays the structure of an object.</li>
<li><code>merge()</code>: combines two data frames into one.</li>
<li><code>na.omit()</code>: removes missing values from a data frame.</li>
<li><code>rm()</code>: removes objects from the current session.</li>
</ul></li>
<li><code>dplyr</code> verbs for data wrangling
<ul>
<li><code>as_tibble()</code>, <code>select()</code>, <code>filter()</code>, <code>rename()</code>, <code>mutate()</code>, <code>case_when()</code>, <code>group_by()</code>, <code>ungroup()</code>, <code>summarise()</code></li>
</ul></li>
<li><code>ggplot()</code>: creates a plot using the grammar of graphics.
<ul>
<li><code>geom_boxplot()</code>, <code>geom_histogram()</code>, <code>geom_density()</code>, <code>geom_point()</code>, <code>geom_smooth()</code></li>
</ul></li>
<li>Producing descriptive statistics and summaries
<ul>
<li><code>table()</code>: creates a contingency table of counts for categorical variables.</li>
<li><code>summary()</code>: produces a summary of an object, including its mean, median, quartiles, etc.</li>
<li><code>skim()</code>: provides a summary of the whole dataset with various statistics and types of variables.</li>
<li><code>DataExplorer</code> functions that return information on the data set and descriptive statistics.</li>
<li><code>introduce()</code>, <code>plot_intro()</code>, <code>plot_missing()</code>, <code>plot_bar()</code></li>
<li><code>tbl_summary()</code>: creates a summary table for descriptive statistics of variables in a data frame.</li>
</ul></li>
<li>Calculating and plotting correlations
<ul>
<li><code>correlate()</code>, <code>rearrange()</code>, <code>shave()</code>, <code>fashion()</code></li>
<li><code>cor()</code>, <code>ggcorrplot()</code></li>
</ul></li>
</ul>
</div>
</div>
<div id="what-is-eda-and-why-is-it-so-important" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> What is <em>EDA</em> and why is it so important?<a href="eda-1.html#what-is-eda-and-why-is-it-so-important" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Exploratory Data Analysis</em>, or <em>EDA</em> for short, is the first step in every data analysis project. Before we can start modelling the relationships in our data, we have to get to know the data set. What variables are included? What are their minimum, maximum and mean values? How are they distributed? What relationships exist between several variables? Etc, etc… EDA helps us with answering these and related questions by using a set of techniques aimed at <em>exploring</em> the data.</p>
<p>But why is this important? Why do we not just throw all variables in our data set into a statistical model, let the computer do the crunching and get the answer to our research question before lunch break? On the technical side, given enough processing power, nothing prevents us from taking this approach. But if our goal is to produce reliable, robust and <em>good</em> science, we can not, or even must not, take this shortcut and rather put in the hours into thorough thinking and learning about our data before even starting to apply all the fancy and powerful statistical methods we will address later in this seminar.</p>
<p>EDA helps us in understanding the data. It is not only important to know <em>which</em> variables are even present but also what their <em>types</em> are and how they are <em>distributed</em>. This is important to know because the choice of model and its appropriateness very much depends on it. Again, in most cases our computer or <code>R</code> will not stop us from building an unreliable or even flat out <em>wrong</em> statistical model. The only way to prevent this is to think and make informed decisions based on our knowledge, experience and understanding of our data. After choosing and building our model we have to check it for problems and assess if we have met all the underlying statistical assumptions. When we return to this at a <a href="lin-t-3.html#lin-t-3">later point in the seminar</a>, we will again see that understanding our variables and their distributions is necessary to “fine-tune” our regression model and actually produce reliable scientific research results.</p>
<p>EDA is also necessary to make informed decisions on <em>pre-processing</em> and <em>data cleaning</em>. It will be a rare treat indeed to download a data set that includes all variables necessary for modelling in a format that we can use <em>out-of-the-box</em> for our specific research question. We may have to convert variables into different types, recode categories, normalize scales or even construct completely new variables based on the values of others; and this is just a small subset of all the possibly necessary pre-processing steps we may have to apply. There may also be issues in our data. Maybe there are extreme values on some variables that we have to deal with or plain mistakes that were introduced when data set was assembled. Small errors in the data can lead to completely wrong conclusions or even prevent the model from working altogether. As there is no <em>gold standard</em> for pre-processing and data cleaning, we have to understand and explore our data beforehand and again make our own informed decisions.</p>
<p>Moving beyond understanding individual variables and their distributions, another part of EDA is exploring the relationships between multiple variables. How are the values of one variable distributed based on the values of another? Do variables correlate with each other and in which direction? Etc, etc… This again helps us in building a robust model and making informed decisions but may also support the process of <em>hypothesis generation</em>, i.e. finding things that could be interesting to study.</p>
</div>
<div id="importing-data-into-r" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Importing data into R<a href="eda-1.html#importing-data-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before we can start exploring our data, we first have to load it into <code>R</code>.</p>
<p>In this course, we will use a data set on NBA players compiled by Chris Davis and made available on <a href="https://www.kaggle.com/"><em>kaggle.com</em></a>. You should inspect the documentation for the data set following this <a href="https://www.kaggle.com/datasets/thedevastator/exploring-nba-player-performance-and-salaries-19">link</a> and download both <code>.csv</code> files either directly from the linked page or from the Moodle course accompanying this seminar. Make sure to save the files in your project folder, or a sub-folder thereof.</p>
<p>To import the data, we have to load some packages. Luckily, the <em>tidyverse</em> package, or rather collection of packages, provides all we need here. As a quick reminder, you can install packages using the function <code>install.packages("tidyverse")</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="eda-1.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>Now, let us import the data. You can see in the folder that we have 2 <code>.csv</code> files. To import those, we can use the the <code>read_csv()</code> or the more general <code>read_delim()</code> functions. For other formats we would have to use different functions. Here are some of the more common cases you may encounter. To load <code>.RData</code> files, the native R format, we use the <code>load()</code> function. To import Stata data sets, you can use <code>read_data()</code> from the <code>haven</code> package. Several other packages for specific data formats are also available.</p>
<p>Make sure you name the correct sub-directory in case you saved the data a sub-folder of your project folder (which we have done).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="eda-1.html#cb2-1" tabindex="-1"></a>nba_salaries <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../datasets/nba/salaries_1985to2018.csv&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-2"><a href="eda-1.html#cb2-2" tabindex="-1"></a>nba_players <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../datasets/nba/players.csv&quot;</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Great, the two data frames should appear in your environment in the upper right side in R studio.</p>
<p>Let us take a quick look at these using the <code>str()</code> function. <code>str()</code> shows us the number of rows (observations) and columns (variables). It also provides information on the name of each column, its type and an example of some of the values in each column.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="eda-1.html#cb3-1" tabindex="-1"></a><span class="fu">str</span>(nba_players)</span></code></pre></div>
<pre><code>## spc_tbl_ [4,685 × 25] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ index      : num [1:4685] 0 1 2 3 4 5 6 7 8 9 ...
##  $ _id        : chr [1:4685] &quot;abdelal01&quot; &quot;abdulza01&quot; &quot;abdulka01&quot; &quot;abdulma02&quot; ...
##  $ birthDate  : chr [1:4685] &quot;June 24, 1968&quot; &quot;April 7, 1946&quot; &quot;April 16, 1947&quot; &quot;March 9, 1969&quot; ...
##  $ birthPlace : chr [1:4685] &quot;Cairo, Egypt&quot; &quot;Brooklyn, New York&quot; &quot;New York, New York&quot; &quot;Gulfport, Mississippi&quot; ...
##  $ career_AST : num [1:4685] 0.3 1.2 3.6 3.5 1.1 2.5 1.2 1 0.7 0.5 ...
##  $ career_FG% : chr [1:4685] &quot;50.2&quot; &quot;42.8&quot; &quot;55.9&quot; &quot;44.2&quot; ...
##  $ career_FG3%: chr [1:4685] &quot;0.0&quot; NA &quot;5.6&quot; &quot;35.4&quot; ...
##  $ career_FT% : chr [1:4685] &quot;70.1&quot; &quot;72.8&quot; &quot;72.1&quot; &quot;90.5&quot; ...
##  $ career_G   : num [1:4685] 256 505 1560 586 236 830 319 1 56 174 ...
##  $ career_PER : chr [1:4685] &quot;13.0&quot; &quot;15.1&quot; &quot;24.6&quot; &quot;15.4&quot; ...
##  $ career_PTS : num [1:4685] 5.7 9 24.6 14.6 7.8 18.1 5.6 0 9.5 5.3 ...
##  $ career_TRB : chr [1:4685] &quot;3.3&quot; &quot;8.0&quot; &quot;11.2&quot; &quot;1.9&quot; ...
##  $ career_WS  : num [1:4685] 4.8 17.5 273.4 25.2 3.5 ...
##  $ career_eFG%: chr [1:4685] &quot;50.2&quot; NA &quot;55.9&quot; &quot;47.2&quot; ...
##  $ college    : chr [1:4685] &quot;Duke University&quot; &quot;Iowa State University&quot; &quot;University of California, Los Angeles&quot; &quot;Louisiana State University&quot; ...
##  $ draft_pick : chr [1:4685] &quot;25th overall&quot; &quot;5th overall&quot; &quot;1st overall&quot; &quot;3rd overall&quot; ...
##  $ draft_round: chr [1:4685] &quot;1st round&quot; &quot;1st round&quot; &quot;1st round&quot; &quot;1st round&quot; ...
##  $ draft_team : chr [1:4685] &quot;Portland Trail Blazers&quot; &quot;Cincinnati Royals&quot; &quot;Milwaukee Bucks&quot; &quot;Denver Nuggets&quot; ...
##  $ draft_year : chr [1:4685] &quot;1990&quot; &quot;1968&quot; &quot;1969&quot; &quot;1990&quot; ...
##  $ height     : chr [1:4685] &quot;6-10&quot; &quot;6-9&quot; &quot;7-2&quot; &quot;6-1&quot; ...
##  $ highSchool : chr [1:4685] &quot;Bloomfield in Bloomfield, New Jersey&quot; &quot;John Jay in Brooklyn, New York&quot; &quot;Power Memorial in New York, New York&quot; &quot;Gulfport in Gulfport, Mississippi&quot; ...
##  $ name       : chr [1:4685] &quot;Alaa Abdelnaby&quot; &quot;Zaid Abdul-Aziz&quot; &quot;Kareem Abdul-Jabbar&quot; &quot;Mahmoud Abdul-Rauf&quot; ...
##  $ position   : chr [1:4685] &quot;Power Forward&quot; &quot;Power Forward and Center&quot; &quot;Center&quot; &quot;Point Guard&quot; ...
##  $ shoots     : chr [1:4685] &quot;Right&quot; &quot;Right&quot; &quot;Right&quot; &quot;Right&quot; ...
##  $ weight     : chr [1:4685] &quot;240lb&quot; &quot;235lb&quot; &quot;225lb&quot; &quot;162lb&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   index = col_double(),
##   ..   `_id` = col_character(),
##   ..   birthDate = col_character(),
##   ..   birthPlace = col_character(),
##   ..   career_AST = col_double(),
##   ..   `career_FG%` = col_character(),
##   ..   `career_FG3%` = col_character(),
##   ..   `career_FT%` = col_character(),
##   ..   career_G = col_double(),
##   ..   career_PER = col_character(),
##   ..   career_PTS = col_double(),
##   ..   career_TRB = col_character(),
##   ..   career_WS = col_double(),
##   ..   `career_eFG%` = col_character(),
##   ..   college = col_character(),
##   ..   draft_pick = col_character(),
##   ..   draft_round = col_character(),
##   ..   draft_team = col_character(),
##   ..   draft_year = col_character(),
##   ..   height = col_character(),
##   ..   highSchool = col_character(),
##   ..   name = col_character(),
##   ..   position = col_character(),
##   ..   shoots = col_character(),
##   ..   weight = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="eda-1.html#cb5-1" tabindex="-1"></a><span class="fu">str</span>(nba_salaries)</span></code></pre></div>
<pre><code>## spc_tbl_ [14,163 × 8] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ index       : num [1:14163] 0 1 2 3 4 5 6 7 8 9 ...
##  $ league      : chr [1:14163] &quot;NBA&quot; &quot;NBA&quot; &quot;NBA&quot; &quot;NBA&quot; ...
##  $ player_id   : chr [1:14163] &quot;abdelal01&quot; &quot;abdelal01&quot; &quot;abdelal01&quot; &quot;abdelal01&quot; ...
##  $ salary      : num [1:14163] 395000 494000 500000 805000 650000 1530000 2030000 2000000 3000000 1660000 ...
##  $ season      : chr [1:14163] &quot;1990-91&quot; &quot;1991-92&quot; &quot;1992-93&quot; &quot;1993-94&quot; ...
##  $ season_end  : num [1:14163] 1991 1992 1993 1994 1995 ...
##  $ season_start: num [1:14163] 1990 1991 1992 1993 1994 ...
##  $ team        : chr [1:14163] &quot;Portland Trail Blazers&quot; &quot;Portland Trail Blazers&quot; &quot;Boston Celtics&quot; &quot;Boston Celtics&quot; ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   index = col_double(),
##   ..   league = col_character(),
##   ..   player_id = col_character(),
##   ..   salary = col_double(),
##   ..   season = col_character(),
##   ..   season_end = col_double(),
##   ..   season_start = col_double(),
##   ..   team = col_character()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<p>We see that most variables already use the correct type, automatically picked by <code>read_csv()</code> based on the data is sees when importing. Text variables are <em>chr</em> for <em>character</em>; Numeric variables are <em>num</em>. It is very important that you understand the types of variables that R uses. If you need a refresher, go <a href="https://jaspertjaden.github.io/course-intro2r/week2.html#data-types">here</a>.</p>
<div id="merge-datasets" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Merge datasets<a href="eda-1.html#merge-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We see that <code>nba_salaries</code> contains the salaries of players for various seasons. <code>players</code> contains many career statistics about players, for example, how many points they scored on average per game, across their whole career.</p>
<p>Now we want to link both data sets. We can do this using the <code>merge()</code> function. An alternative would be <code>*_join()</code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="eda-1.html#cb7-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> <span class="fu">merge</span>(nba_players, nba_salaries, <span class="at">by.x =</span> <span class="fu">c</span>(<span class="st">&quot;_id&quot;</span>), <span class="at">by.y=</span><span class="fu">c</span>(<span class="st">&quot;player_id&quot;</span>))</span>
<span id="cb7-2"><a href="eda-1.html#cb7-2" tabindex="-1"></a><span class="fu">rm</span>(nba_players, nba_salaries)</span></code></pre></div>
</div>
</div>
<div id="clean-dataset" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Clean dataset<a href="eda-1.html#clean-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can use the <code>select()</code> function to kick out columns and the <code>filter()</code> function to kick out rows. First, we need to look at the codebook and the questionnaire to understand the what each variable refers to (see the file <code>data_description.txt</code>).</p>
<p>Let us start by removing some variables of which we are already sure we will not use and reducing the data set to more recent observations. We should also rename our <code>_id</code> variable to a name that is compliant with the R naming conventions. At the same time we convert the data frame into a tibble. This is not necessary and will not have any impact on the results but we can benefit from the much nicer printing into the console.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="eda-1.html#cb8-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="eda-1.html#cb8-2" tabindex="-1"></a>        <span class="fu">select</span>(<span class="sc">-</span>index.x, <span class="sc">-</span>index.y, <span class="sc">-</span>league, <span class="sc">-</span>highSchool) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="eda-1.html#cb8-3" tabindex="-1"></a>        <span class="fu">filter</span>(season_start <span class="sc">&gt;=</span> <span class="dv">1998</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="eda-1.html#cb8-4" tabindex="-1"></a>        <span class="fu">rename</span>(<span class="at">id =</span> <span class="st">&quot;_id&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="eda-1.html#cb8-5" tabindex="-1"></a>        <span class="fu">as_tibble</span>()</span></code></pre></div>
<div id="mutating-variables" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Mutating variables<a href="eda-1.html#mutating-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let us do some additional data cleaning.</p>
<p>First, we want to calculate each players’ age at the beginning of each season. Currently, we only have the date of birth and the year for each season.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="eda-1.html#cb9-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="eda-1.html#cb9-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_of_birth =</span> <span class="fu">year</span>(<span class="fu">mdy</span>(birthDate)),</span>
<span id="cb9-3"><a href="eda-1.html#cb9-3" tabindex="-1"></a>         <span class="at">age =</span> season_start <span class="sc">-</span> year_of_birth)</span></code></pre></div>
<p>Second, we want recode the <code>position</code> variable. Some players played multiple position, so that info is messy. We want to create dummy variables for each position.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="eda-1.html#cb10-1" tabindex="-1"></a><span class="fu">table</span>(data_nba<span class="sc">$</span>position)</span></code></pre></div>
<pre><code>## 
##                                                             Center 
##                                                               1204 
##                                           Center and Power Forward 
##                                                                686 
##                         Center and Power Forward and Small Forward 
##                                                                  3 
##                         Center and Small Forward and Power Forward 
##                                                                 30 
##                                                        Point Guard 
##                                                               1162 
## Point Guard and Power Forward and Small Forward and Shooting Guard 
##                                                                  5 
##                                     Point Guard and Shooting Guard 
##                                                                573 
##                   Point Guard and Shooting Guard and Small Forward 
##                                                                 13 
##                                      Point Guard and Small Forward 
##                                                                  3 
##                   Point Guard and Small Forward and Shooting Guard 
##                                                                 21 
##                                                      Power Forward 
##                                                                667 
##                                           Power Forward and Center 
##                                                                884 
##                         Power Forward and Center and Small Forward 
##                                                                 51 
##                                   Power Forward and Shooting Guard 
##                                                                 14 
##                 Power Forward and Shooting Guard and Small Forward 
##                                                                 31 
##                                    Power Forward and Small Forward 
##                                                                418 
##                         Power Forward and Small Forward and Center 
##                                                                  3 
##                 Power Forward and Small Forward and Shooting Guard 
##                                                                 11 
##                                                     Shooting Guard 
##                                                                735 
##                                     Shooting Guard and Point Guard 
##                                                                581 
##                   Shooting Guard and Point Guard and Small Forward 
##                                                                 17 
##                 Shooting Guard and Power Forward and Small Forward 
##                                                                 25 
##                                   Shooting Guard and Small Forward 
##                                                                592 
##                   Shooting Guard and Small Forward and Point Guard 
##                                                                 73 
##                 Shooting Guard and Small Forward and Power Forward 
##                                                                 25 
##                                                      Small Forward 
##                                                                620 
##                                           Small Forward and Center 
##                                                                  4 
##                         Small Forward and Center and Power Forward 
##                                                                 72 
##                   Small Forward and Point Guard and Shooting Guard 
##                                                                 19 
##                                    Small Forward and Power Forward 
##                                                                425 
##                         Small Forward and Power Forward and Center 
##                                                                 49 
##                 Small Forward and Power Forward and Shooting Guard 
##                                                                 33 
##                                   Small Forward and Shooting Guard 
##                                                                588 
##                   Small Forward and Shooting Guard and Point Guard 
##                                                                 22 
##                 Small Forward and Shooting Guard and Power Forward 
##                                                                 69</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="eda-1.html#cb12-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="eda-1.html#cb12-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="eda-1.html#cb12-3" tabindex="-1"></a>    <span class="at">position_center =</span> </span>
<span id="cb12-4"><a href="eda-1.html#cb12-4" tabindex="-1"></a>      <span class="fu">case_when</span>(<span class="at">position =</span> <span class="fu">str_detect</span>(position,<span class="st">&quot;Center&quot;</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-5"><a href="eda-1.html#cb12-5" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb12-6"><a href="eda-1.html#cb12-6" tabindex="-1"></a>    <span class="at">position_sf =</span> </span>
<span id="cb12-7"><a href="eda-1.html#cb12-7" tabindex="-1"></a>      <span class="fu">case_when</span>(<span class="at">position =</span> <span class="fu">str_detect</span>(position,<span class="st">&quot;Small Forward&quot;</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-8"><a href="eda-1.html#cb12-8" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb12-9"><a href="eda-1.html#cb12-9" tabindex="-1"></a>    <span class="at">position_pf =</span> </span>
<span id="cb12-10"><a href="eda-1.html#cb12-10" tabindex="-1"></a>      <span class="fu">case_when</span>(<span class="at">position =</span> <span class="fu">str_detect</span>(position,<span class="st">&quot;Power Forward&quot;</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-11"><a href="eda-1.html#cb12-11" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb12-12"><a href="eda-1.html#cb12-12" tabindex="-1"></a>    <span class="at">position_sg =</span> </span>
<span id="cb12-13"><a href="eda-1.html#cb12-13" tabindex="-1"></a>      <span class="fu">case_when</span>(<span class="at">position =</span> <span class="fu">str_detect</span>(position,<span class="st">&quot;Shooting Guard&quot;</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-14"><a href="eda-1.html#cb12-14" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb12-15"><a href="eda-1.html#cb12-15" tabindex="-1"></a>    <span class="at">position_pg =</span> </span>
<span id="cb12-16"><a href="eda-1.html#cb12-16" tabindex="-1"></a>      <span class="fu">case_when</span>(<span class="at">position =</span> <span class="fu">str_detect</span>(position,<span class="st">&quot;Point Guard&quot;</span>) <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-17"><a href="eda-1.html#cb12-17" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>))</span></code></pre></div>
<p>Now we want to create a variable that gives us the number of seasons (i.e. years) that each player played in the NBA. Since the data set is organized in seasons, each row is one season. Counting the rows per player gives us the years they played.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="eda-1.html#cb13-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="eda-1.html#cb13-2" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="eda-1.html#cb13-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">seasons_played =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="eda-1.html#cb13-4" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<p>Almost done. When we browse the data set, we recognize that the height and weight variables are stored as characters. Let’s convert them to numeric, so we can use them in computations.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="eda-1.html#cb14-1" tabindex="-1"></a><span class="fu">str</span>(data_nba<span class="sc">$</span>weight)</span></code></pre></div>
<pre><code>##  chr [1:9728] &quot;162lb&quot; &quot;223lb&quot; &quot;223lb&quot; &quot;223lb&quot; &quot;223lb&quot; &quot;223lb&quot; &quot;223lb&quot; ...</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="eda-1.html#cb16-1" tabindex="-1"></a><span class="fu">str</span>(data_nba<span class="sc">$</span>height)</span></code></pre></div>
<pre><code>##  chr [1:9728] &quot;6-1&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; &quot;6-6&quot; ...</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="eda-1.html#cb18-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="eda-1.html#cb18-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> <span class="fu">str_replace</span>(weight, <span class="st">&quot;lb&quot;</span>, <span class="st">&quot;&quot;</span>),</span>
<span id="cb18-3"><a href="eda-1.html#cb18-3" tabindex="-1"></a>         <span class="at">weight =</span> <span class="fu">as.numeric</span>(weight),</span>
<span id="cb18-4"><a href="eda-1.html#cb18-4" tabindex="-1"></a>         <span class="at">height =</span> <span class="fu">str_replace</span>(height, <span class="st">&quot;-&quot;</span>, <span class="st">&quot;.&quot;</span>),</span>
<span id="cb18-5"><a href="eda-1.html#cb18-5" tabindex="-1"></a>         <span class="at">height =</span> <span class="fu">as.numeric</span>(height)</span>
<span id="cb18-6"><a href="eda-1.html#cb18-6" tabindex="-1"></a>         )</span>
<span id="cb18-7"><a href="eda-1.html#cb18-7" tabindex="-1"></a></span>
<span id="cb18-8"><a href="eda-1.html#cb18-8" tabindex="-1"></a><span class="fu">str</span>(data_nba<span class="sc">$</span>weight)</span></code></pre></div>
<pre><code>##  num [1:9728] 162 223 223 223 223 223 223 223 223 223 ...</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="eda-1.html#cb20-1" tabindex="-1"></a><span class="fu">str</span>(data_nba<span class="sc">$</span>height)</span></code></pre></div>
<pre><code>##  num [1:9728] 6.1 6.6 6.6 6.6 6.6 6.6 6.6 6.6 6.6 6.6 ...</code></pre>
<p>Now we again use <code>select()</code> to remove some unneeded variables and at the same time reorder the remaining ones before applying <code>save()</code> to store the cleaned data as a <code>.Rdata</code> file. This way we can simply load the resulting data set the next time around and spare ourselves from repeating the pre-processing each session.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="eda-1.html#cb22-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="eda-1.html#cb22-2" tabindex="-1"></a>  <span class="fu">select</span>(id, name, age, weight, height, birthPlace, <span class="fu">everything</span>(), <span class="sc">-</span>position, <span class="sc">-</span>birthDate, <span class="sc">-</span>year_of_birth)</span>
<span id="cb22-3"><a href="eda-1.html#cb22-3" tabindex="-1"></a></span>
<span id="cb22-4"><a href="eda-1.html#cb22-4" tabindex="-1"></a><span class="fu">save</span>(data_nba, <span class="at">file =</span><span class="st">&quot;../datasets/nba/data_nba.RData&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="explore-the-complete-dataset" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Explore the complete dataset<a href="eda-1.html#explore-the-complete-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, let us look at some packages which help us in exploring the data set as a whole. Let’s start with the <code>skimr</code> package:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="eda-1.html#cb23-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;skimr&quot;</span>)</span>
<span id="cb23-2"><a href="eda-1.html#cb23-2" tabindex="-1"></a></span>
<span id="cb23-3"><a href="eda-1.html#cb23-3" tabindex="-1"></a><span class="fu">skim</span>(data_nba)</span></code></pre></div>
<pre><code>## ── Data Summary ────────────────────────
##                            Values  
## Name                       data_nba
## Number of rows             9728    
## Number of columns          33      
## _______________________            
## Column type frequency:             
##   character                17      
##   numeric                  16      
## ________________________           
## Group variables            None    
## 
## ── Variable type: character ────────────────────────────────────────────────────
##    skim_variable n_missing complete_rate min max empty n_unique whitespace
##  1 id                    0         1       6   9     0     1794          0
##  2 name                  0         1       4  24     0     1790          0
##  3 birthPlace            0         1       5  44     0      849          0
##  4 career_FG%            0         1       1   5     0      333          0
##  5 career_FG3%           0         1       1   5     0      297          0
##  6 career_FT%            0         1       1   5     0      413          0
##  7 career_PER            0         1       1   5     0      274          0
##  8 career_TRB            0         1       3   4     0      113          0
##  9 career_eFG%           0         1       1   5     0      310          0
## 10 college            1541         0.842   6  89     0      379          0
## 11 draft_pick         1542         0.841  11  13     0       66          0
## 12 draft_round        1542         0.841   9   9     0        5          0
## 13 draft_team         1542         0.841   9  33     0       39          0
## 14 draft_year         1542         0.841   4   4     0       38          0
## 15 shoots                0         1       4  10     0        3          0
## 16 season                0         1       7   7     0       20          0
## 17 team                  0         1       9  33     0       36          0
## 
## ── Variable type: numeric ──────────────────────────────────────────────────────
##    skim_variable   n_missing complete_rate        mean          sd     p0
##  1 age                     0             1      27.0         4.46    18  
##  2 weight                  0             1     221.         27.7    135  
##  3 height                  0             1       6.51        0.380    5.1
##  4 career_AST              0             1       1.94        1.66     0  
##  5 career_G                0             1     569.        347.       1  
##  6 career_PTS              0             1       8.91        5.08     0  
##  7 career_WS               0             1      33.4        37.1     -2.4
##  8 salary                  0             1 4072633.    4669737.    2706  
##  9 season_end              0             1    2009.          5.83  1999  
## 10 season_start            0             1    2008.          5.83  1998  
## 11 position_center         0             1       0.307       0.461    0  
## 12 position_sf             0             1       0.331       0.471    0  
## 13 position_pf             0             1       0.360       0.480    0  
## 14 position_sg             0             1       0.354       0.478    0  
## 15 position_pg             0             1       0.256       0.436    0  
## 16 seasons_played          0             1       8.76        4.62     1  
##          p25       p50       p75       p100 hist 
##  1     23         26        30         42   ▃▇▅▂▁
##  2    200        220       240        360   ▁▇▆▁▁
##  3      6.11       6.6       6.8        7.7 ▁▅▆▇▁
##  4      0.7        1.4       2.7       10.5 ▇▃▁▁▁
##  5    281        564       827       1522   ▇▇▇▃▁
##  6      5.1        8        12         30.1 ▆▇▃▁▁
##  7      6.4       22.2      48.3      235.  ▇▂▁▁▁
##  8 947907    2240000   5408700   34682550   ▇▁▁▁▁
##  9   2004       2009      2014       2018   ▇▇▇▇▇
## 10   2003       2008      2013       2017   ▇▇▇▇▇
## 11      0          0         1          1   ▇▁▁▁▃
## 12      0          0         1          1   ▇▁▁▁▃
## 13      0          0         1          1   ▇▁▁▁▅
## 14      0          0         1          1   ▇▁▁▁▅
## 15      0          0         1          1   ▇▁▁▁▃
## 16      5          9        12         21   ▇▇▇▃▁</code></pre>
<p>The <code>skim()</code> function provides a very handy overview of the whole data set including the types of columns (i.e. variables), a summary of all variables, the extent of missing data etc. One advantage is that the output is <code>tidy</code> which means it is easy to work with further if needed, for example to plot the resulting summary.</p>
<p>An alternative is the <code>DataExplorer</code> package. It is useful to get a graphical overview of variables and the <em>missingness</em> of data.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="eda-1.html#cb25-1" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)</span>
<span id="cb25-2"><a href="eda-1.html#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="eda-1.html#cb25-3" tabindex="-1"></a><span class="co"># overview of types of variables and missingness</span></span>
<span id="cb25-4"><a href="eda-1.html#cb25-4" tabindex="-1"></a><span class="fu">introduce</span>(data_nba)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 9
##    rows columns discrete_columns continuous_columns all_missing_columns
##   &lt;int&gt;   &lt;int&gt;            &lt;int&gt;              &lt;int&gt;               &lt;int&gt;
## 1  9728      33               17                 16                   0
## # ℹ 4 more variables: total_missing_values &lt;int&gt;, complete_rows &lt;int&gt;,
## #   total_observations &lt;int&gt;, memory_usage &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="eda-1.html#cb27-1" tabindex="-1"></a><span class="co"># plots the info from above</span></span>
<span id="cb27-2"><a href="eda-1.html#cb27-2" tabindex="-1"></a><span class="fu">plot_intro</span>(data_nba)</span></code></pre></div>
<p><img src="_main_files/figure-html/explore_dt_0-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="eda-1.html#cb28-1" tabindex="-1"></a><span class="co"># plots percentages missing across variables</span></span>
<span id="cb28-2"><a href="eda-1.html#cb28-2" tabindex="-1"></a><span class="fu">plot_missing</span>(data_nba, <span class="at">missing_only =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/explore_dt_0-2.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="eda-1.html#cb29-1" tabindex="-1"></a><span class="co"># plots frequencies across variables (here for a selected subset)</span></span>
<span id="cb29-2"><a href="eda-1.html#cb29-2" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="eda-1.html#cb29-3" tabindex="-1"></a>  <span class="fu">select</span>(shoots, <span class="fu">contains</span>(<span class="st">&quot;position&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="eda-1.html#cb29-4" tabindex="-1"></a>  <span class="fu">plot_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/explore_dt_0-3.png" width="672" /></p>
<p>Now, let us try <code>gtSummary</code> for summary tables. A summary table is always a useful start, once you have identified the variables you are interested in.</p>
<p>Let us assume we are interested in <code>age</code>, <code>seasons_played</code>, <code>shoots</code> (shooting hand), <code>career_PTS</code> (career points), <code>salary</code> and <code>position</code>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="eda-1.html#cb30-1" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb30-2"><a href="eda-1.html#cb30-2" tabindex="-1"></a></span>
<span id="cb30-3"><a href="eda-1.html#cb30-3" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb30-4"><a href="eda-1.html#cb30-4" tabindex="-1"></a>  <span class="fu">select</span>(age, seasons_played, shoots, career_PTS, salary, <span class="fu">contains</span>(<span class="st">&quot;position&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb30-5"><a href="eda-1.html#cb30-5" tabindex="-1"></a>         <span class="fu">tbl_summary</span>(</span>
<span id="cb30-6"><a href="eda-1.html#cb30-6" tabindex="-1"></a>           <span class="at">statistic =</span> <span class="fu">all_continuous</span>() <span class="sc">~</span> <span class="fu">c</span>(<span class="st">&quot;{mean} ({min}, {max})&quot;</span>)) </span></code></pre></div>
<div id="olbnnlcycd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#olbnnlcycd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#olbnnlcycd thead, #olbnnlcycd tbody, #olbnnlcycd tfoot, #olbnnlcycd tr, #olbnnlcycd td, #olbnnlcycd th {
  border-style: none;
}

#olbnnlcycd p {
  margin: 0;
  padding: 0;
}

#olbnnlcycd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#olbnnlcycd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#olbnnlcycd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#olbnnlcycd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#olbnnlcycd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#olbnnlcycd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#olbnnlcycd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#olbnnlcycd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#olbnnlcycd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#olbnnlcycd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#olbnnlcycd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#olbnnlcycd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#olbnnlcycd .gt_spanner_row {
  border-bottom-style: hidden;
}

#olbnnlcycd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#olbnnlcycd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#olbnnlcycd .gt_from_md > :first-child {
  margin-top: 0;
}

#olbnnlcycd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#olbnnlcycd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#olbnnlcycd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#olbnnlcycd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#olbnnlcycd .gt_row_group_first td {
  border-top-width: 2px;
}

#olbnnlcycd .gt_row_group_first th {
  border-top-width: 2px;
}

#olbnnlcycd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#olbnnlcycd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#olbnnlcycd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#olbnnlcycd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#olbnnlcycd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#olbnnlcycd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#olbnnlcycd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#olbnnlcycd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#olbnnlcycd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#olbnnlcycd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#olbnnlcycd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#olbnnlcycd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#olbnnlcycd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#olbnnlcycd .gt_left {
  text-align: left;
}

#olbnnlcycd .gt_center {
  text-align: center;
}

#olbnnlcycd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#olbnnlcycd .gt_font_normal {
  font-weight: normal;
}

#olbnnlcycd .gt_font_bold {
  font-weight: bold;
}

#olbnnlcycd .gt_font_italic {
  font-style: italic;
}

#olbnnlcycd .gt_super {
  font-size: 65%;
}

#olbnnlcycd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#olbnnlcycd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#olbnnlcycd .gt_indent_1 {
  text-indent: 5px;
}

#olbnnlcycd .gt_indent_2 {
  text-indent: 10px;
}

#olbnnlcycd .gt_indent_3 {
  text-indent: 15px;
}

#olbnnlcycd .gt_indent_4 {
  text-indent: 20px;
}

#olbnnlcycd .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;Characteristic&lt;/strong&gt;"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="&lt;strong&gt;N = 9,728&lt;/strong&gt;&lt;span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/span&gt;"><strong>N = 9,728</strong><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="label" class="gt_row gt_left">age</td>
<td headers="stat_0" class="gt_row gt_center">27.0 (18.0, 42.0)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">seasons_played</td>
<td headers="stat_0" class="gt_row gt_center">9 (1, 21)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">shoots</td>
<td headers="stat_0" class="gt_row gt_center"></td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Left</td>
<td headers="stat_0" class="gt_row gt_center">856 (8.8%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Left Right</td>
<td headers="stat_0" class="gt_row gt_center">7 (&lt;0.1%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">    Right</td>
<td headers="stat_0" class="gt_row gt_center">8,865 (91%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">career_PTS</td>
<td headers="stat_0" class="gt_row gt_center">8.9 (0.0, 30.1)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">salary</td>
<td headers="stat_0" class="gt_row gt_center">4,072,633 (2,706, 34,682,550)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">position_center</td>
<td headers="stat_0" class="gt_row gt_center">2,986 (31%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">position_sf</td>
<td headers="stat_0" class="gt_row gt_center">3,222 (33%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">position_pf</td>
<td headers="stat_0" class="gt_row gt_center">3,501 (36%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">position_sg</td>
<td headers="stat_0" class="gt_row gt_center">3,447 (35%)</td></tr>
    <tr><td headers="label" class="gt_row gt_left">position_pg</td>
<td headers="stat_0" class="gt_row gt_center">2,489 (26%)</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="2"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> Mean (Range); n (%)</td>
    </tr>
  </tfoot>
</table>
</div>
<p>To explore correlations between all numeric variables in the data set, we can inspect the <em>correlation matrix</em> or plot it.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="eda-1.html#cb31-1" tabindex="-1"></a><span class="co"># selct only numeric variables and remove missing values</span></span>
<span id="cb31-2"><a href="eda-1.html#cb31-2" tabindex="-1"></a>data_nba_numeric <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="eda-1.html#cb31-3" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="eda-1.html#cb31-4" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb31-5"><a href="eda-1.html#cb31-5" tabindex="-1"></a></span>
<span id="cb31-6"><a href="eda-1.html#cb31-6" tabindex="-1"></a><span class="co"># as a matrix using the corrr package</span></span>
<span id="cb31-7"><a href="eda-1.html#cb31-7" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;corrr&quot;</span>)</span>
<span id="cb31-8"><a href="eda-1.html#cb31-8" tabindex="-1"></a></span>
<span id="cb31-9"><a href="eda-1.html#cb31-9" tabindex="-1"></a>corrmatrix <span class="ot">&lt;-</span> data_nba_numeric <span class="sc">%&gt;%</span></span>
<span id="cb31-10"><a href="eda-1.html#cb31-10" tabindex="-1"></a>  <span class="fu">correlate</span>() <span class="sc">%&gt;%</span> <span class="co"># create correlation data frame (cor_df)</span></span>
<span id="cb31-11"><a href="eda-1.html#cb31-11" tabindex="-1"></a>  <span class="fu">rearrange</span>() <span class="sc">%&gt;%</span> <span class="co"># rearrange by correlations</span></span>
<span id="cb31-12"><a href="eda-1.html#cb31-12" tabindex="-1"></a>  <span class="fu">shave</span>() <span class="co"># remove the upper triangle of the matrix</span></span>
<span id="cb31-13"><a href="eda-1.html#cb31-13" tabindex="-1"></a></span>
<span id="cb31-14"><a href="eda-1.html#cb31-14" tabindex="-1"></a><span class="fu">fashion</span>(corrmatrix) <span class="co"># gives a clean display of the matrix</span></span></code></pre></div>
<pre><code>##               term career_AST position_pg career_PTS career_G career_WS
## 1       career_AST                                                     
## 2      position_pg        .61                                          
## 3       career_PTS        .61         .08                              
## 4         career_G        .47         .04        .65                   
## 5        career_WS        .52        -.01        .76      .83          
## 6   seasons_played        .33         .04        .48      .79       .61
## 7      position_sg        .19         .22        .12      .09       .01
## 8           salary        .35        -.04        .60      .48       .59
## 9              age        .18         .03        .18      .49       .36
## 10     position_sf       -.08        -.33        .12      .13       .07
## 11      season_end        .01         .01        .04     -.17      -.09
## 12    season_start        .01         .01        .04     -.17      -.09
## 13          height       -.31        -.46       -.01     -.02      -.00
## 14     position_pf       -.29        -.44        .01      .11       .12
## 15 position_center       -.36        -.39       -.10      .04       .08
## 16          weight       -.49        -.66       -.06     -.03       .05
##    seasons_played position_sg salary  age position_sf season_end season_start
## 1                                                                            
## 2                                                                            
## 3                                                                            
## 4                                                                            
## 5                                                                            
## 6                                                                            
## 7             .09                                                            
## 8             .41        -.03                                                
## 9             .26         .03    .25                                         
## 10            .12         .18    .03  .03                                    
## 11            .00         .02    .16 -.07        -.04                        
## 12            .00         .02    .16 -.07        -.04       1.00             
## 13           -.03        -.03    .03 -.04         .30        .02          .02
## 14            .12        -.46    .09  .03         .04       -.00         -.00
## 15            .07        -.49    .10  .04        -.37       -.06         -.06
## 16            .04        -.43    .12 -.07        -.01        .04          .04
##    height position_pf position_center weight
## 1                                           
## 2                                           
## 3                                           
## 4                                           
## 5                                           
## 6                                           
## 7                                           
## 8                                           
## 9                                           
## 10                                          
## 11                                          
## 12                                          
## 13                                          
## 14    .15                                   
## 15    .12         .33                       
## 16    .41         .45             .66</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="eda-1.html#cb33-1" tabindex="-1"></a><span class="co"># or plot it using a ggplot approach</span></span>
<span id="cb33-2"><a href="eda-1.html#cb33-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;ggcorrplot&quot;</span>)</span>
<span id="cb33-3"><a href="eda-1.html#cb33-3" tabindex="-1"></a></span>
<span id="cb33-4"><a href="eda-1.html#cb33-4" tabindex="-1"></a>corrmatrix <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">cor</span>(data_nba_numeric), <span class="dv">1</span>) <span class="co"># create correlation matrix</span></span>
<span id="cb33-5"><a href="eda-1.html#cb33-5" tabindex="-1"></a></span>
<span id="cb33-6"><a href="eda-1.html#cb33-6" tabindex="-1"></a><span class="fu">ggcorrplot</span>(corrmatrix,</span>
<span id="cb33-7"><a href="eda-1.html#cb33-7" tabindex="-1"></a>           <span class="at">method =</span> <span class="st">&quot;circle&quot;</span>,</span>
<span id="cb33-8"><a href="eda-1.html#cb33-8" tabindex="-1"></a>           <span class="at">type=</span><span class="st">&quot;lower&quot;</span>) <span class="co"># plots the matrix</span></span></code></pre></div>
<p><img src="_main_files/figure-html/explore_dt_2-1.png" width="672" /></p>
<p>This is interesting. For example, it seems that the weight is strongly correlated with the position a player occupies. Centers are heavy, point guards are light weights. We also see that most performance metrics (<code>career_*</code>) are correlated with each other and also with salary. Good players seem to be good in many things, and good players seem to be paid more.</p>
</div>
<div id="explore-individual-variables" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Explore individual variables<a href="eda-1.html#explore-individual-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have a feeling for the whole data set, we want to explore individual variables. To keep it focused, we will follow up on the question of whether players that perform better are also paid more, for now limiting ourselves to the relationship between the average points per game and the received salary. We will also explore if this relationship depends on the position a player occupies.</p>
<p>Why might the position be relevant for this? We can expect that the justification for the salary differs by the occupied position, i.e. the role a player fills for the team. To explore this we will limit ourselves to two positions for now, point guards and centers. Point guards are really good passers. Their salary may thus depend more on enabling others to score and not so much on their own point average. Centers on the other hand will mostly be on the receiving end, transforming passes into points. For them their salary may more strongly depend on the actual points they are able to score. This clearly still is an oversimplification of how basketball works but may be a first avenue to approach the relationship between salary and point average.</p>
<p>Let us first build a new variable that discerns between centers, point guards and all other positions and that is easier to work with when comparing the distributions. As we have seen above, there are players that play several positions. We should first check if there are centers who are also point guards, and vice versa. For simple cross tabulations, we can use the base R function <code>table()</code>.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="eda-1.html#cb34-1" tabindex="-1"></a><span class="fu">table</span>(data_nba<span class="sc">$</span>position_center, data_nba<span class="sc">$</span>position_pg)</span></code></pre></div>
<pre><code>##    
##        0    1
##   0 4253 2489
##   1 2986    0</code></pre>
<p>We can see that there are <span class="math inline">\(0\)</span> observations for which both variables equal <span class="math inline">\(1\)</span>. This saves us some headaches and we can construct the new variable in a straightforward way.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="eda-1.html#cb36-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="eda-1.html#cb36-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">role =</span> <span class="fu">case_when</span>(</span>
<span id="cb36-3"><a href="eda-1.html#cb36-3" tabindex="-1"></a>    position_pg <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;pg&quot;</span>,</span>
<span id="cb36-4"><a href="eda-1.html#cb36-4" tabindex="-1"></a>    position_center <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb36-5"><a href="eda-1.html#cb36-5" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;other&quot;</span></span>
<span id="cb36-6"><a href="eda-1.html#cb36-6" tabindex="-1"></a>  ))</span></code></pre></div>
<p>Let us start with the <code>salary</code> variable. There are several possible approaches to exploring the distributions of our variables of interest. We could for one use functions like <code>skim()</code> or <code>summary()</code>, but we can also construct a table with some summary statistics of interest ourselves using <code>summarise()</code>.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="eda-1.html#cb37-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="eda-1.html#cb37-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(salary),</span>
<span id="cb37-3"><a href="eda-1.html#cb37-3" tabindex="-1"></a>            <span class="at">p25 =</span> <span class="fu">quantile</span>(salary, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb37-4"><a href="eda-1.html#cb37-4" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(salary),</span>
<span id="cb37-5"><a href="eda-1.html#cb37-5" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">mean</span>(salary),</span>
<span id="cb37-6"><a href="eda-1.html#cb37-6" tabindex="-1"></a>            <span class="at">p75 =</span> <span class="fu">quantile</span>(salary, <span class="at">probs =</span> <span class="fl">0.75</span>),</span>
<span id="cb37-7"><a href="eda-1.html#cb37-7" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(salary)</span>
<span id="cb37-8"><a href="eda-1.html#cb37-8" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##     min    p25  median     mean     p75      max
##   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1  2706 947907 2240000 4072633. 5408700 34682550</code></pre>
<p>This already gives us some indication on the distribution of the variable but we may ease the interpretation using plots.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="eda-1.html#cb39-1" tabindex="-1"></a><span class="co"># using a boxplot</span></span>
<span id="cb39-2"><a href="eda-1.html#cb39-2" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="eda-1.html#cb39-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> salary)) <span class="sc">+</span></span>
<span id="cb39-4"><a href="eda-1.html#cb39-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_distribution_salary-1.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="eda-1.html#cb40-1" tabindex="-1"></a><span class="co"># using a histogram</span></span>
<span id="cb40-2"><a href="eda-1.html#cb40-2" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb40-3"><a href="eda-1.html#cb40-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> salary)) <span class="sc">+</span></span>
<span id="cb40-4"><a href="eda-1.html#cb40-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_distribution_salary-2.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="eda-1.html#cb41-1" tabindex="-1"></a><span class="co"># using a density plot</span></span>
<span id="cb41-2"><a href="eda-1.html#cb41-2" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb41-3"><a href="eda-1.html#cb41-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> salary)) <span class="sc">+</span></span>
<span id="cb41-4"><a href="eda-1.html#cb41-4" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_distribution_salary-3.png" width="672" /></p>
<p>The different approaches to visualizing the distribution for <code>salary</code> basically show us the same thing, the distribution is heavily skewed as we see many players with comparably modest salaries and increasingly few with very high compensations. We should keep this in mind when we turn to building a regression model.</p>
<p>We can also compute and visualize the distribution by the role a player fills. Using <code>summarise()</code> with <code>group_by()</code> enables us to get the same measurements as above, but separately for each category of <code>role</code>.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="eda-1.html#cb42-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="eda-1.html#cb42-2" tabindex="-1"></a>  <span class="fu">group_by</span>(role) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="eda-1.html#cb42-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(salary),</span>
<span id="cb42-4"><a href="eda-1.html#cb42-4" tabindex="-1"></a>            <span class="at">p25 =</span> <span class="fu">quantile</span>(salary, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb42-5"><a href="eda-1.html#cb42-5" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(salary),</span>
<span id="cb42-6"><a href="eda-1.html#cb42-6" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">mean</span>(salary),</span>
<span id="cb42-7"><a href="eda-1.html#cb42-7" tabindex="-1"></a>            <span class="at">p75 =</span> <span class="fu">quantile</span>(salary, <span class="at">probs =</span> <span class="fl">0.75</span>),</span>
<span id="cb42-8"><a href="eda-1.html#cb42-8" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(salary)</span>
<span id="cb42-9"><a href="eda-1.html#cb42-9" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 7
##   role     min     p25  median     mean     p75      max
##   &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
## 1 center  4529 1115340 2880000 4770707. 6400000 28000000
## 2 other   2706  863640 2000000 3757860. 5000000 33285709
## 3 pg      2853  895248 2100000 3773028. 5000000 34682550</code></pre>
<p>For plotting by role, let us limit ourselves to boxplots.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="eda-1.html#cb44-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="eda-1.html#cb44-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> salary, <span class="at">colour =</span> role)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="eda-1.html#cb44-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/plot_distribution_salary_role-1.png" width="672" /></p>
<p>We can see, that while point guards barely differ from their peers, centers do. The average salary for centers is higher compared to all other roles. At the same time while many of them reach very high salaries, the top earner spots are reserved for other roles. The highest earning point guard makes almost <span class="math inline">\(6,700,000\$\)</span> more compared to the highest earning center; a substantial difference. As the boxplot indicates, the players with such extreme salaries are also in the extreme minority so we should not over interpret this finding. Still, the puzzle seems to be more complex than we thought.</p>
<p>Let us turn to <code>career_PTS</code> now and repeat the analysis from above.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="eda-1.html#cb45-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="eda-1.html#cb45-2" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(career_PTS),</span>
<span id="cb45-3"><a href="eda-1.html#cb45-3" tabindex="-1"></a>            <span class="at">p25 =</span> <span class="fu">quantile</span>(career_PTS, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb45-4"><a href="eda-1.html#cb45-4" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(career_PTS),</span>
<span id="cb45-5"><a href="eda-1.html#cb45-5" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">mean</span>(career_PTS),</span>
<span id="cb45-6"><a href="eda-1.html#cb45-6" tabindex="-1"></a>            <span class="at">p75 =</span> <span class="fu">quantile</span>(career_PTS, <span class="at">probs =</span> <span class="fl">0.75</span>),</span>
<span id="cb45-7"><a href="eda-1.html#cb45-7" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(career_PTS)</span>
<span id="cb45-8"><a href="eda-1.html#cb45-8" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##     min   p25 median  mean   p75   max
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     0   5.1      8  8.91    12  30.1</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="eda-1.html#cb47-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb47-2"><a href="eda-1.html#cb47-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> career_PTS)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="eda-1.html#cb47-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/summarise_distribution_points-1.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="eda-1.html#cb48-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="eda-1.html#cb48-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> career_PTS)) <span class="sc">+</span></span>
<span id="cb48-3"><a href="eda-1.html#cb48-3" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">50</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/summarise_distribution_points-2.png" width="672" /></p>
<p>While the distribution of average career points is also somewhat skewed, it is way less so compared to <code>salary</code>.</p>
<p>We should also look at <code>career_PTS</code> by role.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="eda-1.html#cb49-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="eda-1.html#cb49-2" tabindex="-1"></a>  <span class="fu">group_by</span>(role) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="eda-1.html#cb49-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">min =</span> <span class="fu">min</span>(career_PTS),</span>
<span id="cb49-4"><a href="eda-1.html#cb49-4" tabindex="-1"></a>            <span class="at">p25 =</span> <span class="fu">quantile</span>(career_PTS, <span class="at">probs =</span> <span class="fl">0.25</span>),</span>
<span id="cb49-5"><a href="eda-1.html#cb49-5" tabindex="-1"></a>            <span class="at">median =</span> <span class="fu">median</span>(career_PTS),</span>
<span id="cb49-6"><a href="eda-1.html#cb49-6" tabindex="-1"></a>            <span class="at">mean =</span> <span class="fu">mean</span>(career_PTS),</span>
<span id="cb49-7"><a href="eda-1.html#cb49-7" tabindex="-1"></a>            <span class="at">p75 =</span> <span class="fu">quantile</span>(career_PTS, <span class="at">probs =</span> <span class="fl">0.75</span>),</span>
<span id="cb49-8"><a href="eda-1.html#cb49-8" tabindex="-1"></a>            <span class="at">max =</span> <span class="fu">max</span>(career_PTS)</span>
<span id="cb49-9"><a href="eda-1.html#cb49-9" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 7
##   role     min   p25 median  mean   p75   max
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 center     0   4.5    7    8.17  11.2  24.3
## 2 other      0   5.2    8.2  9.04  12    30.1
## 3 pg         0   6.3    8.9  9.57  12.6  26.7</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="eda-1.html#cb51-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="eda-1.html#cb51-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> career_PTS, <span class="at">colour =</span> role)) <span class="sc">+</span></span>
<span id="cb51-3"><a href="eda-1.html#cb51-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/summarise_distribution_points_role-1.png" width="672" /></p>
<p>Centers actually make less points on average compared to all other roles and point guards score the highest on average. That is an interesting puzzle to explore. It seems that point guards are paid a little less even though they make a few more points on average. What does this tell us? We can not be sure yet, but it seems that the relationship between points and salary gets translated differently based on the role a player occupies.</p>
<p>Let us now explore this relationship between the two variables, which will be central to our analysis from now on. We can use a scatter plot to inspect the shared distribution of both variables. We also added a line describing the relationship. This actually is a regression line and we will talk about it in detail <a href="lin-t-1.html#lin-t-1">later</a>, for now let us just accept that the direction of the line tells us how both variables are related.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="eda-1.html#cb52-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="eda-1.html#cb52-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> salary, <span class="at">x =</span> career_PTS)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="eda-1.html#cb52-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb52-4"><a href="eda-1.html#cb52-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/salary_points_scatter-1.png" width="672" /></p>
<p>We can see that there is a positive relationship between the average score and the earned salary. The more points a player scores the more he earns, on average.</p>
<p>We can build the same plot by <code>role</code>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="eda-1.html#cb53-1" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="eda-1.html#cb53-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> salary, <span class="at">x =</span> career_PTS, <span class="at">colour =</span> role)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="eda-1.html#cb53-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb53-4"><a href="eda-1.html#cb53-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/salary_points_role_scatter-1.png" width="672" /></p>
<p>Let’s reflect a moment what we can learn from all this.</p>
<p>First, there seems to be a somewhat linear relationship between how many points a player scores and how much they are paid. This also holds true for point guards just as much as for non-point guards. However, the average salary for point guards is lower in comparison. We also learn that the link between salary and points is stronger for centers as the red line is somewhat steeper. They seem to be paid more, the more they score.</p>
</div>
<div id="moving-on" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Moving on<a href="eda-1.html#moving-on" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We have now explored our data and gained a better understanding of the variables of interest. We also have identified an interesting puzzle to explre further, and we will pick up on this over the seminar. In <a href="dags-1.html#dags-1">week 4</a>, we will construct a theoretical model that tries to explain the relationship between points and salary and in <a href="lin-a.html#lin-a">week 8</a> we will then compute a linear regression model that will hopefully shed some more light on our puzzle. Linear regression is all about further exploring the relationship between two or more variables, one outcome (often called <code>y</code>) and one or multiple independent variables (often called <code>x</code>). Independent variables have many names. They are sometimes called “covariates”; “predictors”; “exposure”, depending on the context.</p>
<p>There are a number of cool things that regression can do for us that simple EDA cannot:</p>
<ol style="list-style-type: decimal">
<li><p>It can model the relationship between two variables while considering simultaneously the potential influence of other factors. Imagine we are interested in the effect of points per game on salary regardless of position, season, team or other independent variables. With regression we can estimate how much more a player would earn every season if he scored 10 more points a game (regardless of other factors as for example the position he plays).</p></li>
<li><p>It can assess what explains the effect of one variable on another (i.e. mediation). Maybe we find that point guards earn less and we want to know why. Is it because they score less? Is it because they play less time on average?</p></li>
<li><p>It can be used to predict salaries for players for whom we don’t know the salary or even for hypothetical players. We could also look at the performance trend of players and predict whether they earn more next season or not.</p></li>
</ol>
<p>We will address all these applications over the course of the seminar.</p>
</div>
<div id="further-resources" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Further resources<a href="eda-1.html#further-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="resources">
<ul>
<li><a href="https://tuos-bio-data-skills.github.io/intro-eda-book/index.html">Exploratory Data Analysis with R</a>, a book that covers the basics of data visualization, manipulation, and analysis using R and the tidyverse package.</li>
<li><a href="https://www.pluralsight.com/guides/exploratory-data-analysis-in-r">Exploratory Data Analysis in R with Tidyverse</a>, a guide that shows how to use the tidyverse package to perform common EDA tasks such as importing, cleaning, summarizing, and plotting data.</li>
<li><a href="https://r4ds.had.co.nz/data-visualisation.html">Data Visualization with ggplot2</a>, a chapter from the book R for Data Science that explains how to create and customize different types of plots using the ggplot2 package.</li>
<li><a href="https://r4ds.had.co.nz/transform.html">Data Transformation with dplyr</a>, another chapter from the book R for Data Science that demonstrates how to use the dplyr package to manipulate data frames, filter rows, select columns, create new variables, and more.</li>
<li><a href="https://bookdown.org/rdpeng/exdata/">Exploratory Data Analysis with R - Bookdown</a></li>
<li><a href="https://www.statology.org/exploratory-data-analysis-in-r/">How to Perform Exploratory Data Analysis in R (With Example)</a></li>
</ul>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-sem.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="eda-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02-EDA-1.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
