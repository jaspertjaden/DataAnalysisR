<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 10 Mediation | Data Analysis with R for Social Scientists</title>
  <meta name="description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content=" 10 Mediation | Data Analysis with R for Social Scientists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="In this course, you will learn how to analyse data using regression in R." />
  <meta name="github-repo" content="jaspertjaden/DataAnalysisR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 10 Mediation | Data Analysis with R for Social Scientists" />
  
  <meta name="twitter:description" content="In this course, you will learn how to analyse data using regression in R." />
  

<meta name="author" content="Jakob Tures &amp; Jasper Tjaden" />


<meta name="date" content="2023-09-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lin-e.html"/>
<link rel="next" href="pm-t.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i><b>0.1</b> Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-sem.html"><a href="intro-sem.html"><i class="fa fa-check"></i><b>1</b> Introduction to Seminar</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-sem.html"><a href="intro-sem.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="intro-sem.html"><a href="intro-sem.html#why-should-i-take-this-course"><i class="fa fa-check"></i><b>1.2</b> Why should I take this course?</a></li>
<li class="chapter" data-level="1.3" data-path="intro-sem.html"><a href="intro-sem.html#objectives"><i class="fa fa-check"></i><b>1.3</b> Objectives</a></li>
<li class="chapter" data-level="1.4" data-path="intro-sem.html"><a href="intro-sem.html#what-is-not-covered"><i class="fa fa-check"></i><b>1.4</b> What is not covered</a></li>
<li class="chapter" data-level="1.5" data-path="intro-sem.html"><a href="intro-sem.html#prerequisites"><i class="fa fa-check"></i><b>1.5</b> Prerequisites</a></li>
<li class="chapter" data-level="1.6" data-path="intro-sem.html"><a href="intro-sem.html#structure"><i class="fa fa-check"></i><b>1.6</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="eda-1.html"><a href="eda-1.html"><i class="fa fa-check"></i><b>2</b> Exploratory Data Analysis - I</a>
<ul>
<li class="chapter" data-level="2.1" data-path="eda-1.html"><a href="eda-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="eda-1.html"><a href="eda-1.html#r-functions-covered-this-week"><i class="fa fa-check"></i><b>2.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="2.3" data-path="eda-1.html"><a href="eda-1.html#why-is-eda-so-important"><i class="fa fa-check"></i><b>2.3</b> Why is EDA so important?</a></li>
<li class="chapter" data-level="2.4" data-path="eda-1.html"><a href="eda-1.html#importing-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Importing data into R</a></li>
<li class="chapter" data-level="2.5" data-path="eda-1.html"><a href="eda-1.html#import-data-into-r"><i class="fa fa-check"></i><b>2.5</b> Import data into R</a></li>
<li class="chapter" data-level="2.6" data-path="eda-1.html"><a href="eda-1.html#merge-datasets"><i class="fa fa-check"></i><b>2.6</b> Merge datasets</a></li>
<li class="chapter" data-level="2.7" data-path="eda-1.html"><a href="eda-1.html#clean-dataset"><i class="fa fa-check"></i><b>2.7</b> Clean dataset</a></li>
<li class="chapter" data-level="2.8" data-path="eda-1.html"><a href="eda-1.html#change-variables"><i class="fa fa-check"></i><b>2.8</b> change variables</a></li>
<li class="chapter" data-level="2.9" data-path="eda-1.html"><a href="eda-1.html#explore-the-whole-dataset"><i class="fa fa-check"></i><b>2.9</b> Explore the whole dataset</a></li>
<li class="chapter" data-level="2.10" data-path="eda-1.html"><a href="eda-1.html#explore-individual-variables"><i class="fa fa-check"></i><b>2.10</b> explore individual variables</a></li>
<li class="chapter" data-level="2.11" data-path="eda-1.html"><a href="eda-1.html#further-resources"><i class="fa fa-check"></i><b>2.11</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda-2.html"><a href="eda-2.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis - II</a>
<ul>
<li class="chapter" data-level="3.1" data-path="eda-2.html"><a href="eda-2.html#markdown-introduction"><i class="fa fa-check"></i><b>3.1</b> Markdown Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="eda-2.html"><a href="eda-2.html#what-is-r-markdown"><i class="fa fa-check"></i><b>3.2</b> What is R Markdown?</a></li>
<li class="chapter" data-level="3.3" data-path="eda-2.html"><a href="eda-2.html#applying-edawvsown-data"><i class="fa fa-check"></i><b>3.3</b> Applying EDA(WVS/own data)</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="eda-2.html"><a href="eda-2.html#exercise---1"><i class="fa fa-check"></i><b>3.3.1</b> Exercise - 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dags-1.html"><a href="dags-1.html"><i class="fa fa-check"></i><b>4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dags-1.html"><a href="dags-1.html#objectives-2"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="dags-1.html"><a href="dags-1.html#functions-covered"><i class="fa fa-check"></i><b>4.2</b> Functions Covered</a></li>
<li class="chapter" data-level="4.3" data-path="dags-1.html"><a href="dags-1.html#modelling"><i class="fa fa-check"></i><b>4.3</b> Modelling</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dags-1.html"><a href="dags-1.html#what-is-modelling"><i class="fa fa-check"></i><b>4.3.1</b> What is modelling?</a></li>
<li class="chapter" data-level="4.3.2" data-path="dags-1.html"><a href="dags-1.html#estimating-effects-vs.-prediction"><i class="fa fa-check"></i><b>4.3.2</b> Estimating effects vs. prediction</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dags-1.html"><a href="dags-1.html#dags"><i class="fa fa-check"></i><b>4.4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dags-1.html"><a href="dags-1.html#directed-acyclical-graphs"><i class="fa fa-check"></i><b>4.4.1</b> Directed acyclical graphs</a></li>
<li class="chapter" data-level="4.4.2" data-path="dags-1.html"><a href="dags-1.html#patterns-of-relationships"><i class="fa fa-check"></i><b>4.4.2</b> Patterns of relationships</a></li>
<li class="chapter" data-level="4.4.3" data-path="dags-1.html"><a href="dags-1.html#adjustment-set"><i class="fa fa-check"></i><b>4.4.3</b> Adjustment set</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dags-1.html"><a href="dags-1.html#nba-dag"><i class="fa fa-check"></i><b>4.5</b> NBA DAG</a></li>
<li class="chapter" data-level="4.6" data-path="dags-1.html"><a href="dags-1.html#resources"><i class="fa fa-check"></i><b>4.6</b> Resources</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dags-1.html"><a href="dags-1.html#dagitty.net"><i class="fa fa-check"></i><b>4.6.1</b> dagitty.net</a></li>
<li class="chapter" data-level="4.6.2" data-path="dags-1.html"><a href="dags-1.html#how-to-use-dagitty"><i class="fa fa-check"></i><b>4.6.2</b> How to use dagitty()</a></li>
<li class="chapter" data-level="4.6.3" data-path="dags-1.html"><a href="dags-1.html#more-on-dags"><i class="fa fa-check"></i><b>4.6.3</b> More on DAGs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lin-t-1.html"><a href="lin-t-1.html"><i class="fa fa-check"></i><b>5</b> Linear Regression Theory I: Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lin-t-1.html"><a href="lin-t-1.html#objectives-3"><i class="fa fa-check"></i><b>5.1</b> Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="lin-t-1.html"><a href="lin-t-1.html#what-is-linear-regression"><i class="fa fa-check"></i><b>5.2</b> What is Linear Regression</a></li>
<li class="chapter" data-level="5.3" data-path="lin-t-1.html"><a href="lin-t-1.html#examplary-research-question-data"><i class="fa fa-check"></i><b>5.3</b> Examplary research question &amp; data</a></li>
<li class="chapter" data-level="5.4" data-path="lin-t-1.html"><a href="lin-t-1.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.4</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lin-t-1.html"><a href="lin-t-1.html#regression-formula"><i class="fa fa-check"></i><b>5.4.1</b> Regression Formula</a></li>
<li class="chapter" data-level="5.4.2" data-path="lin-t-1.html"><a href="lin-t-1.html#regressing-grade-on-hours"><i class="fa fa-check"></i><b>5.4.2</b> Regressing <code>grade</code> on <code>hours</code></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lin-t-1.html"><a href="lin-t-1.html#moving-on"><i class="fa fa-check"></i><b>5.5</b> Moving on</a></li>
<li class="chapter" data-level="5.6" data-path="lin-t-1.html"><a href="lin-t-1.html#further-resources-1"><i class="fa fa-check"></i><b>5.6</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-t-2.html"><a href="lin-t-2.html"><i class="fa fa-check"></i><b>6</b> Linear Regression Theory II: Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lin-t-2.html"><a href="lin-t-2.html#objectives-4"><i class="fa fa-check"></i><b>6.1</b> Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="lin-t-2.html"><a href="lin-t-2.html#multiple-linear-regression"><i class="fa fa-check"></i><b>6.2</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-additional-metric-variables"><i class="fa fa-check"></i><b>6.2.1</b> Adding additional metric variables</a></li>
<li class="chapter" data-level="6.2.2" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-dummy-variables"><i class="fa fa-check"></i><b>6.2.2</b> Adding dummy variables</a></li>
<li class="chapter" data-level="6.2.3" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-categorical-variables"><i class="fa fa-check"></i><b>6.2.3</b> Adding categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="lin-t-2.html"><a href="lin-t-2.html#returning-to-our-research-question"><i class="fa fa-check"></i><b>6.3</b> Returning to our research question</a></li>
<li class="chapter" data-level="6.4" data-path="lin-t-2.html"><a href="lin-t-2.html#adressing-the-uncertainty"><i class="fa fa-check"></i><b>6.4</b> Adressing the uncertainty</a></li>
<li class="chapter" data-level="6.5" data-path="lin-t-2.html"><a href="lin-t-2.html#moving-on-1"><i class="fa fa-check"></i><b>6.5</b> Moving on</a></li>
<li class="chapter" data-level="6.6" data-path="lin-t-2.html"><a href="lin-t-2.html#further-resources-2"><i class="fa fa-check"></i><b>6.6</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="log-t-3.html"><a href="log-t-3.html"><i class="fa fa-check"></i><b>7</b> Linear Regression Theory III: Diagnostics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="log-t-3.html"><a href="log-t-3.html#objectives-5"><i class="fa fa-check"></i><b>7.1</b> Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="log-t-3.html"><a href="log-t-3.html#model-fit"><i class="fa fa-check"></i><b>7.2</b> Model fit</a></li>
<li class="chapter" data-level="7.3" data-path="log-t-3.html"><a href="log-t-3.html#regression-diagnostics"><i class="fa fa-check"></i><b>7.3</b> Regression diagnostics</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="log-t-3.html"><a href="log-t-3.html#linearity"><i class="fa fa-check"></i><b>7.3.1</b> Linearity</a></li>
<li class="chapter" data-level="7.3.2" data-path="log-t-3.html"><a href="log-t-3.html#normally-distributed-residuals"><i class="fa fa-check"></i><b>7.3.2</b> Normally distributed residuals</a></li>
<li class="chapter" data-level="7.3.3" data-path="log-t-3.html"><a href="log-t-3.html#homoscedasticity"><i class="fa fa-check"></i><b>7.3.3</b> Homoscedasticity</a></li>
<li class="chapter" data-level="7.3.4" data-path="log-t-3.html"><a href="log-t-3.html#no-overly-influential-data-points"><i class="fa fa-check"></i><b>7.3.4</b> No overly influential data points</a></li>
<li class="chapter" data-level="7.3.5" data-path="log-t-3.html"><a href="log-t-3.html#no-multicollinearity"><i class="fa fa-check"></i><b>7.3.5</b> No (multi)collinearity</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="log-t-3.html"><a href="log-t-3.html#returning-to-our-research-question-1"><i class="fa fa-check"></i><b>7.4</b> Returning to our research question</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="log-t-3.html"><a href="log-t-3.html#interactions"><i class="fa fa-check"></i><b>7.4.1</b> Interactions</a></li>
<li class="chapter" data-level="7.4.2" data-path="log-t-3.html"><a href="log-t-3.html#regression-diagnostics-revisited"><i class="fa fa-check"></i><b>7.4.2</b> Regression diagnostics (revisited)</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="log-t-3.html"><a href="log-t-3.html#conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a></li>
<li class="chapter" data-level="7.6" data-path="log-t-3.html"><a href="log-t-3.html#further-resources-3"><i class="fa fa-check"></i><b>7.6</b> Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lin-a.html"><a href="lin-a.html"><i class="fa fa-check"></i><b>8</b> Linear Regression - Application</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lin-a.html"><a href="lin-a.html#objectives-6"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="lin-a.html"><a href="lin-a.html#r-functions-covered-this-week-1"><i class="fa fa-check"></i><b>8.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="8.3" data-path="lin-a.html"><a href="lin-a.html#research-question"><i class="fa fa-check"></i><b>8.3</b> Research question</a></li>
<li class="chapter" data-level="8.4" data-path="lin-a.html"><a href="lin-a.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.4</b> Simple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="lin-a.html"><a href="lin-a.html#interpretation"><i class="fa fa-check"></i><b>8.4.1</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="lin-a.html"><a href="lin-a.html#multiple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.5</b> Multiple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="lin-a.html"><a href="lin-a.html#interpretation-1"><i class="fa fa-check"></i><b>8.5.1</b> Interpretation</a></li>
<li class="chapter" data-level="8.5.2" data-path="lin-a.html"><a href="lin-a.html#sidenote-adding-interactions"><i class="fa fa-check"></i><b>8.5.2</b> Sidenote: Adding interactions</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lin-a.html"><a href="lin-a.html#regression-diagnostics-1"><i class="fa fa-check"></i><b>8.6</b> Regression Diagnostics</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="lin-a.html"><a href="lin-a.html#skewed-outcome-variable"><i class="fa fa-check"></i><b>8.6.1</b> Skewed outcome variable</a></li>
<li class="chapter" data-level="8.6.2" data-path="lin-a.html"><a href="lin-a.html#non-linearity"><i class="fa fa-check"></i><b>8.6.2</b> Non-linearity</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="lin-a.html"><a href="lin-a.html#returning-to-our-research-question-2"><i class="fa fa-check"></i><b>8.7</b> Returning to our research question</a></li>
<li class="chapter" data-level="8.8" data-path="lin-a.html"><a href="lin-a.html#moving-on-2"><i class="fa fa-check"></i><b>8.8</b> Moving on</a></li>
<li class="chapter" data-level="8.9" data-path="lin-a.html"><a href="lin-a.html#further-resources-4"><i class="fa fa-check"></i><b>8.9</b> Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lin-e.html"><a href="lin-e.html"><i class="fa fa-check"></i><b>9</b> Linear Regression - Exercises</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lin-e.html"><a href="lin-e.html#exercises"><i class="fa fa-check"></i><b>9.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="med.html"><a href="med.html"><i class="fa fa-check"></i><b>10</b> Mediation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="med.html"><a href="med.html#objectives-7"><i class="fa fa-check"></i><b>10.1</b> Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="med.html"><a href="med.html#r-functions-covered-this-week-2"><i class="fa fa-check"></i><b>10.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="10.3" data-path="med.html"><a href="med.html#further-resources-5"><i class="fa fa-check"></i><b>10.3</b> Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="pm-t.html"><a href="pm-t.html"><i class="fa fa-check"></i><b>11</b> Prediction - Theory</a>
<ul>
<li class="chapter" data-level="11.1" data-path="pm-t.html"><a href="pm-t.html#objectives-8"><i class="fa fa-check"></i><b>11.1</b> Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="pm-t.html"><a href="pm-t.html#r-functions-covered-this-week-3"><i class="fa fa-check"></i><b>11.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="11.3" data-path="pm-t.html"><a href="pm-t.html#how-prediction-works"><i class="fa fa-check"></i><b>11.3</b> How prediction works</a></li>
<li class="chapter" data-level="11.4" data-path="pm-t.html"><a href="pm-t.html#intro-to-machine-learning"><i class="fa fa-check"></i><b>11.4</b> Intro to Machine learning</a></li>
<li class="chapter" data-level="11.5" data-path="pm-t.html"><a href="pm-t.html#further-resources-6"><i class="fa fa-check"></i><b>11.5</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="pm-a.html"><a href="pm-a.html"><i class="fa fa-check"></i><b>12</b> Prediction - Application</a>
<ul>
<li class="chapter" data-level="12.1" data-path="pm-a.html"><a href="pm-a.html#exercises-1"><i class="fa fa-check"></i><b>12.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="log-est.html"><a href="log-est.html"><i class="fa fa-check"></i><b>13</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="log-est.html"><a href="log-est.html#objectives-9"><i class="fa fa-check"></i><b>13.1</b> Objectives</a></li>
<li class="chapter" data-level="13.2" data-path="log-est.html"><a href="log-est.html#functions-covered-in-this-week"><i class="fa fa-check"></i><b>13.2</b> Functions covered in this week</a></li>
<li class="chapter" data-level="13.3" data-path="log-est.html"><a href="log-est.html#basic-concepts"><i class="fa fa-check"></i><b>13.3</b> Basic concepts</a></li>
<li class="chapter" data-level="13.4" data-path="log-est.html"><a href="log-est.html#application"><i class="fa fa-check"></i><b>13.4</b> Application</a></li>
<li class="chapter" data-level="13.5" data-path="log-est.html"><a href="log-est.html#interpretation-2"><i class="fa fa-check"></i><b>13.5</b> Interpretation</a></li>
<li class="chapter" data-level="13.6" data-path="log-est.html"><a href="log-est.html#model-fit-1"><i class="fa fa-check"></i><b>13.6</b> model fit</a></li>
<li class="chapter" data-level="13.7" data-path="log-est.html"><a href="log-est.html#diagnostics"><i class="fa fa-check"></i><b>13.7</b> diagnostics</a></li>
<li class="chapter" data-level="13.8" data-path="log-est.html"><a href="log-est.html#prediction"><i class="fa fa-check"></i><b>13.8</b> prediction</a></li>
<li class="chapter" data-level="13.9" data-path="log-est.html"><a href="log-est.html#mediation-1"><i class="fa fa-check"></i><b>13.9</b> Mediation</a></li>
<li class="chapter" data-level="13.10" data-path="log-est.html"><a href="log-est.html#comparing-linear-and-logistic-regression"><i class="fa fa-check"></i><b>13.10</b> comparing linear and logistic regression</a></li>
<li class="chapter" data-level="13.11" data-path="log-est.html"><a href="log-est.html#logistic-regression-in-machine-learning-context"><i class="fa fa-check"></i><b>13.11</b> logistic regression in Machine Learning context</a></li>
<li class="chapter" data-level="13.12" data-path="log-est.html"><a href="log-est.html#further-resources-7"><i class="fa fa-check"></i><b>13.12</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="out-look.html"><a href="out-look.html"><i class="fa fa-check"></i><b>14</b> Outlook</a>
<ul>
<li class="chapter" data-level="14.1" data-path="out-look.html"><a href="out-look.html#summary-of-what-was-covered-in-course"><i class="fa fa-check"></i><b>14.1</b> Summary of what was covered in course</a></li>
<li class="chapter" data-level="14.2" data-path="out-look.html"><a href="out-look.html#other-outcome-variables"><i class="fa fa-check"></i><b>14.2</b> Other outcome variables</a></li>
<li class="chapter" data-level="14.3" data-path="out-look.html"><a href="out-look.html#data-structures"><i class="fa fa-check"></i><b>14.3</b> Data structures</a></li>
<li class="chapter" data-level="14.4" data-path="out-look.html"><a href="out-look.html#where-to-go-next"><i class="fa fa-check"></i><b>14.4</b> Where to go next</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis with R for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="med" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number"> 10</span> Mediation<a href="med.html#med" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this week, we will introduce to the concept of mediation analysis.</p>
<div id="objectives-7" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Objectives<a href="med.html#objectives-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="objectives">
<ul>
<li>here to be filled</li>
</ul>
</div>
</div>
<div id="r-functions-covered-this-week-2" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> R functions covered this week<a href="med.html#r-functions-covered-this-week-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="functions">
<ul>
<li><code>dagitty()</code> : This function creates and analyzes Directed Acyclic Graphs (DAGs).</li>
<li><code>load()</code> : This function is used to load an R object from a file. It takes a file name as an argument and returns the object stored in the file.</li>
<li><code>mutate()</code> : This function is from the <strong>dplyr</strong> package. It is used to add new columns or modify existing columns in a data frame. It takes a data frame and one or more expressions that define the new or modified columns. It returns a modified data frame.</li>
<li><code>case_when()</code> : This function is from the <strong>dplyr</strong> package. It is used to perform multiple conditional operations in a vectorized way. It takes one or more logical expressions and corresponding values, and returns a vector with the values that match the first true expression.</li>
<li><code>group_by()</code> : This function is from the <strong>dplyr</strong> package. It is used to group a data frame by one or more variables. It takes a data frame and one or more grouping variables, and returns a grouped data frame that can be further manipulated with other <strong>dplyr</strong> functions.</li>
<li><code>summarize()</code> : This function is from the <strong>dplyr</strong> package. It is used to summarize multiple values into a single value. It takes a grouped data frame and one or more expressions that calculate summary statistics, and returns a summarized data frame.</li>
<li><code>ggplot()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create a wide variety of static, dynamic, and interactive graphics in R. The function allows you to specify a mapping from data to aesthetics (color, shape, size) and geometric objects (points, lines, bars). It also allows you to add statistical transformations, coordinate systems, faceting, and themes.</li>
<li><code>geom_bar()</code> : This function is from the <strong>ggplot2</strong> package. It is used to create bar charts in R. It takes a mapping from data to aesthetics and other arguments that control the appearance of the bars, such as stat, width, position, fill, color, etc. It returns a layer that can be added to a ggplot object.</li>
<li><code>ylim()</code> : This function is from the <strong>ggplot2</strong> package. It is used to set the limits of the y-axis in a plot. It takes two numeric values that define the lower and upper limits of the y-axis. It returns a scale object that can be added to a ggplot object.</li>
<li><code>theme_minimal()</code> : This function is from the <strong>ggplot2</strong> package. It is used to apply a minimal theme to a plot. It takes no arguments and returns a theme object that can be added to a ggplot object.</li>
<li><code>lm()</code> : This function is used to fit a linear model to the data. It takes a formula that specifies the dependent and independent variables, and a data frame that contains the variables. It returns a model object that can be used for further analysis.</li>
<li><code>summary()</code> : This function is used to get a summary of a model object, such as the coefficients, standard errors, t-values, p-values, R-squared, and F-statistic. It also provides information on the residuals, such as the minimum, maximum, median, and quartiles.</li>
<li><code>modelsummary()</code> : This function is from the <strong>modelsummary</strong> package. It is used to create tables that summarize multiple models side by side. It takes a list of model objects and other arguments that control the appearance of the table, such as output format, statistics to include, variable labels, etc. It returns an object that can be printed or saved as an image or file.</li>
<li><code>mediate()</code> : This function is from the <strong>mediation</strong> package. It is used to perform causal mediation analysis in R. It takes two model objects that specify the relationship between treatment and mediator (path_a), and between treatment, mediator and outcome (path_b), as well as other arguments that specify the treatment variable, mediator variable, treatment value, etc. It returns an object that contains the results of mediation analysis.</li>
<li><code>summary.mediator()</code> : This function is from the <strong>mediation</strong> package. It is used to get a summary of an object returned by <code>mediate()</code>. It takes an object of class mediator and other arguments that control the confidence intervals and p-values for mediation effects. It prints out a summary of mediation effects.</li>
</ul>
</div>
<p><em>Mediation</em> is a way of using (linear) regression with a different interest in mind.
So far, we have been interested in estimating the effect of an x variable on a
y variable. In our example using NBA data, we were interested in the effect of
‘points scored’ by a player on player salary. We learned how to “adjust” or “condition”
the effect by adding covariates to the model (i.e. control variables). Going back to
our week on DAGs, we saw that we want to control for so-called confounders, i.e.
those variables which have an effect on both x and y. The “adjusted” effect is the
“total causal effect” of x on y.</p>
<p>Mediation now is all about trying to explain “how” x affects y. Mediation analysis
is about identifying the mechanism between x and y. In other words, what share
of the total effect can be explained by something else (i.e. the mediator). When
considering mediation, we can distinguish 3 types of effects:</p>
<ul>
<li>total effect (Effect of x on y (conditional on z), without mediator)</li>
<li>direct effect (Effect of x on y (conditional on z), left after also adjusting for the mediator))</li>
<li>indirect effect (The effect of x on y (conditional on z) which only goes through the mediator.</li>
</ul>
<p>Go back to week X for a refresher.</p>
<p>Let’s turn to our NBA data to make this more tangible. Let’s assume now that we are interested in how a player’s position on the team affects his salary. Maybe guards feel
discriminated because they earn less.</p>
<p>First, we identify the year of the season as a confounder which we want to adjust.
Tactics over the years changed, so the year when games took place had an influence on
whether a player would be assigned to the guard or forward position, for example.
Also, the NBA become more popular, more fans means more money, and higher salaries
for players. As a result, we will include “season_year” as a control variable.</p>
<p>Second, we have a hypothesis that the points scored on average affect the salaries.
In the end, fans come to see spectacular dunks and shots, not rebounds and passes.
Certain positions play further away from the basket (e.g. guards) and thus have a harder time scoring. They also are supposed to pass the ball to the big guys (usually centers).
So maybe, the fact guards and forwards simply score less than centers explains their salary gap. We can test this using mediation.</p>
<p>To visualize this mini-theory and identification strategy, let’s have a look at this DAG.</p>
<p><img src="_main_files/figure-html/dag_final_m-1.png" width="672" /></p>
<p>Now let’s test this out using R.</p>
<ul>
<li>First, we load the data.</li>
<li>Second, we reduce the position variable to 4 categories: Center, Guards, Forwards, and Mixed. As we will see, it is actually not common that players take on several roles even within the same season. This likely affects their <code>salary</code> as well. Players that can play multiple positions may get more playing time and as a result, score more. We are interested, however, in the difference between “pure” guards, forwards and centers, so we will run the analysis excluding “mixed” position players.</li>
<li>Third, we check whether there are any differences in average salaries by position using a graph and a table</li>
<li>Fourth, we run a linear regression, regressing position (as factor variable) on <code>salary</code> while adjusting for year of season.</li>
</ul>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="med.html#cb114-1" tabindex="-1"></a><span class="co"># load packages</span></span>
<span id="cb114-2"><a href="med.html#cb114-2" tabindex="-1"></a></span>
<span id="cb114-3"><a href="med.html#cb114-3" tabindex="-1"></a><span class="fu">load</span>(<span class="at">file =</span> <span class="st">&quot;../datasets/nba/data_nba.RData&quot;</span>)</span>
<span id="cb114-4"><a href="med.html#cb114-4" tabindex="-1"></a></span>
<span id="cb114-5"><a href="med.html#cb114-5" tabindex="-1"></a></span>
<span id="cb114-6"><a href="med.html#cb114-6" tabindex="-1"></a></span>
<span id="cb114-7"><a href="med.html#cb114-7" tabindex="-1"></a><span class="co"># recode &quot;position&quot; variables&quot;</span></span>
<span id="cb114-8"><a href="med.html#cb114-8" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span></span>
<span id="cb114-9"><a href="med.html#cb114-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">position_num =</span> <span class="fu">rowSums</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">&quot;position_center&quot;</span>, <span class="st">&quot;position_pf&quot;</span>, <span class="st">&quot;position_sf&quot;</span>,</span>
<span id="cb114-10"><a href="med.html#cb114-10" tabindex="-1"></a>                                         <span class="st">&quot;position_pg&quot;</span>, <span class="st">&quot;position_sg&quot;</span>))),</span>
<span id="cb114-11"><a href="med.html#cb114-11" tabindex="-1"></a>         <span class="at">position_rec =</span> </span>
<span id="cb114-12"><a href="med.html#cb114-12" tabindex="-1"></a>           <span class="fu">case_when</span>(</span>
<span id="cb114-13"><a href="med.html#cb114-13" tabindex="-1"></a>             position_center<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;center&quot;</span>,</span>
<span id="cb114-14"><a href="med.html#cb114-14" tabindex="-1"></a>             position_pf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb114-15"><a href="med.html#cb114-15" tabindex="-1"></a>             position_sf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb114-16"><a href="med.html#cb114-16" tabindex="-1"></a>             position_pg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb114-17"><a href="med.html#cb114-17" tabindex="-1"></a>             position_sg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">1</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb114-18"><a href="med.html#cb114-18" tabindex="-1"></a>             position_sg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_pg<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Guard&quot;</span>,</span>
<span id="cb114-19"><a href="med.html#cb114-19" tabindex="-1"></a>             position_pf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_sf<span class="sc">==</span><span class="dv">1</span> <span class="sc">&amp;</span> position_num<span class="sc">==</span><span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Forward&quot;</span>,</span>
<span id="cb114-20"><a href="med.html#cb114-20" tabindex="-1"></a>             <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;Mixed&quot;</span>))</span>
<span id="cb114-21"><a href="med.html#cb114-21" tabindex="-1"></a></span>
<span id="cb114-22"><a href="med.html#cb114-22" tabindex="-1"></a><span class="co"># pot mean salary by position</span></span>
<span id="cb114-23"><a href="med.html#cb114-23" tabindex="-1"></a>data_nba <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(position_rec) <span class="sc">%&gt;%</span></span>
<span id="cb114-24"><a href="med.html#cb114-24" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">salary_mean =</span> <span class="fu">mean</span>(salary, <span class="at">rm.na =</span>T)) <span class="sc">%&gt;%</span></span>
<span id="cb114-25"><a href="med.html#cb114-25" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb114-26"><a href="med.html#cb114-26" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x=</span>position_rec, <span class="at">y=</span>salary_mean), <span class="at">stat=</span><span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb114-27"><a href="med.html#cb114-27" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">6000000</span>) <span class="sc">+</span></span>
<span id="cb114-28"><a href="med.html#cb114-28" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/med_0-1.png" width="672" /></p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="med.html#cb115-1" tabindex="-1"></a><span class="co"># linear regression</span></span>
<span id="cb115-2"><a href="med.html#cb115-2" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">lm</span>(salary <span class="sc">~</span> <span class="fu">as.factor</span>(position_rec), <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>)))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ as.factor(position_rec), data = data_nba, 
##     subset = (position_rec != &quot;Mixed&quot;))
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -4011485 -2826365 -1708014  1102456 31105006 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                     4016014     126850  31.659  &lt; 2e-16 ***
## as.factor(position_rec)Forward  -439249     158703  -2.768  0.00566 ** 
## as.factor(position_rec)Guard    -438470     149803  -2.927  0.00343 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4402000 on 6382 degrees of freedom
## Multiple R-squared:  0.001519,   Adjusted R-squared:  0.001206 
## F-statistic: 4.855 on 2 and 6382 DF,  p-value: 0.007821</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="med.html#cb117-1" tabindex="-1"></a><span class="co"># adjust for confounder </span></span>
<span id="cb117-2"><a href="med.html#cb117-2" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">lm</span>(salary <span class="sc">~</span> <span class="fu">as.factor</span>(position_rec) <span class="sc">+</span> <span class="fu">as.factor</span>(season_start), <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>)))</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ as.factor(position_rec) + as.factor(season_start), 
##     data = data_nba, subset = (position_rec != &quot;Mixed&quot;))
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -5983717 -2733737 -1557867  1229567 29209309 
## 
## Coefficients:
##                                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)                     2614310     272704   9.587  &lt; 2e-16 ***
## as.factor(position_rec)Forward  -510295     156308  -3.265 0.001102 ** 
## as.factor(position_rec)Guard    -523632     147538  -3.549 0.000389 ***
## as.factor(season_start)1999       22191     334992   0.066 0.947186    
## as.factor(season_start)2000      705147     348782   2.022 0.043245 *  
## as.factor(season_start)2001      818596     352465   2.322 0.020238 *  
## as.factor(season_start)2002     1035391     354870   2.918 0.003539 ** 
## as.factor(season_start)2003     1069793     359704   2.974 0.002950 ** 
## as.factor(season_start)2004     1117189     358397   3.117 0.001834 ** 
## as.factor(season_start)2005     1090880     354570   3.077 0.002102 ** 
## as.factor(season_start)2006      958637     352167   2.722 0.006504 ** 
## as.factor(season_start)2007     1654377     357706   4.625 3.82e-06 ***
## as.factor(season_start)2008     1944946     357392   5.442 5.46e-08 ***
## as.factor(season_start)2009     1832838     359404   5.100 3.50e-07 ***
## as.factor(season_start)2010     1748651     360028   4.857 1.22e-06 ***
## as.factor(season_start)2011     1582423     353355   4.478 7.66e-06 ***
## as.factor(season_start)2012     1651497     346695   4.764 1.94e-06 ***
## as.factor(season_start)2013     2121273     361746   5.864 4.75e-09 ***
## as.factor(season_start)2014     1243733     331916   3.747 0.000180 ***
## as.factor(season_start)2015     1804493     332700   5.424 6.05e-08 ***
## as.factor(season_start)2016     2645083     326043   8.113 5.89e-16 ***
## as.factor(season_start)2017     3382563     324615  10.420  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4327000 on 6363 degrees of freedom
## Multiple R-squared:  0.03774,    Adjusted R-squared:  0.03456 
## F-statistic: 11.88 on 21 and 6363 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Looking at the regression output, we see that, indeed, centers make more than guards and forwards. Actually, a lot less, approx. 500.000 USD less on average.</p>
<p>Let’s ignore for the moment that this is a terrible model. The r-squared is only 0.03 which means that position and season only explain ~ 3% of variation in salaries.</p>
<p>Now, we want to know whether scoring explain this salary penalty. Here is a simple mediation.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="med.html#cb119-1" tabindex="-1"></a><span class="co"># let&#39;S compare models side by side in a regression table</span></span>
<span id="cb119-2"><a href="med.html#cb119-2" tabindex="-1"></a></span>
<span id="cb119-3"><a href="med.html#cb119-3" tabindex="-1"></a><span class="co">#install.packages(&quot;modelsummary&quot;)</span></span>
<span id="cb119-4"><a href="med.html#cb119-4" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb119-5"><a href="med.html#cb119-5" tabindex="-1"></a>models <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb119-6"><a href="med.html#cb119-6" tabindex="-1"></a>  <span class="at">m1 =</span> <span class="fu">lm</span>(salary <span class="sc">~</span> <span class="fu">as.factor</span>(position_rec) <span class="sc">+</span> <span class="fu">as.factor</span>(season_start), <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>)),</span>
<span id="cb119-7"><a href="med.html#cb119-7" tabindex="-1"></a>  m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> <span class="fu">as.factor</span>(position_rec) <span class="sc">+</span> career_PTS <span class="sc">+</span> <span class="fu">as.factor</span>(season_start), <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>))</span>
<span id="cb119-8"><a href="med.html#cb119-8" tabindex="-1"></a>)</span>
<span id="cb119-9"><a href="med.html#cb119-9" tabindex="-1"></a></span>
<span id="cb119-10"><a href="med.html#cb119-10" tabindex="-1"></a><span class="fu">modelsummary</span>(models)</span></code></pre></div>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
</th>
<th style="text-align:left;">
m1
</th>
<th style="text-align:left;">
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
(Intercept)
</td>
<td style="text-align:left;">
2614309.605
</td>
<td style="text-align:left;">
−939410.632
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(272704.206)
</td>
<td style="text-align:left;">
(221569.259)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(position_rec)Forward
</td>
<td style="text-align:left;">
−510295.017
</td>
<td style="text-align:left;">
−1413516.300
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(156308.018)
</td>
<td style="text-align:left;">
(123630.475)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(position_rec)Guard
</td>
<td style="text-align:left;">
−523632.304
</td>
<td style="text-align:left;">
−2000142.285
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(147537.586)
</td>
<td style="text-align:left;">
(118260.027)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)1999
</td>
<td style="text-align:left;">
22190.937
</td>
<td style="text-align:left;">
302958.632
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(334991.928)
</td>
<td style="text-align:left;">
(263200.021)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2000
</td>
<td style="text-align:left;">
705146.970
</td>
<td style="text-align:left;">
685025.470
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(348782.404)
</td>
<td style="text-align:left;">
(273995.766)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2001
</td>
<td style="text-align:left;">
818595.739
</td>
<td style="text-align:left;">
860051.794
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(352464.794)
</td>
<td style="text-align:left;">
(276889.168)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2002
</td>
<td style="text-align:left;">
1035390.857
</td>
<td style="text-align:left;">
1185765.987
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(354869.752)
</td>
<td style="text-align:left;">
(278787.933)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2003
</td>
<td style="text-align:left;">
1069793.041
</td>
<td style="text-align:left;">
1154734.396
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(359704.108)
</td>
<td style="text-align:left;">
(282578.656)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2004
</td>
<td style="text-align:left;">
1117189.300
</td>
<td style="text-align:left;">
1335647.564
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(358397.141)
</td>
<td style="text-align:left;">
(281570.162)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2005
</td>
<td style="text-align:left;">
1090880.186
</td>
<td style="text-align:left;">
1408951.168
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(354570.248)
</td>
<td style="text-align:left;">
(278588.367)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2006
</td>
<td style="text-align:left;">
958636.479
</td>
<td style="text-align:left;">
1404509.355
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(352166.838)
</td>
<td style="text-align:left;">
(276745.293)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2007
</td>
<td style="text-align:left;">
1654377.014
</td>
<td style="text-align:left;">
1740042.609
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(357705.703)
</td>
<td style="text-align:left;">
(281008.828)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2008
</td>
<td style="text-align:left;">
1944945.963
</td>
<td style="text-align:left;">
1844901.044
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(357392.398)
</td>
<td style="text-align:left;">
(280763.910)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2009
</td>
<td style="text-align:left;">
1832838.212
</td>
<td style="text-align:left;">
1469738.620
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(359403.707)
</td>
<td style="text-align:left;">
(282398.558)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2010
</td>
<td style="text-align:left;">
1748650.500
</td>
<td style="text-align:left;">
1381348.241
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(360027.993)
</td>
<td style="text-align:left;">
(282890.255)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2011
</td>
<td style="text-align:left;">
1582423.228
</td>
<td style="text-align:left;">
1261385.859
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(353354.876)
</td>
<td style="text-align:left;">
(277634.621)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2012
</td>
<td style="text-align:left;">
1651497.174
</td>
<td style="text-align:left;">
1339040.290
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(346694.638)
</td>
<td style="text-align:left;">
(272400.865)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2013
</td>
<td style="text-align:left;">
2121273.316
</td>
<td style="text-align:left;">
1360644.125
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(361745.546)
</td>
<td style="text-align:left;">
(284436.812)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2014
</td>
<td style="text-align:left;">
1243732.606
</td>
<td style="text-align:left;">
1141626.786
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(331915.955)
</td>
<td style="text-align:left;">
(260750.740)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2015
</td>
<td style="text-align:left;">
1804493.065
</td>
<td style="text-align:left;">
1543464.545
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(332699.559)
</td>
<td style="text-align:left;">
(261394.268)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2016
</td>
<td style="text-align:left;">
2645083.101
</td>
<td style="text-align:left;">
2527969.077
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(326042.835)
</td>
<td style="text-align:left;">
(256138.668)
</td>
</tr>
<tr>
<td style="text-align:left;">
as.factor(season_start)2017
</td>
<td style="text-align:left;">
3382563.347
</td>
<td style="text-align:left;">
3172576.179
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
(324614.892)
</td>
<td style="text-align:left;">
(255032.022)
</td>
</tr>
<tr>
<td style="text-align:left;">
career_PTS
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
545303.023
</td>
</tr>
<tr>
<td style="text-align:left;box-shadow: 0px 1.5px">
</td>
<td style="text-align:left;box-shadow: 0px 1.5px">
</td>
<td style="text-align:left;box-shadow: 0px 1.5px">
(8677.934)
</td>
</tr>
<tr>
<td style="text-align:left;">
Num.Obs.
</td>
<td style="text-align:left;">
6385
</td>
<td style="text-align:left;">
6385
</td>
</tr>
<tr>
<td style="text-align:left;">
R2
</td>
<td style="text-align:left;">
0.038
</td>
<td style="text-align:left;">
0.406
</td>
</tr>
<tr>
<td style="text-align:left;">
R2 Adj.
</td>
<td style="text-align:left;">
0.035
</td>
<td style="text-align:left;">
0.404
</td>
</tr>
<tr>
<td style="text-align:left;">
AIC
</td>
<td style="text-align:left;">
213275.6
</td>
<td style="text-align:left;">
210194.7
</td>
</tr>
<tr>
<td style="text-align:left;">
BIC
</td>
<td style="text-align:left;">
213431.1
</td>
<td style="text-align:left;">
210357.0
</td>
</tr>
<tr>
<td style="text-align:left;">
Log.Lik.
</td>
<td style="text-align:left;">
−106614.789
</td>
<td style="text-align:left;">
−105073.355
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
11.882
</td>
<td style="text-align:left;">
197.861
</td>
</tr>
<tr>
<td style="text-align:left;">
RMSE
</td>
<td style="text-align:left;">
4319963.19
</td>
<td style="text-align:left;">
3393398.83
</td>
</tr>
</tbody>
</table>
<p>At first look, our hypothesis actually does not seem to hold. When we adjust for
points scored, the gap between centers, forwards and guards. This means that
guards don’t make less because they make less points. Guards and forwards with
average points, compared to centers with average points, make even less than centers, compared to when we do not account for points at all. This could mean that teams know that guards
are important despite the fact that they score less.</p>
<p>Let’s use a new package for <em>causal mediation analysis</em>.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="med.html#cb120-1" tabindex="-1"></a><span class="co"># now let&#39;s try a dedidcated package for mediation</span></span>
<span id="cb120-2"><a href="med.html#cb120-2" tabindex="-1"></a><span class="fu">library</span>(mediation)</span>
<span id="cb120-3"><a href="med.html#cb120-3" tabindex="-1"></a></span>
<span id="cb120-4"><a href="med.html#cb120-4" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">position_rec =</span> <span class="fu">as.factor</span>(position_rec),</span>
<span id="cb120-5"><a href="med.html#cb120-5" tabindex="-1"></a>                                <span class="at">season_start =</span> <span class="fu">as.factor</span>(season_start),</span>
<span id="cb120-6"><a href="med.html#cb120-6" tabindex="-1"></a>                                <span class="at">salary =</span> salary<span class="sc">/</span><span class="dv">10</span>)</span>
<span id="cb120-7"><a href="med.html#cb120-7" tabindex="-1"></a></span>
<span id="cb120-8"><a href="med.html#cb120-8" tabindex="-1"></a><span class="fu">mean</span>(data_nba<span class="sc">$</span>salary)</span></code></pre></div>
<pre><code>## [1] 407263.3</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="med.html#cb122-1" tabindex="-1"></a><span class="co"># first path from x to mediator</span></span>
<span id="cb122-2"><a href="med.html#cb122-2" tabindex="-1"></a>path_a <span class="ot">&lt;-</span> <span class="fu">lm</span>(career_PTS <span class="sc">~</span> position_rec <span class="sc">+</span> season_start, <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>))</span>
<span id="cb122-3"><a href="med.html#cb122-3" tabindex="-1"></a></span>
<span id="cb122-4"><a href="med.html#cb122-4" tabindex="-1"></a><span class="co"># Now full model, x to mediator to y</span></span>
<span id="cb122-5"><a href="med.html#cb122-5" tabindex="-1"></a>path_b <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> position_rec <span class="sc">+</span> career_PTS <span class="sc">+</span> season_start, <span class="at">data=</span>data_nba, <span class="at">subset=</span>(position_rec<span class="sc">!=</span><span class="st">&quot;Mixed&quot;</span>))</span>
<span id="cb122-6"><a href="med.html#cb122-6" tabindex="-1"></a></span>
<span id="cb122-7"><a href="med.html#cb122-7" tabindex="-1"></a><span class="co"># centers vs. forwards</span></span>
<span id="cb122-8"><a href="med.html#cb122-8" tabindex="-1"></a>results_mediation_forwards <span class="ot">&lt;-</span> <span class="fu">mediate</span>(path_a, path_b,</span>
<span id="cb122-9"><a href="med.html#cb122-9" tabindex="-1"></a>                             <span class="at">treat =</span> <span class="st">&quot;position_rec&quot;</span>, <span class="co"># x or main independent variable</span></span>
<span id="cb122-10"><a href="med.html#cb122-10" tabindex="-1"></a>                             <span class="at">mediator =</span> <span class="st">&quot;career_PTS&quot;</span>,</span>
<span id="cb122-11"><a href="med.html#cb122-11" tabindex="-1"></a>                             <span class="at">treat.value =</span> <span class="dv">1</span>)</span>
<span id="cb122-12"><a href="med.html#cb122-12" tabindex="-1"></a></span>
<span id="cb122-13"><a href="med.html#cb122-13" tabindex="-1"></a><span class="co"># centers vs. guards</span></span>
<span id="cb122-14"><a href="med.html#cb122-14" tabindex="-1"></a>results_mediation_guards <span class="ot">&lt;-</span> <span class="fu">mediate</span>(path_a, path_b,</span>
<span id="cb122-15"><a href="med.html#cb122-15" tabindex="-1"></a>                             <span class="at">treat =</span> <span class="st">&quot;position_rec&quot;</span>, <span class="co"># x or main independent variable</span></span>
<span id="cb122-16"><a href="med.html#cb122-16" tabindex="-1"></a>                             <span class="at">mediator =</span> <span class="st">&quot;career_PTS&quot;</span>,</span>
<span id="cb122-17"><a href="med.html#cb122-17" tabindex="-1"></a>                             <span class="at">treat.value =</span> <span class="dv">2</span>)</span>
<span id="cb122-18"><a href="med.html#cb122-18" tabindex="-1"></a></span>
<span id="cb122-19"><a href="med.html#cb122-19" tabindex="-1"></a><span class="fu">summary</span>(results_mediation_forwards)</span></code></pre></div>
<pre><code>## 
## Causal Mediation Analysis 
## 
## Quasi-Bayesian Confidence Intervals
## 
##                 Estimate 95% CI Lower 95% CI Upper p-value    
## ACME            9.03e+04     7.11e+04     109770.6  &lt;2e-16 ***
## ADE            -1.42e+05    -1.65e+05    -117872.5  &lt;2e-16 ***
## Total Effect   -5.13e+04    -8.29e+04     -21008.8  &lt;2e-16 ***
## Prop. Mediated -1.82e+00    -4.92e+00         -0.9  &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Sample Size Used: 6385 
## 
## 
## Simulations: 1000</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="med.html#cb124-1" tabindex="-1"></a><span class="fu">summary</span>(results_mediation_guards)</span></code></pre></div>
<pre><code>## 
## Causal Mediation Analysis 
## 
## Quasi-Bayesian Confidence Intervals
## 
##                 Estimate 95% CI Lower 95% CI Upper p-value    
## ACME            9.06e+04     7.07e+04     1.09e+05  &lt;2e-16 ***
## ADE            -1.42e+05    -1.65e+05    -1.17e+05  &lt;2e-16 ***
## Total Effect   -5.11e+04    -8.12e+04    -2.22e+04  &lt;2e-16 ***
## Prop. Mediated -1.79e+00    -4.36e+00    -9.10e-01  &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Sample Size Used: 6385 
## 
## 
## Simulations: 1000</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="med.html#cb126-1" tabindex="-1"></a><span class="co"># note: this dies not yet work. FOrwads and guards are the same. CHeck how to </span></span>
<span id="cb126-2"><a href="med.html#cb126-2" tabindex="-1"></a><span class="co"># take different groups of the treatment variable. Problem is that the treatment</span></span>
<span id="cb126-3"><a href="med.html#cb126-3" tabindex="-1"></a><span class="co"># variable is categorical.</span></span></code></pre></div>
<p>The output looks different. Let’s go through it step by step:</p>
<ul>
<li>ACME: Average Causal Mediation Effect - <em>indirect effect</em>, this is the effect of position through points on salary.<br />
</li>
<li>ADE: Average Direct Effect - This is the direct effect of position on salary. + Total Effect: ADE and ACME together are the “total effect”<br />
</li>
<li>Prop. Mediated. This is the proportion of the total effect that is “explained” by the indirect effect.</li>
</ul>
<p>Let’s interpret this for our model:</p>
<ul>
<li>ACME: If only points could explain <code>salaries</code>, Guards would make, on average 900.000 USD more than centers (because they actually score more points)</li>
<li>ADE: Adjusting for points, guards would make 1.4 Million USD less than centers</li>
<li>Total Effect: Overall, guards actually make 500.000 USD less.</li>
<li>Prop. Mediated. This is actually a negative value which makes no sense in this case. If points scored really “mediated” part of the total effect and had some explanatory power here, then we would see a positive percentage.</li>
</ul>
<p>When you take a look at our first approach, where we just estimated both regression models side by side. The coefficient for position is the total effect when we don’t include the
mediator in the model. The coefficient is the direct effect when we do include the mediator.
The indirect effect is the total effect minus the direct effect (-1.400.000 - (-500.000) = -900.000).</p>
<p>In sum, Guards are disadvantaged. They receive less money than center, although, if the points were considered, they should make even more. There must be other reasons why guards earn less. We need to go back to theory and come up with new hypothesis.</p>
</div>
<div id="further-resources-5" class="section level2 hasAnchor" number="10.3">
<h2><span class="header-section-number">10.3</span> Further Resources<a href="med.html#further-resources-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="resources">
<ul>
<li><a href="https://cran.r-project.org/web/packages/mediation/vignettes/mediation.pdf">mediation: R Package for Causal Mediation Analysis</a>: This article describes the mediation package for conducting causal mediation analysis in R. It explains how to use the mediate() function to estimate various quantities of interest, such as average causal mediation effects, average direct effects, total effects, and proportions mediated. It also shows how to perform sensitivity analysis and deal with multiple mediators and treatment noncompliance.</li>
<li><a href="https://advstats.psychstat.org/book/mediation/index.php">Mediation Analysis – Advanced Statistics using R</a>: This web page provides an introduction to mediation analysis using R. It covers the basic concepts, how to draw path diagrams, how to test mediation effects using different methods, such as Baron and Kenny (1986) method, Sobel test, and bootstrapping. It also provides code examples and exercises.</li>
<li><a href="https://tidypython.com/mediation-analysis-in-r-from-scratch-with-r-code/">Mediation Analysis in R from Scratch (with R code)</a>: This tutorial shows how to do mediation analysis in R from scratch. It demonstrates how to fit linear regression models for the mediator and the outcome, how to calculate the mediation effect and its standard error, and how to test its significance using a normal approximation or a bootstrap method.</li>
<li><a href="https://rdocumentation.org/packages/mediation/versions/4.5.0/topics/mediate">mediate function - RDocumentation</a>: This web page documents the mediate() function from the mediation package. It provides a detailed description of the arguments, values, and methods of the function. It also gives some examples of how to use the function for different types of data and models.</li>
</ul>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lin-e.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="pm-t.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/10-mediation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
