<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 8 Linear Regression - Application | Data Analysis with R for Social Scientists</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content=" 8 Linear Regression - Application | Data Analysis with R for Social Scientists" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  <meta name="github-repo" content="jaspertjaden/DataAnalysisR" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 8 Linear Regression - Application | Data Analysis with R for Social Scientists" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
The HTML output format for this example is bookdown::gitbook,
set in the _output.yml file.</p>" />
  

<meta name="author" content="Jakob Tures &amp; Jasper Tjaden" />


<meta name="date" content="2023-08-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="log-t-3.html"/>
<link rel="next" href="lin-e.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Intro</a></li>
<li class="chapter" data-level="1" data-path="intro-sem.html"><a href="intro-sem.html"><i class="fa fa-check"></i><b>1</b> Introduction to Seminar</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro-sem.html"><a href="intro-sem.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="intro-sem.html"><a href="intro-sem.html#why-should-i-take-this-course"><i class="fa fa-check"></i><b>1.2</b> Why should I take this course?</a></li>
<li class="chapter" data-level="1.3" data-path="intro-sem.html"><a href="intro-sem.html#objectives"><i class="fa fa-check"></i><b>1.3</b> Objectives</a></li>
<li class="chapter" data-level="1.4" data-path="intro-sem.html"><a href="intro-sem.html#what-is-not-covered"><i class="fa fa-check"></i><b>1.4</b> What is not covered</a></li>
<li class="chapter" data-level="1.5" data-path="intro-sem.html"><a href="intro-sem.html#prerequisites"><i class="fa fa-check"></i><b>1.5</b> Prerequisites</a></li>
<li class="chapter" data-level="1.6" data-path="intro-sem.html"><a href="intro-sem.html#structure"><i class="fa fa-check"></i><b>1.6</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="eda-1.html"><a href="eda-1.html"><i class="fa fa-check"></i><b>2</b> Exloratory Data Analysis - I</a>
<ul>
<li class="chapter" data-level="2.1" data-path="eda-1.html"><a href="eda-1.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="eda-1.html"><a href="eda-1.html#r-functions-covered-this-week"><i class="fa fa-check"></i><b>2.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="2.3" data-path="eda-1.html"><a href="eda-1.html#why-is-eda-so-important"><i class="fa fa-check"></i><b>2.3</b> Why is EDA so important?</a></li>
<li class="chapter" data-level="2.4" data-path="eda-1.html"><a href="eda-1.html#importing-data-into-r"><i class="fa fa-check"></i><b>2.4</b> Importing data into R</a></li>
<li class="chapter" data-level="2.5" data-path="eda-1.html"><a href="eda-1.html#import-data-into-r"><i class="fa fa-check"></i><b>2.5</b> Import data into R</a></li>
<li class="chapter" data-level="2.6" data-path="eda-1.html"><a href="eda-1.html#merge-datasets"><i class="fa fa-check"></i><b>2.6</b> Merge datasets</a></li>
<li class="chapter" data-level="2.7" data-path="eda-1.html"><a href="eda-1.html#clean-dataset"><i class="fa fa-check"></i><b>2.7</b> Clean dataset</a></li>
<li class="chapter" data-level="2.8" data-path="eda-1.html"><a href="eda-1.html#change-variables"><i class="fa fa-check"></i><b>2.8</b> change variables</a></li>
<li class="chapter" data-level="2.9" data-path="eda-1.html"><a href="eda-1.html#explore-the-whole-dataset"><i class="fa fa-check"></i><b>2.9</b> Explore the whole dataset</a></li>
<li class="chapter" data-level="2.10" data-path="eda-1.html"><a href="eda-1.html#explore-individual-variables"><i class="fa fa-check"></i><b>2.10</b> explore individual variables</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="eda-2.html"><a href="eda-2.html"><i class="fa fa-check"></i><b>3</b> Exploratory Data Analysis - II</a>
<ul>
<li class="chapter" data-level="3.1" data-path="eda-2.html"><a href="eda-2.html#markdown-introduction"><i class="fa fa-check"></i><b>3.1</b> Markdown Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="eda-2.html"><a href="eda-2.html#applying-edawvsown-data"><i class="fa fa-check"></i><b>3.2</b> Applying EDA(WVS/own data)</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="eda-2.html"><a href="eda-2.html#exercise---1"><i class="fa fa-check"></i><b>3.2.1</b> Exercise - 1</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dags-1.html"><a href="dags-1.html"><i class="fa fa-check"></i><b>4</b> DAGs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="dags-1.html"><a href="dags-1.html#causality"><i class="fa fa-check"></i><b>4.1</b> Causality</a></li>
<li class="chapter" data-level="4.2" data-path="dags-1.html"><a href="dags-1.html#dags"><i class="fa fa-check"></i><b>4.2</b> DAGs</a></li>
<li class="chapter" data-level="4.3" data-path="dags-1.html"><a href="dags-1.html#totaldirect-effect"><i class="fa fa-check"></i><b>4.3</b> Total/Direct effect</a></li>
<li class="chapter" data-level="4.4" data-path="dags-1.html"><a href="dags-1.html#dagitty.net"><i class="fa fa-check"></i><b>4.4</b> dagitty.net</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lin-t-1.html"><a href="lin-t-1.html"><i class="fa fa-check"></i><b>5</b> Linear Regression Theory I: Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lin-t-1.html"><a href="lin-t-1.html#what-is-linear-regression"><i class="fa fa-check"></i><b>5.1</b> What is Linear Regression</a></li>
<li class="chapter" data-level="5.2" data-path="lin-t-1.html"><a href="lin-t-1.html#examplary-research-question-data"><i class="fa fa-check"></i><b>5.2</b> Examplary research question &amp; data</a></li>
<li class="chapter" data-level="5.3" data-path="lin-t-1.html"><a href="lin-t-1.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.3</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="lin-t-1.html"><a href="lin-t-1.html#regression-formula"><i class="fa fa-check"></i><b>5.3.1</b> Regression Formula</a></li>
<li class="chapter" data-level="5.3.2" data-path="lin-t-1.html"><a href="lin-t-1.html#regressing-grade-on-hours"><i class="fa fa-check"></i><b>5.3.2</b> Regressing <code>grade</code> on <code>hours</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lin-t-2.html"><a href="lin-t-2.html"><i class="fa fa-check"></i><b>6</b> Linear Regression Theory II: Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.1" data-path="lin-t-2.html"><a href="lin-t-2.html#multiple-linear-regression"><i class="fa fa-check"></i><b>6.1</b> Multiple Linear Regression</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-additional-metric-variables"><i class="fa fa-check"></i><b>6.1.1</b> Adding additional metric variables</a></li>
<li class="chapter" data-level="6.1.2" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-dummy-variables"><i class="fa fa-check"></i><b>6.1.2</b> Adding dummy variables</a></li>
<li class="chapter" data-level="6.1.3" data-path="lin-t-2.html"><a href="lin-t-2.html#adding-categorical-variables"><i class="fa fa-check"></i><b>6.1.3</b> Adding categorical variables</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="lin-t-2.html"><a href="lin-t-2.html#returning-to-our-research-question"><i class="fa fa-check"></i><b>6.2</b> Returning to our research question</a></li>
<li class="chapter" data-level="6.3" data-path="lin-t-2.html"><a href="lin-t-2.html#interpretation"><i class="fa fa-check"></i><b>6.3</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="log-t-3.html"><a href="log-t-3.html"><i class="fa fa-check"></i><b>7</b> Linear Regression Theory III: Diagnostics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="log-t-3.html"><a href="log-t-3.html#model-fit"><i class="fa fa-check"></i><b>7.1</b> Model fit</a></li>
<li class="chapter" data-level="7.2" data-path="log-t-3.html"><a href="log-t-3.html#regression-diagnostics"><i class="fa fa-check"></i><b>7.2</b> Regression diagnostics</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="log-t-3.html"><a href="log-t-3.html#linearity"><i class="fa fa-check"></i><b>7.2.1</b> Linearity</a></li>
<li class="chapter" data-level="7.2.2" data-path="log-t-3.html"><a href="log-t-3.html#normally-distributed-residuals"><i class="fa fa-check"></i><b>7.2.2</b> Normally distributed residuals</a></li>
<li class="chapter" data-level="7.2.3" data-path="log-t-3.html"><a href="log-t-3.html#homoscedasticity"><i class="fa fa-check"></i><b>7.2.3</b> Homoscedasticity</a></li>
<li class="chapter" data-level="7.2.4" data-path="log-t-3.html"><a href="log-t-3.html#no-overly-influential-data-points"><i class="fa fa-check"></i><b>7.2.4</b> No overly influential data points</a></li>
<li class="chapter" data-level="7.2.5" data-path="log-t-3.html"><a href="log-t-3.html#no-multicollinearity"><i class="fa fa-check"></i><b>7.2.5</b> No (multi)collinearity</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="log-t-3.html"><a href="log-t-3.html#returning-to-our-research-question-1"><i class="fa fa-check"></i><b>7.3</b> Returning to our research question</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="log-t-3.html"><a href="log-t-3.html#interactions"><i class="fa fa-check"></i><b>7.3.1</b> Interactions</a></li>
<li class="chapter" data-level="7.3.2" data-path="log-t-3.html"><a href="log-t-3.html#regression-diagnostics-revisited"><i class="fa fa-check"></i><b>7.3.2</b> Regression diagnostics (revisited)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lin-a.html"><a href="lin-a.html"><i class="fa fa-check"></i><b>8</b> Linear Regression - Application</a>
<ul>
<li class="chapter" data-level="8.1" data-path="lin-a.html"><a href="lin-a.html#objectives-2"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="lin-a.html"><a href="lin-a.html#r-functions-covered-this-week-1"><i class="fa fa-check"></i><b>8.2</b> R functions covered this week</a></li>
<li class="chapter" data-level="8.3" data-path="lin-a.html"><a href="lin-a.html#temporary-from-eda-i"><i class="fa fa-check"></i><b>8.3</b> Temporary from EDA I</a></li>
<li class="chapter" data-level="8.4" data-path="lin-a.html"><a href="lin-a.html#research-question"><i class="fa fa-check"></i><b>8.4</b> Research question</a></li>
<li class="chapter" data-level="8.5" data-path="lin-a.html"><a href="lin-a.html#simple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.5</b> Simple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="lin-a.html"><a href="lin-a.html#interpretation-1"><i class="fa fa-check"></i><b>8.5.1</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="lin-a.html"><a href="lin-a.html#multiple-linear-regression-in-r"><i class="fa fa-check"></i><b>8.6</b> Multiple linear regression in R</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="lin-a.html"><a href="lin-a.html#interpretation-2"><i class="fa fa-check"></i><b>8.6.1</b> Interpretation</a></li>
<li class="chapter" data-level="8.6.2" data-path="lin-a.html"><a href="lin-a.html#sidenote-adding-interactions"><i class="fa fa-check"></i><b>8.6.2</b> Sidenote: Adding interactions</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="lin-a.html"><a href="lin-a.html#regression-diagnostics-1"><i class="fa fa-check"></i><b>8.7</b> Regression Diagnostics</a>
<ul>
<li class="chapter" data-level="8.7.1" data-path="lin-a.html"><a href="lin-a.html#corrections"><i class="fa fa-check"></i><b>8.7.1</b> Corrections</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="lin-a.html"><a href="lin-a.html#returning-to-our-research-question-2"><i class="fa fa-check"></i><b>8.8</b> Returning to our research question</a></li>
<li class="chapter" data-level="8.9" data-path="lin-a.html"><a href="lin-a.html#outlook"><i class="fa fa-check"></i><b>8.9</b> Outlook</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lin-e.html"><a href="lin-e.html"><i class="fa fa-check"></i><b>9</b> Linear Regression - Exercises</a>
<ul>
<li class="chapter" data-level="9.1" data-path="lin-e.html"><a href="lin-e.html#application-of-logistic-regression"><i class="fa fa-check"></i><b>9.1</b> Application of Logistic Regression</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="med.html"><a href="med.html"><i class="fa fa-check"></i><b>10</b> Mediation</a>
<ul>
<li class="chapter" data-level="10.1" data-path="med.html"><a href="med.html#fint-out-more"><i class="fa fa-check"></i><b>10.1</b> FInt out more</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="pm-t.html"><a href="pm-t.html"><i class="fa fa-check"></i><b>11</b> Prediction - Theory</a>
<ul>
<li class="chapter" data-level="11.1" data-path="pm-t.html"><a href="pm-t.html#how-prediction-works"><i class="fa fa-check"></i><b>11.1</b> How prediction works</a></li>
<li class="chapter" data-level="11.2" data-path="pm-t.html"><a href="pm-t.html#intro-to-machine-learning"><i class="fa fa-check"></i><b>11.2</b> Intro to Machine learning</a></li>
<li class="chapter" data-level="11.3" data-path="pm-t.html"><a href="pm-t.html#more-resources"><i class="fa fa-check"></i><b>11.3</b> More resources:</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="pm-a.html"><a href="pm-a.html"><i class="fa fa-check"></i><b>12</b> Prediction - Application</a>
<ul>
<li class="chapter" data-level="12.1" data-path="pm-a.html"><a href="pm-a.html#formatted-regression-tables"><i class="fa fa-check"></i><b>12.1</b> Formatted regression tables</a></li>
<li class="chapter" data-level="12.2" data-path="pm-a.html"><a href="pm-a.html#publication-ready-formatting-labelling-of-visuals"><i class="fa fa-check"></i><b>12.2</b> Publication-ready formatting/ labelling of visuals</a></li>
<li class="chapter" data-level="12.3" data-path="pm-a.html"><a href="pm-a.html#coefficient-plots"><i class="fa fa-check"></i><b>12.3</b> coefficient plots</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="other-est.html"><a href="other-est.html"><i class="fa fa-check"></i><b>13</b> Other Estimators: Logistic, Poisson, Multilevel, FE</a></li>
<li class="chapter" data-level="14" data-path="out-look.html"><a href="out-look.html"><i class="fa fa-check"></i><b>14</b> Outlook</a>
<ul>
<li class="chapter" data-level="14.1" data-path="out-look.html"><a href="out-look.html#machine-learning"><i class="fa fa-check"></i><b>14.1</b> Machine Learning</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis with R for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lin-a" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number"> 8</span> Linear Regression - Application<a href="lin-a.html#lin-a" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="objectives-2" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Objectives<a href="lin-a.html#objectives-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="r-functions-covered-this-week-1" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> R functions covered this week<a href="lin-a.html#r-functions-covered-this-week-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><code>lm()</code></li>
</ul>
</div>
<div id="temporary-from-eda-i" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Temporary from EDA I<a href="lin-a.html#temporary-from-eda-i" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This is interesting for a first look. For example, it seems that the weight is
strongly correlated with whatever position you play. Centers are heavy, point
guards are light weights.
We also see that most performance metrics (“career_…”) are correlated with each
other and also with salary. Good players seem to be good in many things, and
good players seem to be paid more.</p>
<p>Now, that we have a feeling for the whole dataset, we want to explore individual
variables. To keep it focused, we want to further explore the question
of whether players that score more on average are also paid more.</p>
<p>Maybe roles are clearly divided on the team. Maybe really good passers are highly
paid because they give great passes to people who then score. Or maybe teams
don’t care about passers and just pay more to people who score more.</p>
<p>So, now, let’s look at salary and average number of points scored by game.
Also, we want to know whether point guards (short people who pass a lot) are
paid less then other positions (who score more).</p>
<p>So, it seems that point gards are paid a little less even though they make a few more points on average. Interesting puzzle to explore.</p>
<p>Let’s reflect a moment what we can learn from all this.</p>
<p>First, there seems to be a somewhat linear relationship between how many points
a player scores and how much they are paid. This relationship seems pretty robust across years and teams. It also holds true for point guards just as much as for non-point guards. However, the average salary for point guards is lower in comparison. We also learn that the link between salary and points is stronger for centers. They seems to be paid more, the more they score.</p>
<ol style="list-style-type: decimal">
<li>It can model the relationship between two variables while considering simultaneously the potential influence of other factors. Image we are interested
in the effect of points per game on salary regardless of position, season or team.
With regression we can estimate how much more a player would ear every season
if he scored 10 more points a game (regardless of the position he plays).</li>
</ol>
</div>
<div id="research-question" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Research question<a href="lin-a.html#research-question" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will now pick up where we left several sessions ago and return to the NBA
data. We already saw, that there was an interesting relationship between the
points a player makes per game and the salary he receives. The more points, the
higher the salary. This makes intuitive sense as high scoring player is more
valuable to the team and thus receives a higher monetary compensation. Our
goal for this session is to estimate the effect of points on salary and to
assess if it really exists and what its magnitude is.</p>
<p>Let us start building a DAG with the information we already have.</p>
<p><img src="_main_files/figure-html/dag_1-1.png" width="672" /></p>
<p>Now we have to think about other factors that could influence the relationship
between points and salary. One variable we already identified as having an
effect on both was the position a player occupies. The position influences how
many points per game a player can score and we also already saw that centers
make more money compared to point guards. Right now we have no reason to believe
that other positions do not also have an effect on the received salary.
Following this reasoning, position is a confounder for points and salary.</p>
<p><img src="_main_files/figure-html/dag_2-1.png" width="672" /></p>
<p>It is also reasonable that the height influences which position a
player can occupy. Centers have to be big while smaller players tend to play on
other positions. At the same time, height is an advantage if you want to score
in a basketball game. Thus height is a confounder for points and position.</p>
<p><img src="_main_files/figure-html/dag_3-1.png" width="672" /></p>
<p>Another factor that will have an effect on the salary is the team a player play
for. More successful teams will be able to pay higher salaries. The season an
observation was recorded in, should also influence the paid salary as we can
expect a general inflation of salaries over time.</p>
<p><img src="_main_files/figure-html/dag_final-1.png" width="672" /></p>
<p>This is our final DAG. Now what does this imply for our model?
Our goal is to measure the effect of the points per game on the received
salary. Position is a confounder for both, so we have to control for it to get
an unbiased estimate for points. Height is also a confounder, but for points
and position. So we have to control for this variable too? As we already control
for position, the path from height -&gt; position -&gt; points is already closed. This
means that we do <strong>not</strong> have to onclude height in our model to get a unbiased
estimate. The two remaining variables, team and season, have direct effects on
salary but no other connections. This implies, that we also do <strong>not</strong> have to
control for them if our goal is estimating the effect of points. Remember, if
our goal was predicting the salary as accurately as possible, we should maybe
include both variables, but this is not our goal today.</p>
<p>Now let us get to it and load the NBA data we prepared in week 2.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="lin-a.html#cb99-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb99-2"><a href="lin-a.html#cb99-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;../datasets/nba/data_nba.RData&quot;</span>)</span></code></pre></div>
</div>
<div id="simple-linear-regression-in-r" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Simple linear regression in R<a href="lin-a.html#simple-linear-regression-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To conduct a multiple linear regression in R, we can use the built-in <em>base R</em>
function <code>lm()</code>. The function is straightforward to use. As the first argument
we write the regression formula in R’s <em>formula syntax</em>.</p>
<p>In the formula syntac we start by writing the name of our <code>dependent_variable</code>
followed by a <em>tilde</em> <code>~</code>. You can read this as an <span class="math inline">\(=\)</span> or as “regress the
dependent variable on”. After the tilde we add our first <code>indepedent variable</code>
by again writing out its name. If we have multiple independent variables in our
model - so we are running a <em>multiple linear regression</em> - we can add those by
writing a <code>+</code> followed by the name of the variable to be added.</p>
<p>As a second argument, the function needs the name of the object that holds our
data.</p>
<p>The goal of our research question is to estimate the effect of the points per
game on the received salary. So to regress <code>salary</code> on <code>career_PTS</code>, we just
write:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="lin-a.html#cb100-1" tabindex="-1"></a><span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS, <span class="at">data =</span> data_nba)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ career_PTS, data = data_nba)
## 
## Coefficients:
## (Intercept)   career_PTS  
##     -851914       552843</code></pre>
<p>This gives us a short output. The first line just echoes our code used to run
the regression. We have seen this in the last session already, but now we know
what the meaning was. After this we have a short block with the estimated
coefficients. As we have run a simple linear regression, we only get the
intercept and the coefficient for the sole independent variable used in the
model. If we would have run a multiple linear regression, the result would
basically look the same, only with more coefficients to display.</p>
<p>Before we dive into the results, we should talk about how to receive a more
verbose output that does not hide all the other vital information that is
associated with the model.</p>
<p>The easiest way is to use the base R function <code>summary()</code>. This is a generic R
function that returns different summaries, depending on the object it is used
on. We can for example use it on a data frame or tibble to get some descriptive
statistics for the included variables. For example, we can information on the
distribution of points per game by writing:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="lin-a.html#cb102-1" tabindex="-1"></a><span class="fu">summary</span>(data_nba<span class="sc">$</span>career_PTS)</span></code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   0.000   5.100   8.000   8.908  12.000  30.100</code></pre>
<p>When we use <code>summary()</code> on a model object, like the one created by <code>lm()</code>, we
get a different output. Before we apply this we should save our model in an
object. This is good practice in most cases as we can now apply all additional
analysis of the model on ths object and we do not have to rerun the model
every time.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="lin-a.html#cb104-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> career_PTS, <span class="at">data =</span> data_nba)</span></code></pre></div>
<p>We can now apply <code>summary()</code> on the object <code>m1</code>, short for “model 1”:</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="lin-a.html#cb105-1" tabindex="-1"></a><span class="fu">summary</span>(m1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ career_PTS, data = data_nba)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -14788659  -2023969   -434599   1311807  24326060 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  -851915      76417  -11.15   &lt;2e-16 ***
## career_PTS    552843       7453   74.17   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3732000 on 9726 degrees of freedom
## Multiple R-squared:  0.3613, Adjusted R-squared:  0.3612 
## F-statistic:  5502 on 1 and 9726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>This is the output we saw over the last weeks and it includes extended and
better readable coefficient block as well as the information on the residuals
and the model fit.</p>
<p>An alternative method of displaying the coefficients in a regular tibble format,
is to use <code>tidy()</code> from the <code>broom</code> package.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="lin-a.html#cb107-1" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<pre><code>## Warning: package &#39;broom&#39; was built under R version 4.2.3</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="lin-a.html#cb109-1" tabindex="-1"></a><span class="fu">tidy</span>(m1)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept) -851914.    76417.     -11.1 1.09e-28
## 2 career_PTS   552843.     7453.      74.2 0</code></pre>
<div id="interpretation-1" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> Interpretation<a href="lin-a.html#interpretation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>While we know our model is not complete yet, let us still inspect the results.
For each point a player scores per game, his salary rises by about <span class="math inline">\(550,000\$\)</span>.
We see a clear positive and substantial effect. Let us also inspect the
intercept. THis tells us that a player who makes no points per game has to pay
the team about <span class="math inline">\(850,000\)</span>. Wait, this does not make sense…
To make the intercept more readily interpretable we should again center our
metric dependent variable <code>career_PTS</code> on its mean.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="lin-a.html#cb111-1" tabindex="-1"></a><span class="fu">mean</span>(data_nba<span class="sc">$</span>career_PTS)</span></code></pre></div>
<pre><code>## [1] 8.907679</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="lin-a.html#cb113-1" tabindex="-1"></a>data_nba <span class="ot">&lt;-</span> data_nba <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="lin-a.html#cb113-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PTS_centered =</span> career_PTS <span class="sc">-</span> <span class="fu">mean</span>(career_PTS))</span></code></pre></div>
<p>As we have now centered the independent variable of interst on its mean of <span class="math inline">\(8.9\)</span>
we can rerun the model.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="lin-a.html#cb114-1" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> PTS_centered, <span class="at">data =</span> data_nba)</span>
<span id="cb114-2"><a href="lin-a.html#cb114-2" tabindex="-1"></a></span>
<span id="cb114-3"><a href="lin-a.html#cb114-3" tabindex="-1"></a><span class="fu">summary</span>(m1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ PTS_centered, data = data_nba)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -14788659  -2023969   -434599   1311807  24326060 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   4072633      37840  107.63   &lt;2e-16 ***
## PTS_centered   552843       7453   74.17   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3732000 on 9726 degrees of freedom
## Multiple R-squared:  0.3613, Adjusted R-squared:  0.3612 
## F-statistic:  5502 on 1 and 9726 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>The coefficient for points per game has not changed but its interpretation has.
For each point per game over the mean of <span class="math inline">\(8.9\)</span> points per game, the salary is
estimated to increase by about <span class="math inline">\(550,000\$\)</span>. At the same time, for each point
below the mean the salary is estimated to decrease by the same amount.
The intercept now shows us the estimated salary of a player who scores <span class="math inline">\(8.9\)</span>
points per game which is slightly upwards of <span class="math inline">\(4,000,000\$\)</span> This makes way more
sense.</p>
<p>This model model already achieved a considerable <span class="math inline">\(R^2\)</span> of <span class="math inline">\(0.36\)</span>. About <span class="math inline">\(36\%\)</span>
of the variance in salaries is explained by the points per game a player scores.</p>
</div>
</div>
<div id="multiple-linear-regression-in-r" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Multiple linear regression in R<a href="lin-a.html#multiple-linear-regression-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The DAG we have constructed above based on our research question indicated that
we also have to include the position a player occupies in our model.
We can add additional independent variables to the formula used in <code>lm()</code> with a
<code>+</code> and the name of the additional variable(s). This works the same way for all
types of variables, i.e. metric, dummies or categorical variables.
So let us do this now by adding the 5 dummies we constructed for the positions:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="lin-a.html#cb116-1" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(salary <span class="sc">~</span> PTS_centered <span class="sc">+</span> position_center <span class="sc">+</span> position_sf <span class="sc">+</span>  position_pf <span class="sc">+</span> position_sg <span class="sc">+</span> position_pg, <span class="at">data =</span> data_nba)</span>
<span id="cb116-2"><a href="lin-a.html#cb116-2" tabindex="-1"></a></span>
<span id="cb116-3"><a href="lin-a.html#cb116-3" tabindex="-1"></a><span class="fu">summary</span>(m2)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = salary ~ PTS_centered + position_center + position_sf + 
##     position_pf + position_sg + position_pg, data = data_nba)
## 
## Residuals:
##       Min        1Q    Median        3Q       Max 
## -14511723  -1950255   -372906   1358768  24433660 
## 
## Coefficients:
##                 Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      3679728     114300  32.193  &lt; 2e-16 ***
## PTS_centered      568019       7474  75.994  &lt; 2e-16 ***
## position_center  1380246     114539  12.050  &lt; 2e-16 ***
## position_sf       125384     102174   1.227 0.219790    
## position_pf       206505      94882   2.176 0.029547 *  
## position_sg      -331033      96841  -3.418 0.000633 ***
## position_pg      -114552     117486  -0.975 0.329572    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3652000 on 9721 degrees of freedom
## Multiple R-squared:  0.3888, Adjusted R-squared:  0.3884 
## F-statistic:  1031 on 6 and 9721 DF,  p-value: &lt; 2.2e-16</code></pre>
<div id="interpretation-2" class="section level3 hasAnchor" number="8.6.1">
<h3><span class="header-section-number">8.6.1</span> Interpretation<a href="lin-a.html#interpretation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We still see a clear positive effect of points per game on the received salary
after controlling for the position a player occupies. Among those centers are by
far the top earners, making about <span class="math inline">\(1,400,00\$\)</span> more than players on other
positions. Most other positions show relatively small effects on the earnings.
Power and small forwards earn somewhat more than other positions on average
while point and especially shooting guards earns less.</p>
<p>We can now compare two fictive cases of a center and a point guard who each make
about <span class="math inline">\(20\)</span> points per game. What is the estimated salary for them?</p>
<p>As we have extensively worked with the formulas over the last sessions, we can
now keep it short and calculate the estimate directly. Remember that we
centered the points per game on the mean of about <span class="math inline">\(8.9\)</span>, so making <span class="math inline">\(20\)</span> per game
would mean making about <span class="math inline">\(11.1\)</span> than the average player. We will keep it simple
here and calculate with <span class="math inline">\(11\)</span>.</p>
<p><span class="math display">\[\hat{y_{center\_20}} = 3679728 + 568019 * 11 + 1380246 = 11,308,183\]</span></p>
<p><span class="math display">\[\hat{y_{pg\_20}} = 3679728 + 568019 * 11 - 114552 = 9,813,385\]</span></p>
<p>Despite making the same amount of points per game for their team, the model
estimates that a point guard earns about <span class="math inline">\(1,500,000\$\)</span> less compared to a center.</p>
</div>
<div id="sidenote-adding-interactions" class="section level3 hasAnchor" number="8.6.2">
<h3><span class="header-section-number">8.6.2</span> Sidenote: Adding interactions<a href="lin-a.html#sidenote-adding-interactions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will not use interactions in this session but we briefly want to state how we
could add them in the formula syntax.</p>
<p>Remember that interactions are multiplicative terms in our regression formula.
Adding them to the R formula syntax works the same way. We add the new term with
a <code>+</code> and use a <code>*</code> between the two variables that we want to interact.</p>
<p>Here is a non running toy example where we interact two x-variables:</p>
<pre><code>lm(y ~ x1 + x2 + x1 * x2, data = some_data)</code></pre>
</div>
</div>
<div id="regression-diagnostics-1" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Regression Diagnostics<a href="lin-a.html#regression-diagnostics-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="corrections" class="section level3 hasAnchor" number="8.7.1">
<h3><span class="header-section-number">8.7.1</span> Corrections<a href="lin-a.html#corrections" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="returning-to-our-research-question-2" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> Returning to our research question<a href="lin-a.html#returning-to-our-research-question-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="outlook" class="section level2 hasAnchor" number="8.9">
<h2><span class="header-section-number">8.9</span> Outlook<a href="lin-a.html#outlook" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Alternative Packages</li>
<li>Packages that expand upon the ideas</li>
<li>Weighting</li>
<li>Mutli-level/Fixed effects</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="log-t-3.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lin-e.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/08-linear-regression-app.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
